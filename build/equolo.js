/*! )Â°(, equolo - https://github.com/equolo/equolo.org */
/*@cc_on
(function(f){
window.setTimeout=f(window.setTimeout);
window.setInterval=f(window.setInterval);
})(function(f){return function(c,t,a){a=[].slice.call(arguments,2);return f(function(){c.apply(this,a)},t)}});
@*/
var
IEMobile=/*@cc_on/\bIEMobile\b/.test(navigator.userAgent)||@*/false,
IE9Mobile=/*@cc_on(IEMobile&&@_jscript_version<10)||@*/false,
IE10Mobile=/*@cc_on(IEMobile&&@_jscript_version/10>=1)||@*/false
;
IE9Mobile&&document.write('<link rel="stylesheet" href="css/IE9Mobile.css"/><script src="js/IE9Mobile.js"></script>');(function(j){
/*! display v0.1.8 - MIT license */
;var r=function(J){var y=J.Math,C=y.abs,M=y.max,I=y.min,R=J.Infinity,v=J.screen||R,u=J.matchMedia,D="addEventListener",E=J.document,Q=E.documentElement,z=/\bMobile\b/.test(navigator.userAgent),w=Q.requestFullscreen||Q.mozRequestFullScreen||Q.webkitRequestFullScreen,O=E.exitFullscreen||E.cancelFullscreen||E.mozCancelFullScreen||E.webkitExitFullscreen,F={change:[]},K={width:0,height:0,ratio:0,full:w&&O?function(S){var T=E.fullscreenElement||E.mozFullScreenElement||E.webkitFullscreenElement;if(S||S==null){K.fullScreen=true;if(!T){w.call(Q)}}else{if(T){K.fullScreen=false;O.call(E)}}}:Object,on:function(S,T){F[S].push(T)}},N=F.change.forEach||function(U,S){for(var T=0;T<this.length;T++){U.call(S,this[T],T,this)}},A;function B(S){S.call(K,K.width,K.height)}function H(S){if(A){clearTimeout(A);A=0}return(!G()&&innerHeight<300)||(A=setTimeout(x,300,S))}function G(){return"orientation" in J?C(J.orientation||0)===90:!!u&&u("(orientation:landscape)").matches}function x(X){A=0;var T=J.devicePixelRatio||1,Y=G(),U=v.width,W=v.height,V=I(J.innerWidth||Q.clientWidth,T<1?R:((z&&Y?M(U,W):U)||R)),S=I(J.innerHeight||Q.clientHeight,T<1?R:((z&&Y?I(U,W):W)||R));if(V!==K.width||S!==K.height){K.width=V;K.height=S;N.call(F.change,B)}}if(D in J){J[D]("orientationchange",H,true);J[D]("resize",H,true);try{v[D]("orientationchange",H,true)}catch(P){}}else{J.attachEvent("onresize",x)}x.call(J);K.ratio=J.devicePixelRatio||v.width/K.width||(v.deviceXDPI||1)/(v.logicalXDPI||1);return K}(j);function i(D,A){
/*! (C) Andrea Giammarchi - Mit Style License */
;if(!A){A=document}A.getElementsByTagName("head")[0].appendChild(A.createElement("style")).appendChild(A.createTextNode(""));var C=A.styleSheets,z=C[C.length-1],E=z.addRule||function(F,H,G){this.insertRule(F+"{"+H+"}",G)},v=0,u,x,B,y,w;for(u in D){if(D.hasOwnProperty(u)){w=[];x=D[u];for(B in x){if(x.hasOwnProperty(B)){y=x[B];w.push("-webkit-"+B+":"+y,"-khtml-"+B+":"+y,"-blink-"+B+":"+y,"-moz-"+B+":"+y,"-ms-"+B+":"+y,"-o-"+B+":"+y,B+":"+y)}}E.call(z,u,w.join(";")+";",v++)}}}(function(w,u,v){"bind" in u||(u.bind=function(A){var z=this,y=w.slice,x=y.call(arguments,1);return function(){return z.apply(A,x.concat(y.call(arguments)))}});"trim" in v||(v.trim=function(){return this.replace(/^[^\S]+|[^\S]+$/g,"")})}(Array.prototype,Function.prototype,String.prototype));var q,d=q=function(D,w){function M(U){for(var P=U.length,V=B(P?U[0]:{}),Q=V.length,W=D(P*Q),T=0,S=0,R,O;T<P;++T){for(O=U[T],R=0;R<Q;W[S++]=O[V[R++]]){}}return y.call([Q],V,W)}function J(S){for(var T=S.length,P=S[0],O=D(((T-P-1)/P)||0),R=1+P,Q=0,V,U;R<T;){for(O[Q++]=(U={}),V=0;V<P;U[S[++V]]=S[R++]){}}return O}function x(P){return function O(V){for(var X=this,W=V,T=0,U=X.length,R,Q,S;T<U;++T){if(A(S=W[Q=X[T]])){R=T+1;W[Q]=R<U?N.call(S,P,X.slice(R)):P(S)}W=W[Q]}return V}}function z(P){return function O(W,U){for(var R=A(W),Q=y.call(v,W),V=y.call(v,U),S=0,T=V.length;S<T;++S){Q=N.call(Q,P,V[S].split("."))}return R?Q:Q[0]}}function H(P,O){return O?C(P,O):M(P)}function u(O,P){return P?G(O,P):J(O)}function F(R,O,Q,P){return K(H(R,P),O,Q)}function E(P,O,Q){return u(I(P,O),Q)}var v=[],y=v.concat,B=Object.keys||function(Q){var P=[],O;for(O in Q){Q.hasOwnProperty(O)&&P.push(O)}return P},A=D.isArray||(function(P,Q){Q=P.call(v);return function O(R){return P.call(R)==Q}}({}.toString)),N=v.map||function(S,R){for(var P=this,Q=P.length,O=D(Q);Q--;O[Q]=S.call(R,P[Q],Q,P)){}return O},C=z(x(M)),G=z(x(J)),K=w.stringify,I=w.parse;return{pack:H,parse:E,stringify:F,unpack:u}}(Array,JSON);
/*! (C) WebReflection Mit Style License */
(function(E){function K(u){return typeof u=="string"?E.document.createTextNode(u):u}function z(O){if(O.length===1){return K(O[0])}for(var N=E.document.createDocumentFragment(),u=C.call(O),v=0;v<O.length;v++){N.appendChild(K(u[v]))}return N}for(var w,B,M,y=/^\s+|\s+$/g,J=/\s+/,H=" ",D=function(u,v){return this.contains(u)?v||this.remove(u):v&&this.add(u),!!v},A=(E.Element||E.Node||E.HTMLElement).prototype,G=["prepend",function(){var u=this.firstChild,v=z(arguments);u?this.insertBefore(v,u):this.appendChild(v)},"append",function(){this.appendChild(z(arguments))},"before",function(){var u=this.parentNode;u&&u.insertBefore(z(arguments),this)},"after",function(){var v=this.parentNode,N=this.nextSibling,u=z(arguments);v&&(N?v.insertBefore(u,N):v.appendChild(u))},"replace",function(){var u=this.parentNode;u&&u.replaceChild(z(arguments),this)},"remove",function(){var u=this.parentNode;u&&u.removeChild(this)}],C=G.slice,x=G.length;x;x-=2){w=G[x-2],w in A||(A[w]=G[x-1])}"classList" in document.documentElement?(M=document.createElement("div").classList,M.add("a","b"),"a b"!=M&&(A=M.constructor.prototype,"add" in A||(A=E.DOMTokenList.prototype),B=function(u){return function(){var v=0;while(v<arguments.length){u.call(this,arguments[v++])}}},A.add=B(A.add),A.remove=B(A.remove),A.toggle=D)):(B=function(u){if(!u){throw"SyntaxError"}if(J.test(u)){throw"InvalidCharacterError"}return u},M=function(v){var u=v.className.replace(y,"");u.length&&G.push.apply(this,u.split(J)),this._=v},M.prototype={length:0,add:function(){for(var u=0,v;u<arguments.length;u++){v=arguments[u],this.contains(v)||G.push.call(this,w)}this._.className=""+this},contains:function(u){return function(v){return x=u.call(this,w=B(v)),-1<x}}([].indexOf||function(u){x=this.length;while(x--&&this[x]!==u){}return x}),item:function(u){return this[u]||null},remove:function(){for(var u=0,v;u<arguments.length;u++){v=arguments[u],this.contains(v)&&G.splice.call(this,x,1)}this._.className=""+this},toggle:D,toString:function I(){return G.join.call(this,H)}},(Object.defineProperty||function(v,u,N){v.__defineGetter__(u,N.get)})(A,"classList",{get:function(){return new M(this)},set:function(){}}));try{new E.CustomEvent("?")}catch(F){E.CustomEvent=function(N,u){function O(R,P){var Q=document.createEvent(N);if(typeof R!="string"){throw new Error("An event name must be provided")}return N=="Event"&&(Q.initCustomEvent=v),P==null&&(P=u),Q.initCustomEvent(R,P.bubbles,P.cancelable,P.detail),Q}function v(R,P,S,Q){this.initEvent(R,P,S),this.detail=Q}return O}(E.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}})(j);
/*! (C) Andrea Giammarchi Mit Style License */
(function(ac){function J(){return{l:{},m:[],b:[]}}function A(v){var u=J();return ae.value=u,Q(v,ab,ae),ae.value=null,u}function F(v,u,w){typeof u=="function"?u.apply(v,w):u.handleEvent.apply(u,w)}function z(v,u,w){w!==void 0&&D(this,"detail",w),D(this,"type",u),D(this,"target",v),D(this,"timeStamp",V())}if(ac.eddy){return}ac.eddy=!0;var K=Array.prototype,U=ac.prototype,P=z.prototype,Y=U.hasOwnProperty,M=K.push,R=K.slice,I=K.unshift,ag="toLocaleString",ab={toLocaleString:1}.propertyIsEnumerable(ag)?"_@eddy"+Math.random():ag,W=ab===ag,ae=(ac.create||ac)(null),Z=[],Q=W?function(v,u,w){v[u]=w.value}:ac.defineProperty,ad=function(v){var u=this;return function(){return u.apply(v,arguments)}},H=K.indexOf||function(v){var u=this.length;while(u--&&this[u]!==v){}return u},V=Date.now||function(){return(new Date).getTime()},aa={boundTo:function(x){var E=Y.call(this,ab)?this[ab]:A(this),y=E.m,C=E.b,w=typeof x=="string"?this[x]:x,v=H.call(y,w);return v<0?C[M.call(y,w)-1]=ad.call(w,this):C[v]},emit:function(y){var S=Y.call(this,ab),E=S&&this[ab].l,C=S&&Y.call(E,y),x=C&&E[y],w=C&&R.call(arguments,1),v=0,N=C?x.length:v;while(v<N){F(this,x[v++],w)}return C},listeners:function(u){return Y.call(this,ab)&&Y.call(this[ab].l,u)&&this[ab].l[u].slice()||[]},off:function(w,E){var y=Y.call(this,ab),x=y&&this[ab].l,C=y&&Y.call(x,w)&&x[w],v;return C&&(v=H.call(C,E),-1<v&&(C.splice(v,1),C.length||delete x[w])),this},on:function(w,C,x){var y=Y.call(this,ab),v=(y?this[ab]:A(this)).l,u=y&&Y.call(v,w)?v[w]:v[w]=[];return H.call(u,C)<0&&(x?I:M).call(u,C),this},once:function(v,y,x){var u=function(C){w.off(v,u,x),F(w,y,arguments)},w=this;return w.on(v,u,x)},trigger:function(aj,y){var ak=Y.call(this,ab),x=ak&&this[ab].l,ai=typeof aj=="string",T=ai?aj:aj.type,E=ak&&Y.call(x,T),S=E&&x[T].slice(0),w=ai?new z(this,T,y):aj,N=0,ah=E?S.length:N,C=!(w instanceof z);C&&(w._active=!0,w.stopImmediatePropagation=P.stopImmediatePropagation),w.currentTarget=this,Z[0]=w;while(w._active&&N<ah){F(this,S[N++],Z)}return C&&(delete w._active,delete w.stopImmediatePropagation),!w.defaultPrevented}},D=function(v,u,w){Y.call(v,u)||(v[u]=w)},af=!1,G;P.defaultPrevented=!1,P._active=P.cancelable=!0,P.preventDefault=function(){this.defaultPrevented=!0},P.stopImmediatePropagation=function(){this._active=!1};for(G in aa){Y.call(aa,G)&&Q(U,G,{enumerable:!1,configurable:!0,writable:!0,value:aa[G]})}(function(v){function w(x){function y(C){C[x].apply(C,this)}return function(){return v.call(this,y,arguments),this}}for(var u in aa){aa.hasOwnProperty(u)&&!/^listeners|boundTo$/.test(u)&&Q(K,u,{enumerable:!1,configurable:!0,writable:!0,value:w(u)})}})(K.forEach);var B={boundTo:aa.boundTo,data:function X(w,u){var x="dataset" in this,v;return arguments.length<2?x?w in this.dataset?this.dataset[w]:v:(u=this.getAttribute("data-"+w.replace(X.gre||(X.gre=/-[a-z]/g),X.gplace||(X.gplace=function(C,y){return y.toUpperCase()}))))==null?v:u:x?u==null?delete this.dataset[w]:(this.dataset[w]=u,u):(X.sre||(X.sre=/([a-z])([A-Z])/g,X.splace=function(C,y,E){return y+"-"+E.toLowerCase()}),w="data-"+w.replace(X.sre,X.splace),u==null?!this.removeAttribute(w):(this.setAttribute(w,u),u))},emit:function(v){var u=new CustomEvent(v);return u.arguments=K.slice.call(arguments,1),this.dispatchEvent(u)},listeners:function(u){return[]},off:function(v,u,w){return this.removeEventListener(v,u,w),this},on:function(v,u,w){return this.addEventListener(v,u,w),this},once:aa.once,trigger:function(v,y){var x=typeof v=="string",u=x?v:v.type,w=x?new CustomEvent(u,(ae.detail=y,ae)):v;return ae.detail=null,z.call(w,this,u),this.dispatchEvent(w)}};ae.cancelable=!0,ae.bubbles=!0;try{document.createEvent("Event").target=document}catch(O){af=!0,D=function(w,u,x){if(!Y.call(w,u)){try{w[u]=x}catch(v){}}}}(function(E){var x=E.Window,S=x?x.prototype:E,C=(E.Node||E.Element||E.HTMLElement).prototype,y=(E.Document||E.HTMLDocument).prototype,N=(E.XMLHttpRequest||function(){}).prototype,w,v;for(w in B){Y.call(B,w)&&(v={enumerable:!1,configurable:!0,writable:!0,value:B[w]},Q(C,w,v),w!=="data"&&(Q(S,w,v),Q(y,w,v),Q(N,w,v)))}})(j)})(Object);j.$=function(u){return function(w,v){return u.slice.call(u.concat(v||document)[0].querySelectorAll(w))}}([]);
/*! (C) Andrea Giammarchi */
;function n(N){var C=j.Math,z=C.atan,B=C.exp,A=C.log,M=C.max,I=C.min,y=C.pow,R=C.round,T=C.sqrt,P=C.tan,G=C.PI,v=0.5,S=90,w=S*2,O=S*4,x=G/2,u=G/4,K=G/w,D=w/G,J=G*2,F=G*4;if(!N){N=256}return{coordsToPoint:function H(W,V){var U=N<<V;return{x:R((W.longitude/O+v)*U),y:R(I(1,M(0,v-(A(P(u+x*W.latitude/w))/G)/2))*U)}},pointDistance:function E(V,U){return T(y(U.y-V.y,2)+y(U.x-V.x,2))},pointToCoords:function Q(V,X){var W=N<<X,U=V.x/W,Y=V.y/W;return{latitude:Y<=0?S:Y>=1?-S:D*(2*z(B(G*(1-2*Y)))-x),longitude:(U===1?1:(U%1+1)%1)*O-w}}}}var o=o||function(x){var w=x.documentElement,v=x.createElement("p"),u;v.style.cssText=[";position:absolute",";margin:0",";padding:0",";display:block",";overflow:scroll",";width:50px",";line-height:50px",";font-size:50px"].join(" !important");v.innerHTML="0";w.insertBefore(v,w.lastChild);u=v.offsetWidth-v.clientWidth;w.removeChild(v);return u}(document);
/*! SimpleKinetic v0.1.1 - MIT license */
;var c=function(v){var D=v.isNaN,w=v.Math,K=w.abs,J=w.round,G=w.sqrt,C=v.setInterval,H=v.clearInterval,y=0.2,I=9,E=1000/60,B=x.prototype;function x(M){for(var N in M){if(/^on|context|interval/.test(N)){this[N]=M[N]}}}B.init=function(aa,Z,R,P,U,S){var ab=A(this),Q=(K(R)<1?0:R)*(U?1:I),W=(K(P)<1?0:P)*(S?1:I),O=Q*Q,V=W*W,N=G(O+V),M=Q/N,T=W/N,Y,X;ab.cancel(ab._cx,ab._cy);if(!(D(M)||D(T))){ab._a=C(z,ab.interval||E,ab);ab._t=0;ab._d=N;ab._sx=ab._cx=aa;ab._sy=ab._cy=Z;ab._xa=M;ab._ya=T;Y=J(aa+N*M);X=J(Z+N*T);ab._ex=Y;ab._ey=X;if((aa!==Y||Z!==X)&&ab.start(aa,Z,0,0,Y,X)!==false){return true}A(ab._a)}return false};B.start=F("start");B.move=F("move");B.end=F("end");B.cancel=function(O,M,P,N,R,Q){if(this._a){A(this).oncancel.call(this.context||this,O,M,P,N,R,Q)}};B.onstart=B.onmove=B.onend=B.oncancel=function(O,M,P,N,R,Q){};function A(M){H(M._a);M._a=0;return M}function F(M){M="on"+M;return function(P,N,Q,O,S,R){return this[M].call(this.context||this,P,N,Q,O,S,R)}}function z(N){var S=(N._t+=(N._d-N._t)*y),M=J(N._sx+S*N._xa),T=J(N._sy+S*N._ya),R=N._ex,P=N._ey,Q=M-N._cx,O=T-N._cy;if(M===R&&T===P){A(N).end(R,P,Q,O,R,P)}else{N.move(M,T,Q,O,R,P);N._cx=M;N._cy=T}}var u=C(function(M){H(u);if(!M){C=function(P,O,N){return v.setInterval(function(){P(N)},O)}}},0,1);return x}(this);function s(w,D,u,A){
/*! (C) equolo.org */
;var x=192,z=D/x,B=u||"#286868",v=w.getContext("2d");function C(E,F){v.moveTo(E*z,F*z)}function y(F,E,J,I,H,G){v.bezierCurveTo(F*z,E*z,J*z,I*z,H*z,G*z)}v.clearRect(0,0,w.width,w.height);w.width=w.height=D;if(A){v.fillStyle=A;v.fillRect(0,0,D,D)}v.fillStyle=B;v.save();v.scale(1.25,1.25);v.beginPath();C(95.32+10,10.21);y(101.05+10,7.85,108.56+10,12.68,108.09+10,19.01);y(108.39+10,25.61,100.46+10,30.49,94.67+10,27.28);y(87.81+10,24.1,88.04+10,12.79,95.32+10,10.21);v.closePath();v.fill();v.beginPath();C(67.01+10,7.48);y(72.33+10,20.59,82.54+10,31.7,95.46+10,37.57);y(104.17+10,41.72,113.89+10,43.25,123.47+10,43.1);y(108.12+10,48.29,96.34+10,60.6,88.32+10,74.31);y(79.91+10,88.85,78.34+10,106.86,83.29+10,122.84);y(72.84+10,106.64,59.08+10,91.84,41.39+10,83.57);y(30.55+10,78.74,18.41+10,76.4,6.58+10,77.64);y(24.52+10,73.08,42.99+10,65.59,54.74+10,50.61);y(64.15+10,38.49,68.55+10,22.74,67.01+10,7.48);v.closePath();v.fill();v.beginPath();C(43.22+10,119.97);y(43.75+10,102.87,43.89+10,94.92,48.72+10,89.2);y(50.5+10,93.22,49.73+10,97.67,50.54+10,101.88);y(51.34+10,107.31,53.13+10,112.93,57.29+10,116.73);y(61.3+10,121.01,68.71+10,121.41,70.94+10,127.44);y(72.27+10,133.19,66.42+10,138.03,61.08+10,138.09);y(54.7+10,138.64,49.47+10,133.66,46.69+10,128.39);y(43.41+10,122.84,43.52+10,116.2,43.22+10,109.97);v.closePath();v.fill();v.restore();return w}var h=function(v){var w=v.getContext("2d"),z={question:61736,"shopping-cart":61562,gift:61547,cutlery:61685,home:61461,glass:61440,briefcase:61617,group:61632,truck:61649,umbrella:61673},u={};function y(C,E,D){w.beginPath();w.arc(C,E,D,0,Math.PI*2,true);w.closePath();w.fill()}function x(D,C){w.clearRect(0,0,v.width,v.height);v.width=v.height=C;w.textBaseline="bottom";w.fillStyle="rgb(25,138,138)";y(C/2,C/2.5,C/2.5);A(C,C/4.9);w.fillStyle="rgb(240,240,240)";y(C/2,C/2.5,C/2.8);w.font=w.mozTextStyle=Math.round(C/2)+"px FontAwesome";w.translate((v.width-(w.measureText||w.mozMeasureText).call(w,D).width)/2,0);w.fillStyle="rgb(40,104,104)";if(D.length){w.fillText(D,0,C/1.5)}else{w.drawImage(s(document.createElement("canvas"),C/1.5),-C/2.8,C/10)}return v.toDataURL()}function A(C,D){w.beginPath();w.moveTo(C/2,C);w.lineTo(D,C/1.5);w.lineTo(C-D,C/1.5);w.lineTo(C/2,C);w.closePath();w.fill()}return function B(E,C,D){return u[E+C+D]||(u[E+C+D]=x(z.hasOwnProperty(E)?String.fromCharCode(z[E]):"",Math.round(C*(D||(typeof r==="undefined"?1:r.ratio)))))}}(document.createElement("canvas"));function b(u){for(var w,v,y=document.createElement("canvas"),x=document.createDocumentFragment(),A=[30,57,60,72,114,128,144,173,196,214,256],z=0;z<A.length;z++){w=document.createElement("link");v=document.createElement("link");w.rel="shortcut icon";v.rel="apple-touch-icon";w.type=v.type="image/png";w.href=v.href=u(y,A[z],"#E6A72A","#286868").toDataURL();w.setAttribute("sizes",w.sizes=A[z]+"x"+A[z]);v.setAttribute("sizes",w.sizes);x.appendChild(w);x.appendChild(v)}(document.head||document.querySelector("head")).appendChild(x)}var t=localStorage;try{t.setItem("0",0);t.removeItem("0")}catch(k){t={length:0,getItem:function(x){var w=document.cookie,v=w.indexOf(x=escape(""+x)),u;if(-1<v){v+=1+x.length;u=w.indexOf(";",v);return unescape(w.substring(v,u<0?w.length:u))}},setItem:function(u,v){document.cookie=[escape(""+u)+"="+escape(""+v),"expires="+(new Date(Date.now()+1000*60*60*24)).toUTCString(),"path=/"].join("; ")}}}j.on("leaflet:map",function(B){function A(){v.panBy([E*6,C*6]);F=null;w=0;x.scrollLeft=parseFloat(x.style.width);x.scrollTop=parseFloat(x.style.height)}function y(){x.style.top=z.offsetHeight+"px";u.style.width=(parseFloat(x.style.width=r.width+"px")*3)+"px";u.style.height=(parseFloat(x.style.height=H.offsetHeight+"px")*3)+"px"}var v=B.detail,H=document.getElementById("tiles"),z=H.parentNode.children[0],x=H.parentNode.appendChild(document.createElement("div")),u=x.appendChild(document.createElement("span")),G={animate:false,noMoveStart:true},w=0,E=0,C=0,F,D;x.id="ie9-map-wrapper";u.id="ie9-map-center";r.on("change",y);u.onmouseenter=u.onmouseleave=u.onselectionstart=u.onmousedown=u.onmouseup=u.onmousemove=u.onclick=u.ondblclick=function(I){I.preventDefault();I.stopPropagation();if(I.pageX<60&&I.pageY<100){}};A();x.onscroll=function(I){if(F!=null){v.panBy([(E=x.scrollLeft-F),(C=x.scrollTop-D)],G);clearTimeout(w);w=setTimeout(A,30)}F=x.scrollLeft;D=x.scrollTop};setTimeout(y)});
/*! (C) Andrea Giammarchi - Mit Style License */
;var l=function(E){function J(O,N){var P=new XMLHttpRequest,v;P.open("get",O,!0),P.onreadystatechange=function(){if(P.readyState==4){v=P.responseXML;if(!v||!v.firstChild){v=document.createElement("div"),v.innerHTML=P.responseText}B=H(v,"font-face","units-per-em"),M=H(v,"font-face","ascent"),y=H(v,"font-face","descent"),Array.prototype.forEach.call(v.getElementsByTagName("glyph"),C,w={}),N?N(w):D()}},P.send(null)}function H(v,u,N){return parseFloat(v.getElementsByTagName(u)[0].getAttribute(N))}function D(u){Array.prototype.forEach.call((u||document).querySelectorAll(".fa"),G,w)}function A(aa,N,ab){var Z=0,X=0,T=aa.length,Q=N/B*(typeof r=="object"?r.ratio:1.5),V,R,O,U,Y,P,S,W;E.width=E.height=Math.round(Q*B),z.setTransform(1,0,0,-1,0,E.height),z.fillStyle=ab||"rgb(0,0,0)",z.globalCompositeOperation="xor";while(Z<T){W=aa[Z++],S=1;switch(W.type){case"T":S=0;case"t":z.quadraticCurveTo(Q*(Y=2*O-(Y||O)),Q*(P=2*U-(P||U)),Q*(O=O*S+W.arguments[0]),Q*(U=U*S+W.arguments[1]));break;case"Q":S=0;case"q":z.quadraticCurveTo(Q*(Y=O*S+W.arguments[0]),Q*(P=U*S+W.arguments[1]),Q*(O=O*S+W.arguments[2]),Q*(U=U*S+W.arguments[3]));break;case"L":S=0;case"l":z.lineTo(Q*(O=O*S+W.arguments[0]),Q*(U=U*S+W.arguments[1]));break;case"H":S=0;case"h":z.lineTo(Q*(O=O*S+W.arguments[0]),Q*U);break;case"V":S=0;case"v":z.lineTo(Q*O,Q*(U=U*S+W.arguments[0]));break;case"z":case"Z":z.lineTo(Q*V,Q*R),z.closePath(),z.fill();break;case"M":S=0,z.moveTo(Q*(O=V=W.arguments[0]),Q*(U=R=W.arguments[1]-y)),z.beginPath(),X=2;while(X<W.arguments.length){z.lineTo(Q*(O=W.arguments[X]),Q*(U=W.arguments[X+1])),X+=2}break;default:throw"unknown "+W.type}}}function G(O){var v=O.offsetHeight,P=getComputedStyle(O,":before"),N=P.getPropertyValue("content"),u=this[N.length!==1?N.charAt(1):N].size(v,P.getPropertyValue("color"));O.parentNode.replaceChild(u,O)}function C(v,u){var N=v.getAttribute("d");N&&(this[v.getAttribute("unicode")]={size:I,path:N})}function x(N){var u=0,O=[],v;N=N.replace(x.re||(x.re=/\s*([achlmqstvzACHLMQSTVZ])\s*/g),"$1");while(u<N.length){O.push(v={}),u=F(v,N,u)}return O}function F(O,v,P){var N=P,u=!1;switch(O.type=v[P]){case"z":case"Z":return P+1}O.arguments=[];while(N++<v.length){switch(v[N]){case"A":case"a":case"C":case"c":case"H":case"h":case"L":case"l":case"M":case"m":case"Q":case"q":case"S":case"s":case"T":case"t":case"V":case"v":case"Z":case"z":u=!0;case" ":O.arguments.push(parseFloat(v.substring(P+1,N))),P=N;if(u){return P}}}}function I(v,u){var N;return A(this._actions||(this._actions=x(this.path)),v,u),K?(N=E,E=document.createElement("canvas"),z=E.getContext("2d")):(N=new Image,N.src=E.toDataURL(),z.clearRect(0,0,B,B)),N.style.cssText="width:"+v+"px;height:"+v+"px;",N.className="fa-ke",N}var K=-1<navigator.userAgent.indexOf("webOSBrowser"),z=E.getContext("2d"),w,B,M,y;return J.fix=D,J}(document.createElement("canvas"));
/*! (C) Andrea Giammarchi */
;var f=function(x){function v(A,z){function y(){u.call(y);y.waiting=setTimeout(w,z,y,A,this,arguments)}if(!z){z=v.delay}y.clear=u;y.waiting=Infinity;return y}function u(){if(this.waiting!==Infinity){clearTimeout(this.waiting)}this.waiting=0}function w(z,B,A,y){z.waiting=0;B.apply(A,y)}v.delay=x;return v}(500);
/*! (C) Andrea Giammarchi */
;function n(N){var C=j.Math,z=C.atan,B=C.exp,A=C.log,M=C.max,I=C.min,y=C.pow,R=C.round,T=C.sqrt,P=C.tan,G=C.PI,v=0.5,S=90,w=S*2,O=S*4,x=G/2,u=G/4,K=G/w,D=w/G,J=G*2,F=G*4;if(!N){N=256}return{coordsToPoint:function H(W,V){var U=N<<V;return{x:R((W.longitude/O+v)*U),y:R(I(1,M(0,v-(A(P(u+x*W.latitude/w))/G)/2))*U)}},pointDistance:function E(V,U){return T(y(U.y-V.y,2)+y(U.x-V.x,2))},pointToCoords:function Q(V,X){var W=N<<X,U=V.x/W,Y=V.y/W;return{latitude:Y<=0?S:Y>=1?-S:D*(2*z(B(G*(1-2*Y)))-x),longitude:(U===1?1:(U%1+1)%1)*O-w}}}}
/*! (C) Andrea Giammarchi */
;var p=(function(C,u){var I=/Android 4\.0/.test(C),G=/Android/.test(C)&&/Chrom(?:e|ium)/.test(C),J=B.prototype,K=u.abs,E=u.max,y=u.min,F=15;function B(M,N){if(!N){N=this}this._el=M;while(!M.offsetHeight){M=M.parentNode}v(this,this._r=M,true);this.disabled=false;this.onstart=N.onstart||w;this.onchange=N.onchange||w;this.onend=N.onend||w;this.onclick=N.onclick||w;if("ontouchend" in document){this._el.parentNode.style.cssText+=[";-ms-touch-action:none",";touch-action:none",";overflow:hidden"].join("")}}function w(M){}function v(M,N,O){var P=(O?"add":"remove")+"EventListener";N[P]("touchstart",M,true);N[P]("touchmove",M,true);N[P]("touchend",M,true)}J.clear=function A(){v(this,this._r,false)};J.handleEvent=function D(M){if(this._vscrolling&&M.type!=="touchend"){return}if(G){M.preventDefault()}this[M.type](M)};J.touchstart=function z(M){if(!this._scrolling){M=M.touches[0];this._x=M.pageX>>0;this._y=M.pageY>>0;this._diffY=0;this._t=0;this._l=0}};J.touchmove=function x(N){var O=N.touches[0],M=O.pageX>>0;if(this._scrolling){N.preventDefault();N.stopPropagation();N.x=M-this._diffX-this._x;if(I){this._p.style.marginLeft=E(this._m,y(0,N.x+this._l))+"px";this._e=N.x}else{this._p.scrollLeft=this._s-N.x}this.onchange(N)}else{this._diffX=M-this._x;this._diffY=O.pageY-this._y;this._vscrolling=F<=this._t++||F<=K(this._diffY);this._scrolling=!this._vscrolling&&F<=K(this._diffX);if(this._scrolling){N.preventDefault();this._p=this._el.parentNode;this._s=this._p.scrollLeft;if(I){if(!this._l){this._l=parseFloat(this._p.style.marginLeft||0);if(!this._l&&this._p.scrollLeft){this._l=-this._p.scrollLeft;this._p.scrollLeft=0;this._p.style.marginLeft=this._l+"px"}if(!this._m){this._m=this._p.clientWidth-this._p.scrollWidth}}this._s=-this._l}this.onstart(N)}}};J.touchend=function H(M){if(!M.touches.length){if(this._scrolling){M.preventDefault();this._p=null;if(I){this._l=E(this._m,y(0,this._e+this._l))}this.onend(M)}else{if(!this._vscrolling){this.onclick(M)}}this._t=0;this._scrolling=false;this._vscrolling=false}};B.compat=I;return B}(navigator.userAgent,Math));
/*! (C) Andrea Giammarchi */
(function(w,H,C){if(!((C=!!w.pointerEnabled)||w.msPointerEnabled)||"ontouchend" in H){return}var y=(C?"":"MS")+"POINTER_TYPE_MOUSE",x=function(Q){return C?Q.toLowerCase():"MS"+Q},z=C?function(Q){return Q}:function(Q){return Q.slice(2).toLowerCase()},A=function(Q,R,S){R.call(Q,x(S),v,true)},J=function(Q){return{value:function(){P[Q].call(this);this._[Q]()}}},K=function(S,Q){var R=S[Q];Object.defineProperty(S,Q,{configurable:true,value:function(V,U,T){if(V in B){R.call(this,B[V],v,T)}return R.call(this,V,U,T)}})},I=function(Q){return{get:function(){return this._[Q]}}},u=function(Q,R){var S=H.createEvent("Event");S.initEvent(Q,true,true);N.value=R;Object.defineProperties(S,O);R.target.dispatchEvent(S)},G=function(R){var Q=R.pointerType;return(Q===R[y]||Q==="mouse")?"mouse":"touch"},M=function(Q){return this[Q]},F=function(Q){return D[Q]},N={value:null},P=H.createEvent("Event"),O={_:N,touches:{configurable:true,get:function(){N.value=Object.keys(D).map(F);return Object.defineProperty(this,"touches",N).touches}},relatedTarget:I("relatedTarget"),currentTarget:I("currentTarget"),target:I("target"),altKey:I("altKey"),metaKey:I("metaKey"),ctrlKey:I("ctrlKey"),shiftKey:I("shiftKey"),preventDefault:J("preventDefault"),stopPropagation:J("stopPropagation"),stopImmediatePropagation:J("stopImmediatePropagation")},D=Object.create(null),B=Object.create(null),v={handleEvent:function(Q){if(G(Q)==="touch"){v[z(Q.type)](Q)}},pointerdown:function(Q){D[Q.pointerId]=new E(Q);u("touchstart",Q)},pointermove:function(Q){D[Q.pointerId]._=Q;u("touchmove",Q)},pointerup:function(Q){delete D[Q.pointerId];u("touchend",Q)}};function E(Q){this._=Q}Object.defineProperties(E.prototype,{identifier:I("pointerId"),target:I("target"),screenX:I("screenX"),screenY:I("screenY"),clientX:I("clientX"),clientY:I("clientY"),pageX:I("pageX"),pageY:I("pageY")});B.touchstart=x("PointerDown");B.touchmove=x("PointerMove");B.touchend=x("PointerUp");K(H,"addEventListener");K(H,"removeEventListener");K(Element.prototype,"addEventListener");K(Element.prototype,"removeEventListener");H.ontouchstart=H.ontouchmove=H.ontouchend=null}(navigator,document));j.on("wp:hs-icon",function(x){var v=document.body.appendChild(document.createElement("wp")),u=document.createElement("canvas"),w=(Math.min(r.width,r.height)/2)>>0;u.style.cssText="width:"+w+"px;height:"+w+"px;";v.appendChild(s(u,w*r.ratio,"#E6A72A","#286868"));v.appendChild(document.createElement("h1")).textContent="equolo.org";v.onclick=v.remove;if(IE9Mobile){v.style.cssText=[";top:",document.documentElement.scrollTop,"px",";width:",r.width,"px",";height:",r.height,"px"].join("")}x.arguments[0].preventDefault()});j.on("wp:ffos-install",function(v){try{navigator.mozApps.install("http://equolo.org/equolo.webapp").onerror=function(){alert(":-(\n"+this.error.name)}}catch(u){}v.arguments[0].preventDefault()});function g(){if(location.href.indexOf("equolo")<0){return}j._gaq=[["_setAccount","UA-924021-6"],["_trackPageview"]];var v=document.createElement("script"),u=document.getElementsByTagName("script")[0];v.type="text/javascript";v.async=true;v.src="http://www.google-analytics.com/ga.js";u.parentNode.insertBefore(v,u)}function m(){var x="https://www.paypalobjects.com/",w=document.createDocumentFragment(),v=w.appendChild(document.createElement("input")),u=w.appendChild(document.createElement("img"));v.type="image";v.src=x+"en_US/i/btn/btn_donate_SM.gif";v.border=u.border=0;v.name="submit";v.alt="PayPal - The safer, easier way to pay online!";u.alt="";u.src=x+"de_DE/i/scr/pixel.gif";u.width=u.height=1;$("form#paypal")[0].appendChild(w)}
/*! (C) Andrea Giammarchi */
;var e=function(w,v){function u(x,z){var y=x.getContext("2d");x.width=x.height=16;y.clearRect(0,0,16,16);y.fillStyle="rgb(0,0,0)";y.font="16px '"+z+"'";y.fillText("\uf06b",0,16);return x.toDataURL()}return function(x,y){return u(w,"default",y)!==u(v,x,y)}}(document.createElement("canvas"),document.createElement("canvas"));try{if(IE9Mobile||h("?",36).length<36||/Silk/.test(navigator.userAgent)){throw 0}}catch(a){j.compat=true;h=function(u){return base64Icon[u]};(function(v,u){u=v.documentElement;u.insertBefore(v.createElement("script"),u.lastChild).src="/cgi/base64_icon.php"}(document))}(function(ar,A){var F=12,N=15,ay=18,Q=3,aE="ontouchend" in A,ab=new n(256),ai,v,Y,aB,at,B,E,T,z,K,S,au,J,aG,av,ao=true;ar.onDOM(function(){if(IE9Mobile){l("../fonts/fontawesome-webfont.svg")}an();$("noscript").forEach(function(aH){aH.remove()});am(false,true)});ar.onLoad(aD);function an(){while(A.body.firstChild.id!="map"){A.body.removeChild(A.body.firstChild)}}function aD(){var aH,aL,aI,aK,aJ;if(!ar.L||(!ar.compat&&!e("FontAwesome","\uf06b"))){return setTimeout(aD,50)}S={map:$("section#map")[0],about:$("section#about")[0],contact:$("section#contact")[0],pinIt:$("section#pin-it")[0]};S.nav=$("nav",S.map)[0];S.placeDetails=$("div.details",S.map)[0];S.location=$("div.location",S.map)[0];S.details=[S.about,S.contact,S.pinIt];aL=$("img",S.map)[0];if(!ar.compat){aJ=aL.width||aL.naturalWidth;b(s);aI=A.createElement("canvas");aI.style.cssText="width:"+aJ+"px;height:"+aJ+"px;";aL.replace(s(aI,aJ*r.ratio,"#E6A72A").on("click",Z));aL=aI;aJ=20;aI=A.createElement("canvas");aI.style.cssText="width:"+aJ+"px;height:"+aJ+"px;";$("li.intro h3 > i")[0].replace(s(aI,aJ*r.ratio,"#064646"))}else{aL.on("click",Z);aI=$("head")[0].appendChild(A.createElement("link"));aI.rel="shortcut icon";aI.type="image/png";aI.href="/img/equolo-favicon.png"}if(r.height<=500){aI=aL.cloneNode(true).on("click",Z);S.map.appendChild(aI).classList.add("logo");if(aI.nodeName!=="IMG"){aI.getContext("2d").putImageData(aL.getContext("2d").getImageData(0,0,aL.width,aL.height),0,0)}}G();setTimeout(az,Math.random()*1000);g();m();function aO(aP,aQ){if(aQ.parentNode){aQ.parentNode.classList.remove("selected")}aQ.parentNode=aP;aQ.section=aP.firstChild.href.split("#")[1];aP.classList.add("selected")}Y=$("select[name=category]")[0];Y.on("change",function(){U(false);ah()});aB=[].map.call(Y.options,function(aP){this[aP.value]=aP.textContent;return aP.value},at={});aH=$("nav a").on("click",function aN(aT){var aP=this.parentNode,aQ;if(aN.sk){aN.sk.cancel()}if(aP.classList.contains("selected")){aT.preventDefault();aN.parentNode=null;aP.classList.remove("selected");aQ=S.nav.offsetHeight;(aN.sk=new c({context:S.map,onstart:function(){aN.kinetic=true;if(af.sk){af.sk.cancel()}am(false);A.body.scrollTop=A.documentElement.scrollTop=0;aN.ms.display="block";if(IE9Mobile){S.nav.style.top=null}aN.np.appendChild(S.nav)},onmove:function(aU,aZ,aW,aV,aY,aX){aN.ms.minHeight=aZ+"px"},onend:function(aU,aZ,aW,aV,aY,aX){aN.ms.minHeight=null;K.style.zIndex=Y.style.zIndex=9999;S.placeDetails.style.height=S.placeDetails.style._height;V();aN.kinetic=false;aN.doNotScroll=true}})).init(0,aQ,0,r.height-aQ,false,true)}else{if(aN.parentNode){if(IE9Mobile){aO(aP,aN)}else{aT.preventDefault();aO(aP,aN);setTimeout(af,300,aP)}}else{aT.preventDefault();aN.sk=new c({context:S.map,onstart:function(){K.style.zIndex=Y.style.zIndex=0;S.placeDetails.style._height=S.placeDetails.style.height;S.placeDetails.style.height=0;aN.doNotScroll=false;aN.kinetic=true;am(true)},onmove:function(aU,aZ,aW,aV,aY,aX){aN.ms.minHeight=aZ+"px"},onend:function(){S.about.prepend(S.nav);aN.ms.display="none";setTimeout(aO,100,aN.lt,aN);setTimeout(af,400,aN.lt);aN.kinetic=false}});if(!aN.np){aN.np=S.nav.parentNode;aN.ms=S.map.style}aN.lt=aP;aQ=S.map.offsetHeight;aN.sk.init(0,aQ,0,($("footer",S.map)[0].offsetHeight-aQ),false,true);if(!aN.scroll){aN.scroll=true;[A,A.documentElement,A.body].forEach(function(aU){aU.on("scroll",this).on("mousewheel",this);this.i=0},function aR(aZ){if(af.kinetic||aN.kinetic||aN.doNotScroll){return}var aY=av(),aW,aU,aV,aX;if(av.el){aW="scrollTop" in this?this:av.el;if(aW==av.el){aU=aX=0;aV=aY+r.height/3;while(aU<S.details.length){aW=S.details[aU++];aX+=aW.offsetHeight+8;if(aV<aX){--aU;break}}if(aU!=aR.i){aR.i=aU;aO(aH[aU].parentNode,aN)}if(IE9Mobile){S.nav.style.top=A.documentElement.scrollTop+"px"}}else{this.off("scroll",aR).off("mousewheel",aR)}}})}}}try{this.blur()}catch(aS){}});aH.some(function(aP){if(aP.href.split("#")[1]==this){setTimeout(aP.trigger.bind(aP),2000,"click");return true}},location.href.split("#")[1]);S.tiles=$("#tiles")[0];ai=R(S.tiles);E={};ae(navigator.country&&navigator.country.iso2!="US"?navigator.country.geo:[49.6,6.116667],5);K=$("button#find-me")[0];if("geolocation" in navigator){K.on("click",function(aQ){K.firstChild.classList.remove("fa-compass");K.firstChild.classList.add("fa-spin","fa-refresh");K.disabled=true;K.moved=false;try{if(aK){navigator.geolocation.clearWatch(aK)}aK=navigator.geolocation.watchPosition(function(aR){if(!K.moved){K.moved=true;ae(aR.coords,15)}D(aR.coords);ax()},ax,{maximumAge:300000})}catch(aP){K.remove()}K.blur()})}else{K.remove()}aj();if(t.length){W(t.getItem("equolo.activities"));aI=t.getItem("equolo.map");if(aI){ao=false;ae.apply(null,JSON.parse(aI))}}if(ao){$("li.intro",S.map)[0].style.cssText="display:block;margin-left:"+(aC())+"px;"}ai.on("zoomend",function aM(aP){var aQ=ai.getZoom(),aR=aM.current||0;aM.current=aQ;if(aR===0||((F<=aQ&&aR<F)||(aQ<F&&F<=aR))){U(true);ah()}});ai.on("movestart",function(){K.moved=true;ao=false});ai.on("moveend",aI=f(function(){var aR=ai.getZoom(),aP=ai.getCenter(),aQ;t.setItem("equolo.map",JSON.stringify([aP,aR]))}));ai.on("movestart",aI.clear);ar.on("pagehide",x).on("unload",x);if(IE9Mobile){ar.trigger("leaflet:map",ai)}}function x(){if(t.length){try{t.setItem("equolo.activities",au||"")}catch(aH){t.setItem("equolo.activities","")}}}function R(aJ,aI){var aH={attribution:'Map Tiles <a href="http://open.mapquest.com/">&copy; Open MapQuest</a>',maxZoom:ay,minZoom:Q},aK;aK=aI?L.map(aJ,aI):L.map(aJ);L.tileLayer("http://otile1.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",aH).addTo(aK);return aK}function ax(){K.firstChild.classList.remove("fa-spin","fa-download");K.firstChild.classList.add("fa-compass");K.disabled=false}function ac(){if(!aG){aG=J.reduce(aF,[])}return aG}function ad(aI,aH){var aJ=ab.pointDistance(ab.coordsToPoint(aI,ay),ab.coordsToPoint(aH,ay));if(!("distance" in aI)){aI.distance=aJ}if(!("distance" in aH)){aH.distance=aJ}if(aI.distance<aH.distance){if(aJ<aI.distance){aI.distance=aJ;return 1}return 0}else{if(aH.distance<aI.distance){return -1}else{return 0}}}function ag(aH){aH.name=this.name;aH.description=this.description;aH.aid=this.id;return aH}function aF(aH,aI){return aH.concat(aI.place.map(ag,aI))}function O(aO){for(var aI,aN,aL,aM=F<=ai.getZoom(),aJ=aM||{stroke:true,color:"#286868",weight:2,opacity:1,fill:true,fillColor:"#E6A72A",fillOpacity:1,radius:8,clickable:false,pointerEvents:false},aH=aO.place,aK=0;aK<aH.length;aK++){aN=aH[aK];aL=aN.icon;if(aM){aI=C(aN);aI.activity=aO;aI.placeIndex=aK}else{aI=L.circleMarker(P(aN),aJ)}E[aL].addLayer(aI)}}function C(aI){var aH=L.marker(P(aI),{icon:L.icon({iconUrl:h(aI.icon,36),iconSize:[36,36],iconAnchor:[18,36]})});aH.on("click",I);aH.id=aI.id;return aH}function D(aH){var aI=P(aH);if(!z){z=L.circleMarker(aI,{clickable:false,pointerEvents:false});z.addTo(ai)}z.setLatLng(aI)}function X(){for(var aI=Y.value,aH=1;aH<aB.length;aH++){if(aI=="all"||aI==aB[aH]){E[aB[aH]].addTo(ai)}}}function u(aI){for(var aH=1;aH<aB.length;aH++){if(E.hasOwnProperty(aB[aH])){ai.removeLayer(E[aB[aH]])}if(aI){E[aB[aH]]=L.layerGroup()}}}function ak(aH){if(!this.hasOwnProperty(aH.icon)){this[aH.icon]=0}this[aH.icon]++}function ah(){if(ao){return}if(ah.moveend){ai.off("moveend",ah.moveend);ai.off("movestart",ah.moveend.clear)}$("li",S.location).forEach(function(aH){if(aH.classList.contains("place")){aH.remove()}else{aH.style.display="none"}});ah.map={};if(ai.getZoom()<F){if(ah.el){ah.el.style.width=null}ah.el=$("li.stats",S.map)[0];ah.el.style.display="block";ai.on("moveend",ah.moveend=f(function(){var aK,aJ,aI={},aH=[];ac().filter(ap,ai.getBounds()).forEach(ak,aI);for(aJ in aI){if(aI.hasOwnProperty(aJ)){aH.push('<i class="fa fa-'+aJ+'"></i> '+at[aJ]+" "+aI[aJ])}}aK=ah.el.childNodes[1];aK.innerHTML=aH.length?aH.join(", "):"we have nothing nothing in this area :-(<br/>do you know any activity that could be part of equolo?";aq(aK)}));ai.on("movestart",ah.moveend.clear)}else{ah.el=$("ul",S.map)[0];ai.on("moveend",ah.moveend=f(function(){var aL=ac().filter(ap,ai.getBounds()),aK=aL.length,aH=aK&&A.createDocumentFragment(),aI=0,aJ;if(!aK){return}aJ=[];aL.forEach(function(aN){aJ.push(aN.id);if(ah.map[aN.id]){return}var aM=this.appendChild(A.createElement("li")),aO=aM.appendChild(A.createElement("h3")),aP=aM.appendChild(A.createElement("p"));aO.classList.add("ellipsis");aM.data("coords",aN.latitude+"/"+aN.longitude);aM.classList.add("place","t-all");aM.id="place-"+aN.id;ah.map[aN.id]=aN;aO.appendChild(A.createElement("i")).classList.add("fa","fa-"+aN.icon);aO.appendChild(A.createTextNode(" "+aN.name));aO.appendChild(A.createElement("span")).textContent=aN.postcode;aP.appendChild(A.createTextNode(aN.description));if(!aE){aM.on("click",aw)}},aH);ah.el.appendChild(aH);aK=$("li.place",ah.el).filter(function(aM){var aN=aM.id.slice(6);if(aJ.indexOf(aN)<0){delete ah.map[aN];aM.remove();return false}return true}).length;ah.el.style.width=(aK*276+aC()*2+1)+"px";aq(ah.el);if(aE&&!ah.hscroll){ah.hscroll=new p(ah.el,{onstart:function(){this.x=ah.el.scrollLeft;this.el=aw.last||$("li.place",ah.el)[0];aw.reset()},onchange:function(aM){this.x=aM.x-this.x},onend:function(aM){aw.call((this.x<0?this.el.nextElementSibling:this.el.previousElementSibling)||this.el,{})},onclick:function(aN){var aM=aN.target;while(aM&&aM.nodeName!=="LI"){aM=aM.parentNode}if(aM&&aM.nodeName==="LI"){aw.call(aM,aM)}}})}}));ai.on("movestart",ah.movestart=function(){ah.moveend.clear();aw.cancel()})}ah.moveend()}function I(){aw.call($("li#place-"+this.id)[0],{detail:false})}function y(aH){return this[aH].length}function w(aH){return this[aH]}function M(aJ,aI,aH){var aK=aH.filter(y,aI);if(aK.length){(aJ.appendChild(A.createElement("li"))).textContent=aK.map(w,aI).join(", ")}}function aA(aJ,aI,aL,aK){var aH;if(aI[aL]){aH=aJ.lastChild.appendChild(A.createElement("a"));aH.target="_blank";aH.classList.add("social");switch(aL){case"twitter":aH.href=/^https?:\/\/(?:www.)?twitter\./.test(aI[aL])?aI[aL]:"https://twitter.com/"+aI[aL].replace(/^@/,"");break;case"facebook":aH.href=/^https?:\/\/(?:www.)?facebook\./.test(aI[aL])?aI[aL]:"https://www.facebook.com/"+aI[aL];break;case"gplus":aH.href=/^https?:\/\/plus\.google\./.test(aI[aL])?aI[aL]:"https://plus.google.com/"+aI[aL];break}aH.appendChild(A.createElement("i")).classList.add("fa","fa-"+aK)}}function aa(aJ,aI,aL,aK){var aH;if(aI[aL]){aH=aJ.appendChild(A.createElement("li"));aH.classList.add("button");aH.appendChild(A.createElement("i")).classList.add("fa","fa-"+aK);aH=aH.appendChild(A.createElement("a"));aH.classList.add("ellipsis");switch(aL){case"phone":aH.href="tel:"+aI[aL].replace(/[^0-9+]/g,"");break;case"email":aH.href="mailto:"+aI[aL];break;default:aH.target="_blank";aH.href=/^https?:\/\//i.test(aI[aL])?aI[aL]:"http://"+aI[aL];break}aH.textContent=aI[aL]}}function H(aI){var aK,aJ,aH,aL;H.showing=true;if(!H.footer){H.footer=S.nav.parentNode.offsetHeight}if(!H.el){H.el=S.placeDetails}aH=S.tiles.offsetHeight;aK=H.el;aK.style.cssText="opacity:1;top:"+($("header",S.map)[0].offsetHeight)+"px;height:"+(aH<276?(aH+H.footer):aH)+"px;";if(aH<276){S.location.style.bottom=S.nav.parentNode.style.height=0}if(!v){H.h3=$("h3",aK)[0];H.info=$("ul",aK)[0];H.address=$("ul.address",aK)[0];H.contact=$("ul.contact",aK)[0];v=R($("div.minimap",aK)[0],{zoomControl:false,dragging:false,touchZoom:false,doubleClickZoom:false,scrollWheelZoom:false,boxZoom:false,keyboard:false,attributionControl:false,tap:false,fadeAnimation:false})}C(aI).addTo(v);aL=ab.coordsToPoint(aI,15);aL.y-=18;v.setView(P(ab.pointToCoords(aL,15)),15);H.h3.textContent=H.address.textContent=H.contact.textContent="";H.h3.appendChild(A.createElement("i")).className="fa fa-"+aI.icon;H.h3.appendChild(A.createTextNode(" "+aI.name));aJ=H.address;M(aJ,aI,["address","extra","postcode","city"]);aa(aJ,aI,"phone","phone");aA(aJ,aI,"twitter","twitter");aa(aJ,aI,"email","envelope");aA(aJ,aI,"facebook","facebook-square");aa(aJ,aI,"website","globe");aA(aJ,aI,"gplus","google-plus");aq(aK)}function aw(aJ){try{var aL=this.data("coords").split("/"),aO=aw.last==this,aI=this.parentNode.parentNode,aM=this.id.slice(6),aP,aN,aH,aQ}catch(aK){return}this.clicked=true;if(aO){if(H.showing){H.showing=false;H.el.style.cssText="";S.location.style.bottom=S.nav.parentNode.style.height=null}else{H(ah.map[aM])}}else{aQ=aJ.detail===false?Object:function(aR,aX,aT,aS,aV,aU){var aW=aw.cancel;aw.cancel=Object;ae({latitude:parseFloat(aL[0]),longitude:parseFloat(aL[1])},ai.getZoom());aw.cancel=aW;if(H.showing){H(ah.map[aM])}};aw.cancel();(aw.last=this).classList.add("selected");aN=0;aP=this.previousElementSibling;while(aP.classList.contains("place")){aP=aP.previousElementSibling;aN+=276}aH=p.compat?-parseFloat(aI.style.marginLeft||0):aI.scrollLeft;(aw.sk=new c({onmove:function(aR,aW,aT,aS,aV,aU){if(p.compat){aI.style.marginLeft=-aR+"px"}else{aI.scrollLeft=aR}},onend:aQ})).init(aH,0,aN-aH,0,true,false)||aQ()}}aw.reset=function(){if(aw.last){aw.last.classList.remove("selected");aw.last=null}};aw.cancel=function(){if(aw.sk){aw.sk.cancel()}aw.reset()};function U(aH){u(aH);if(aH){J.forEach(O)}X()}function W(aH){if(aH){J=JSON.parse(aH).map(al);au=aH;aG=null;U(true);ah()}}function aj(){var aH=ar.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");aH.open("GET","/cgi/location.php",true);aH.onreadystatechange=function(){if(aH.readyState==4){if(199<aH.status&&aH.status<400){W(aH.responseText)}else{setTimeout(aj,5000)}}};aH.send(null)}av=function(aI){var aH=A.body.scrollTop?A.body:(A.documentElement.scrollTop?A.documentElement:null);if(aH){av=function(aJ){return aJ==null?aH.scrollTop:(aH.scrollTop=aJ)};av.el=aH;return av(aI)}else{if(aI==null){return 0}else{A.body.scrollTop=A.documentElement.scrollTop=aI}}};function af(aK){var aJ=aK.firstChild.href.split("#")[1],aI=S.details,aO=true,aM=0,aH=0,aL=aI.length,aN=av();while(aO){aO=aI[aH].id!=aJ;if(aO){aM+=aI[aH].offsetHeight+8}aH++}if(IEMobile){av(aM)}else{if(af.sk){af.sk.cancel()}(af.sk=new c({onstart:function(){af.kinetic=true},onmove:function(aP,aU,aR,aQ,aT,aS){av(aU)},onend:function(aP,aU,aR,aQ,aT,aS){av(aS);af.kinetic=false}})).init(0,aN,0,aM-aN,false,true)}}function ae(aI,aH){ai.setView(P(aI),aH||Math.max(15,ai.getZoom()))}function am(aI,aH){var aJ=aI?"remove":"add";if(aH){A.documentElement.scrollTop=0;A.body.scrollTop=0}A.documentElement.classList[aJ]("no-scroll");A.body.classList[aJ]("no-scroll")}function aC(){return(r.width-276)>>1}function G(){var aH=aC();i({section:{"min-height":r.height+"px"},"section#map > div.location li.place:nth-child(3)":{"margin-left":aH+"px"},"section#map > div.location li.place:last-child":{"margin-right":aH+"px"},"section#map > div.location > ul > li":{"min-height":(150-o)+"px"}});V()}function V(){if(ai){ai.invalidateSize()}if(v){v.invalidateSize()}}function ap(aH){var aI=Y.value;return aH.icon==aI||aI=="all"&&this.contains(new L.LatLng(aH.latitude,aH.longitude))}function P(aH){return[aH.latitude||aH.lat||aH[0]||0,aH.longitude||aH.lng||aH[1]||0]}function aq(aH){if(IE9Mobile){l.fix(aH)}}function Z(){r.full(!r.fullScreen);setTimeout(V,300)}ar.on("go:fullscreen",function(){r.full(true)});function al(aH){aH.place=q.unpack(aH.place);return aH}function az(){$("span.email").forEach(function(aJ){var aH=A.createElement("a"),aI=aJ.textContent.split("").reverse().join("");aH.href="mailto:"+aI;aH.textContent=aI;aJ.replace(aH)})}r.on("change",G)}(j,document))}(this));