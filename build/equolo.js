/*! )Â°(, equolo - https://github.com/equolo/equolo.org */
/*@cc_on
(function(f){
window.setTimeout=f(window.setTimeout);
window.setInterval=f(window.setInterval);
})(function(f){return function(c,t,a){a=[].slice.call(arguments,2);return f(function(){c.apply(this,a)},t)}});
@*/
var
IEMobile=/*@cc_on/\bIEMobile\b/.test(navigator.userAgent)||@*/false,
IE9Mobile=/*@cc_on(IEMobile&&@_jscript_version<10)||@*/false,
IE10Mobile=/*@cc_on(IEMobile&&@_jscript_version/10>=1)||@*/false
;
IE9Mobile&&document.write('<link rel="stylesheet" href="css/IE9Mobile.css"/><script src="js/IE9Mobile.js"></script>');(function(h){
/*! display v0.1.8 - MIT license */
;var p=function(H){var w=H.Math,A=w.abs,J=w.max,G=w.min,P=H.Infinity,t=H.screen||P,s=H.matchMedia,B="addEventListener",C=H.document,O=C.documentElement,x=/\bMobile\b/.test(navigator.userAgent),u=O.requestFullscreen||O.mozRequestFullScreen||O.webkitRequestFullScreen,M=C.exitFullscreen||C.cancelFullscreen||C.mozCancelFullScreen||C.webkitExitFullscreen,D={change:[]},I={width:0,height:0,ratio:0,full:u&&M?function(Q){var R=C.fullscreenElement||C.mozFullScreenElement||C.webkitFullscreenElement;if(Q||Q==null){I.fullScreen=true;if(!R){u.call(O)}}else{if(R){I.fullScreen=false;M.call(C)}}}:Object,on:function(Q,R){D[Q].push(R)}},K=D.change.forEach||function(S,Q){for(var R=0;R<this.length;R++){S.call(Q,this[R],R,this)}},y;function z(Q){Q.call(I,I.width,I.height)}function F(Q){if(y){clearTimeout(y);y=0}return(!E()&&innerHeight<300)||(y=setTimeout(v,300,Q))}function E(){return"orientation" in H?A(H.orientation||0)===90:!!s&&s("(orientation:landscape)").matches}function v(V){y=0;var R=H.devicePixelRatio||1,W=E(),S=t.width,U=t.height,T=G(H.innerWidth||O.clientWidth,R<1?P:((x&&W?J(S,U):S)||P)),Q=G(H.innerHeight||O.clientHeight,R<1?P:((x&&W?G(S,U):U)||P));if(T!==I.width||Q!==I.height){I.width=T;I.height=Q;K.call(D.change,z)}}if(B in H){H[B]("orientationchange",F,true);H[B]("resize",F,true);try{t[B]("orientationchange",F,true)}catch(N){}}else{H.attachEvent("onresize",v)}v.call(H);I.ratio=H.devicePixelRatio||t.width/I.width||(t.deviceXDPI||1)/(t.logicalXDPI||1);return I}(h);function g(B,y){
/*! (C) Andrea Giammarchi - Mit Style License */
;if(!y){y=document}y.getElementsByTagName("head")[0].appendChild(y.createElement("style")).appendChild(y.createTextNode(""));var A=y.styleSheets,x=A[A.length-1],C=x.addRule||function(D,F,E){this.insertRule(D+"{"+F+"}",E)},t=0,s,v,z,w,u;for(s in B){if(B.hasOwnProperty(s)){u=[];v=B[s];for(z in v){if(v.hasOwnProperty(z)){w=v[z];u.push("-webkit-"+z+":"+w,"-khtml-"+z+":"+w,"-blink-"+z+":"+w,"-moz-"+z+":"+w,"-ms-"+z+":"+w,"-o-"+z+":"+w,z+":"+w)}}C.call(x,s,u.join(";")+";",t++)}}}(function(u,s,t){"bind" in s||(s.bind=function(y){var x=this,w=u.slice,v=w.call(arguments,1);return function(){return x.apply(y,v.concat(w.call(arguments)))}});"trim" in t||(t.trim=function(){return this.replace(/^[^\S]+|[^\S]+$/g,"")})}(Array.prototype,Function.prototype,String.prototype));var o,c=o=function(B,u){function J(S){for(var N=S.length,T=z(N?S[0]:{}),O=T.length,U=B(N*O),R=0,Q=0,P,M;R<N;++R){for(M=S[R],P=0;P<O;U[Q++]=M[T[P++]]){}}return w.call([O],T,U)}function H(Q){for(var R=Q.length,N=Q[0],M=B(((R-N-1)/N)||0),P=1+N,O=0,T,S;P<R;){for(M[O++]=(S={}),T=0;T<N;S[Q[++T]]=Q[P++]){}}return M}function v(N){return function M(T){for(var V=this,U=T,R=0,S=V.length,P,O,Q;R<S;++R){if(y(Q=U[O=V[R]])){P=R+1;U[O]=P<S?K.call(Q,N,V.slice(P)):N(Q)}U=U[O]}return T}}function x(N){return function M(U,S){for(var P=y(U),O=w.call(t,U),T=w.call(t,S),Q=0,R=T.length;Q<R;++Q){O=K.call(O,N,T[Q].split("."))}return P?O:O[0]}}function F(N,M){return M?A(N,M):J(N)}function s(M,N){return N?E(M,N):H(M)}function D(P,M,O,N){return I(F(P,N),M,O)}function C(N,M,O){return s(G(N,M),O)}var t=[],w=t.concat,z=Object.keys||function(O){var N=[],M;for(M in O){O.hasOwnProperty(M)&&N.push(M)}return N},y=B.isArray||(function(N,O){O=N.call(t);return function M(P){return N.call(P)==O}}({}.toString)),K=t.map||function(Q,P){for(var N=this,O=N.length,M=B(O);O--;M[O]=Q.call(P,N[O],O,N)){}return M},A=x(v(J)),E=x(v(H)),I=u.stringify,G=u.parse;return{pack:F,parse:C,stringify:D,unpack:s}}(Array,JSON);
/*! (C) WebReflection Mit Style License */
(function(E){function K(s){return typeof s=="string"?E.document.createTextNode(s):s}function z(N){if(N.length===1){return K(N[0])}for(var v=E.document.createDocumentFragment(),t=C.call(N),u=0;u<N.length;u++){v.appendChild(K(t[u]))}return v}for(var w,B,M,y=/^\s+|\s+$/g,J=/\s+/,H=" ",D=function(s,u){return this.contains(s)?u||this.remove(s):u&&this.add(s),!!u},A=(E.Element||E.Node||E.HTMLElement).prototype,G=["prepend",function(){var s=this.firstChild,u=z(arguments);s?this.insertBefore(u,s):this.appendChild(u)},"append",function(){this.appendChild(z(arguments))},"before",function(){var s=this.parentNode;s&&s.insertBefore(z(arguments),this)},"after",function(){var u=this.parentNode,v=this.nextSibling,s=z(arguments);u&&(v?u.insertBefore(s,v):u.appendChild(s))},"replace",function(){var s=this.parentNode;s&&s.replaceChild(z(arguments),this)},"remove",function(){var s=this.parentNode;s&&s.removeChild(this)}],C=G.slice,x=G.length;x;x-=2){w=G[x-2],w in A||(A[w]=G[x-1])}"classList" in document.documentElement?(M=document.createElement("div").classList,M.add("a","b"),"a b"!=M&&(A=M.constructor.prototype,"add" in A||(A=E.DOMTokenList.prototype),B=function(s){return function(){var u=0;while(u<arguments.length){s.call(this,arguments[u++])}}},A.add=B(A.add),A.remove=B(A.remove),A.toggle=D)):(B=function(s){if(!s){throw"SyntaxError"}if(J.test(s)){throw"InvalidCharacterError"}return s},M=function(u){var s=u.className.replace(y,"");s.length&&G.push.apply(this,s.split(J)),this._=u},M.prototype={length:0,add:function(){for(var s=0,u;s<arguments.length;s++){u=arguments[s],this.contains(u)||G.push.call(this,w)}this._.className=""+this},contains:function(s){return function(t){return x=s.call(this,w=B(t)),-1<x}}([].indexOf||function(s){x=this.length;while(x--&&this[x]!==s){}return x}),item:function(s){return this[s]||null},remove:function(){for(var s=0,u;s<arguments.length;s++){u=arguments[s],this.contains(u)&&G.splice.call(this,x,1)}this._.className=""+this},toggle:D,toString:function I(){return G.join.call(this,H)}},(Object.defineProperty||function(u,s,v){u.__defineGetter__(s,v.get)})(A,"classList",{get:function(){return new M(this)},set:function(){}}));try{new E.CustomEvent("?")}catch(F){E.CustomEvent=function(v,s){function N(P,t){var O=document.createEvent(v);if(typeof P!="string"){throw new Error("An event name must be provided")}return v=="Event"&&(O.initCustomEvent=u),t==null&&(t=s),O.initCustomEvent(P,t.bubbles,t.cancelable,t.detail),O}function u(Q,O,R,P){this.initEvent(Q,O,R),this.detail=P}return N}(E.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}})(h);
/*! (C) Andrea Giammarchi Mit Style License */
(function(ac){function J(){return{l:{},m:[],b:[]}}function A(u){var s=J();return ae.value=s,Q(u,ab,ae),ae.value=null,s}function F(u,s,v){typeof s=="function"?s.apply(u,v):s.handleEvent.apply(s,v)}function z(u,s,v){v&&D(this,"detail",v),D(this,"type",s),D(this,"target",u),D(this,"timeStamp",V())}if(ac.eddy){return}ac.eddy=!0;var K=Array.prototype,U=ac.prototype,P=z.prototype,Y=U.hasOwnProperty,M=K.push,R=K.slice,I=K.unshift,ag="toLocaleString",ab={toLocaleString:1}.propertyIsEnumerable(ag)?"_@eddy"+Math.random():ag,W=ab===ag,ae=(ac.create||ac)(null),Z=[],Q=W?function(u,s,v){u[s]=v.value}:ac.defineProperty,ad=function(u){var s=this;return function(){return s.apply(u,arguments)}},H=K.indexOf||function(u){var s=this.length;while(s--&&this[s]!==u){}return s},V=Date.now||function(){return(new Date).getTime()},aa={boundTo:function(w){var C=Y.call(this,ab)?this[ab]:A(this),x=C.m,y=C.b,v=typeof w=="string"?this[w]:w,s=H.call(x,v);return s<0?y[M.call(x,v)-1]=ad.call(v,this):y[s]},emit:function(y){var S=Y.call(this,ab),E=S&&this[ab].l,C=S&&Y.call(E,y),x=C&&E[y],w=C&&R.call(arguments,1),v=0,N=C?x.length:v;while(v<N){F(this,x[v++],w)}return C},listeners:function(s){return Y.call(this,ab)&&Y.call(this[ab].l,s)&&this[ab].l[s].slice()||[]},off:function(w,E){var y=Y.call(this,ab),x=y&&this[ab].l,C=y&&Y.call(x,w)&&x[w],v;return C&&(v=H.call(C,E),-1<v&&(C.splice(v,1),C.length||delete x[w])),this},on:function(v,y,w){var x=Y.call(this,ab),u=(x?this[ab]:A(this)).l,s=x&&Y.call(u,v)?u[v]:u[v]=[];return H.call(s,y)<0&&(w?I:M).call(s,y),this},once:function(v,y,x){var u=function(s){w.off(v,u,x),F(w,y,arguments)},w=this;return w.on(v,u,x)},trigger:function(aj,y){var ak=Y.call(this,ab),x=ak&&this[ab].l,ai=typeof aj=="string",T=ai?aj:aj.type,E=ak&&Y.call(x,T),S=E&&x[T].slice(0),w=ai?new z(this,T,y):aj,N=0,ah=E?S.length:N,C=!(w instanceof z);C&&(w._active=!0,w.stopImmediatePropagation=P.stopImmediatePropagation),w.currentTarget=this,Z[0]=w;while(w._active&&N<ah){F(this,S[N++],Z)}return C&&(delete w._active,delete w.stopImmediatePropagation),!w.defaultPrevented}},D=function(u,s,v){Y.call(u,s)||(u[s]=v)},af=!1,G;P.defaultPrevented=!1,P._active=P.cancelable=!0,P.preventDefault=function(){this.defaultPrevented=!0},P.stopImmediatePropagation=function(){this._active=!1};for(G in aa){Y.call(aa,G)&&Q(U,G,{enumerable:!1,configurable:!0,writable:!0,value:aa[G]})}(function(t){function u(v){function w(x){x[v].apply(x,this)}return function(){return t.call(this,w,arguments),this}}for(var s in aa){aa.hasOwnProperty(s)&&!/^listeners|boundTo$/.test(s)&&Q(K,s,{enumerable:!1,configurable:!0,writable:!0,value:u(s)})}})(K.forEach);var B={boundTo:aa.boundTo,data:function X(u,s){var v="dataset" in this;return arguments.length<2?v?this.dataset[u]:(s=this.getAttribute("data-"+u.replace(X.gre||(X.gre=/-[a-z]/g),X.gplace||(X.gplace=function(x,w){return w.toUpperCase()}))))==null?void 0:s:v?s==null?delete this.dataset[u]:(this.dataset[u]=s,s):(X.sre||(X.sre=/([a-z])([A-Z])/g,X.splace=function(x,w,y){return w+"-"+y.toLowerCase()}),u="data-"+u.replace(X.sre,X.splace),s==null?!this.removeAttribute(u):(this.setAttribute(u,s),s))},emit:function(t){var s=new CustomEvent(t);return s.arguments=K.slice.call(arguments,1),this.dispatchEvent(s)},listeners:function(s){return[]},off:function(u,s,v){return this.removeEventListener(u,s,v),this},on:function(u,s,v){return this.addEventListener(u,s,v),this},once:aa.once,trigger:function(v,y){var x=typeof v=="string",u=x?v:v.type,w=x?new CustomEvent(u,(ae.detail=y,ae)):v;return ae.detail=null,z.call(w,this,u),this.dispatchEvent(w)}};ae.cancelable=!0,ae.bubbles=!0;try{document.createEvent("Event").target=document}catch(O){af=!0,D=function(v,s,w){if(!Y.call(v,s)){try{v[s]=w}catch(u){}}}}(function(E){var x=E.Window,S=x?x.prototype:E,C=(E.Node||E.Element||E.HTMLElement).prototype,y=(E.Document||E.HTMLDocument).prototype,N=(E.XMLHttpRequest||function(){}).prototype,w,v;for(w in B){Y.call(B,w)&&(v={enumerable:!1,configurable:!0,writable:!0,value:B[w]},Q(S,w,v),Q(C,w,v),Q(y,w,v),w!=="data"&&Q(N,w,v))}})(h)})(Object);h.$=function(s){return function(u,t){return s.slice.call(s.concat(t||document)[0].querySelectorAll(u))}}([]);
/*! (C) Andrea Giammarchi */
;function k(K){var A=h.Math,x=A.atan,z=A.exp,y=A.log,J=A.max,G=A.min,w=A.pow,P=A.round,R=A.sqrt,N=A.tan,E=A.PI,t=0.5,Q=90,u=Q*2,M=Q*4,v=E/2,s=E/4,I=E/u,B=u/E,H=E*2,D=E*4;if(!K){K=256}return{coordsToPoint:function F(U,T){var S=K<<T;return{x:P((U.longitude/M+t)*S),y:P(G(1,J(0,t-(y(N(s+v*U.latitude/u))/E)/2))*S)}},pointDistance:function C(T,S){return R(w(S.y-T.y,2)+w(S.x-T.x,2))},pointToCoords:function O(T,V){var U=K<<V,S=T.x/U,W=T.y/U;return{latitude:W<=0?Q:W>=1?-Q:B*(2*x(z(E*(1-2*W)))-v),longitude:(S===1?1:(S%1+1)%1)*M-u}}}}var m=m||function(v){var u=v.documentElement,t=v.createElement("p"),s;t.style.cssText=[";position:absolute",";margin:0",";padding:0",";display:block",";overflow:scroll",";width:50px",";line-height:50px",";font-size:50px"].join(" !important");t.innerHTML="0";u.insertBefore(t,u.lastChild);s=t.offsetWidth-t.clientWidth;u.removeChild(t);return s}(document);
/*! SimpleKinetic v0.1.1 - MIT license */
;var b=function(t){var B=t.isNaN,u=t.Math,I=u.abs,H=u.round,E=u.sqrt,A=t.setInterval,F=t.clearInterval,w=0.2,G=9,C=1000/60,z=v.prototype;function v(J){for(var K in J){if(/^on|context|interval/.test(K)){this[K]=J[K]}}}z.init=function(Y,X,P,N,S,Q){var Z=y(this),O=(I(P)<1?0:P)*(S?1:G),U=(I(N)<1?0:N)*(Q?1:G),M=O*O,T=U*U,K=E(M+T),J=O/K,R=U/K,W,V;Z.cancel(Z._cx,Z._cy);if(!(B(J)||B(R))){Z._a=A(x,Z.interval||C,Z);Z._t=0;Z._d=K;Z._sx=Z._cx=Y;Z._sy=Z._cy=X;Z._xa=J;Z._ya=R;W=H(Y+K*J);V=H(X+K*R);Z._ex=W;Z._ey=V;if((Y!==W||X!==V)&&Z.start(Y,X,0,0,W,V)!==false){return true}y(Z._a)}return false};z.start=D("start");z.move=D("move");z.end=D("end");z.cancel=function(M,J,N,K,P,O){if(this._a){y(this).oncancel.call(this.context||this,M,J,N,K,P,O)}};z.onstart=z.onmove=z.onend=z.oncancel=function(M,J,N,K,P,O){};function y(J){F(J._a);J._a=0;return J}function D(J){J="on"+J;return function(N,K,O,M,Q,P){return this[J].call(this.context||this,N,K,O,M,Q,P)}}function x(K){var Q=(K._t+=(K._d-K._t)*w),J=H(K._sx+Q*K._xa),R=H(K._sy+Q*K._ya),P=K._ex,N=K._ey,O=J-K._cx,M=R-K._cy;if(J===P&&R===N){y(K).end(P,N,O,M,P,N)}else{K.move(J,R,O,M,P,N);K._cx=J;K._cy=R}}var s=A(function(J){F(s);if(!J){A=function(N,M,K){return t.setInterval(function(){N(K)},M)}}},0,1);return v}(this);function q(u,B,s,y){
/*! (C) equolo.org */
;var v=192,x=B/v,z=s||"#286868",t=u.getContext("2d");function A(C,D){t.moveTo(C*x,D*x)}function w(D,C,H,G,F,E){t.bezierCurveTo(D*x,C*x,H*x,G*x,F*x,E*x)}t.clearRect(0,0,u.width,u.height);u.width=u.height=B;if(y){t.fillStyle=y;t.fillRect(0,0,B,B)}t.fillStyle=z;t.save();t.scale(1.25,1.25);t.beginPath();A(95.32+10,10.21);w(101.05+10,7.85,108.56+10,12.68,108.09+10,19.01);w(108.39+10,25.61,100.46+10,30.49,94.67+10,27.28);w(87.81+10,24.1,88.04+10,12.79,95.32+10,10.21);t.closePath();t.fill();t.beginPath();A(67.01+10,7.48);w(72.33+10,20.59,82.54+10,31.7,95.46+10,37.57);w(104.17+10,41.72,113.89+10,43.25,123.47+10,43.1);w(108.12+10,48.29,96.34+10,60.6,88.32+10,74.31);w(79.91+10,88.85,78.34+10,106.86,83.29+10,122.84);w(72.84+10,106.64,59.08+10,91.84,41.39+10,83.57);w(30.55+10,78.74,18.41+10,76.4,6.58+10,77.64);w(24.52+10,73.08,42.99+10,65.59,54.74+10,50.61);w(64.15+10,38.49,68.55+10,22.74,67.01+10,7.48);t.closePath();t.fill();t.beginPath();A(43.22+10,119.97);w(43.75+10,102.87,43.89+10,94.92,48.72+10,89.2);w(50.5+10,93.22,49.73+10,97.67,50.54+10,101.88);w(51.34+10,107.31,53.13+10,112.93,57.29+10,116.73);w(61.3+10,121.01,68.71+10,121.41,70.94+10,127.44);w(72.27+10,133.19,66.42+10,138.03,61.08+10,138.09);w(54.7+10,138.64,49.47+10,133.66,46.69+10,128.39);w(43.41+10,122.84,43.52+10,116.2,43.22+10,109.97);t.closePath();t.fill();t.restore();return u}var f=function(t){var u=t.getContext("2d"),x={question:61736,"shopping-cart":61562,gift:61547,cutlery:61685,home:61461,glass:61440,briefcase:61617,group:61632,truck:61649},s={};function w(A,C,B){u.beginPath();u.arc(A,C,B,0,Math.PI*2,true);u.closePath();u.fill()}function v(B,A){u.clearRect(0,0,t.width,t.height);t.width=t.height=A;u.textBaseline="bottom";u.fillStyle="rgb(25,138,138)";w(A/2,A/2.5,A/2.5);y(A,A/4.9);u.fillStyle="rgb(240,240,240)";w(A/2,A/2.5,A/2.8);u.font=u.mozTextStyle=Math.round(A/2)+"px FontAwesome";u.translate((t.width-(u.measureText||u.mozMeasureText).call(u,B).width)/2,0);u.fillStyle="rgb(40,104,104)";if(B.length){u.fillText(B,0,A/1.5)}else{u.drawImage(q(document.createElement("canvas"),A/1.5),-A/2.8,A/10)}return t.toDataURL()}function y(A,B){u.beginPath();u.moveTo(A/2,A);u.lineTo(B,A/1.5);u.lineTo(A-B,A/1.5);u.lineTo(A/2,A);u.closePath();u.fill()}return function z(C,A,B){return s[C+A+B]||(s[C+A+B]=v(x.hasOwnProperty(C)?String.fromCharCode(x[C]):"",Math.round(A*(B||(typeof p==="undefined"?1:p.ratio)))))}}(document.createElement("canvas"));var r=localStorage;try{r.setItem("0",0);r.removeItem("0")}catch(i){r={length:0,getItem:function(v){var u=document.cookie,t=u.indexOf(v=escape(""+v)),s;if(-1<t){t+=1+v.length;s=u.indexOf(";",t);return unescape(u.substring(t,s<0?u.length:s))}},setItem:function(s,t){document.cookie=[escape(""+s)+"="+escape(""+t),"expires="+(new Date(Date.now()+1000*60*60*24)).toUTCString(),"path=/"].join("; ")}}}h.on("leaflet:map",function(z){function y(){t.panBy([C*6,A*6]);D=null;u=0;v.scrollLeft=parseFloat(v.style.width);v.scrollTop=parseFloat(v.style.height)}function w(){v.style.top=x.offsetHeight+"px";s.style.width=(parseFloat(v.style.width=p.width+"px")*3)+"px";s.style.height=(parseFloat(v.style.height=F.offsetHeight+"px")*3)+"px"}var t=z.detail,F=document.getElementById("tiles"),x=F.parentNode.children[0],v=F.parentNode.appendChild(document.createElement("div")),s=v.appendChild(document.createElement("span")),E={animate:false,noMoveStart:true},u=0,C=0,A=0,D,B;v.id="ie9-map-wrapper";s.id="ie9-map-center";p.on("change",w);s.onmouseenter=s.onmouseleave=s.onselectionstart=s.onmousedown=s.onmouseup=s.onmousemove=s.onclick=s.ondblclick=function(G){G.preventDefault();G.stopPropagation();if(G.pageX<60&&G.pageY<100){}};y();v.onscroll=function(G){if(D!=null){t.panBy([(C=v.scrollLeft-D),(A=v.scrollTop-B)],E);clearTimeout(u);u=setTimeout(y,30)}D=v.scrollLeft;B=v.scrollTop};setTimeout(w)});
/*! (C) Andrea Giammarchi - Mit Style License */
;var j=function(D){function x(K,s){var M=new XMLHttpRequest,u;M.open("get",K,!0),M.onreadystatechange=function(){M.readyState==4&&(u=M.responseXML,u.firstChild||(u=document.createElement("div"),u.innerHTML=M.responseText),v=H(u,"font-face","units-per-em"),A=H(u,"font-face","ascent"),J=H(u,"font-face","descent"),Array.prototype.forEach.call(u.getElementsByTagName("glyph"),F,y={}),s?s(y):G())},M.send(null)}function H(u,s,K){return parseFloat(u.getElementsByTagName(s)[0].getAttribute(K))}function G(s){Array.prototype.forEach.call((s||document).querySelectorAll(".fa"),z,y)}function C(K,O,t){var X=0,V=0,R=K.length,N=O/v*(typeof p=="object"?p.ratio:1.5),T,P,s,S,W,M,Q,U;D.width=D.height=Math.round(N*v),I.translate(0,D.height),I.scale(1,-1),I.fillStyle=t||"rgb(0,0,0)",I.globalCompositeOperation="xor";while(X<R){U=K[X++],Q=1;switch(U.type){case"T":Q=0;case"t":I.quadraticCurveTo(N*(W=2*s-(W||s)),N*(M=2*S-(M||S)),N*(s=s*Q+U.arguments[0]),N*(S=S*Q+U.arguments[1]));break;case"Q":Q=0;case"q":I.quadraticCurveTo(N*(W=s*Q+U.arguments[0]),N*(M=S*Q+U.arguments[1]),N*(s=s*Q+U.arguments[2]),N*(S=S*Q+U.arguments[3]));break;case"L":Q=0;case"l":I.lineTo(N*(s=s*Q+U.arguments[0]),N*(S=S*Q+U.arguments[1]));break;case"H":Q=0;case"h":I.lineTo(N*(s=s*Q+U.arguments[0]),N*S);break;case"V":Q=0;case"v":I.lineTo(N*s,N*(S=S*Q+U.arguments[0]));break;case"z":case"Z":I.lineTo(N*T,N*P),I.closePath(),I.fill();break;case"M":Q=0,I.moveTo(N*(s=T=U.arguments[0]),N*(S=P=U.arguments[1]-J)),I.beginPath(),V=2;while(V<U.arguments.length){I.lineTo(N*(s=U.arguments[V]),N*(S=U.arguments[V+1])),V+=2}break;default:throw"unknown "+U.type}}}function z(M){var u=M.offsetHeight,N=getComputedStyle(M,":before"),K=N.getPropertyValue("content"),s=this[K.length!==1?K.charAt(1):K].size(u,N.getPropertyValue("color"));M.parentNode.replaceChild(s,M)}function F(u,s){var K=u.getAttribute("d");K&&(this[u.getAttribute("unicode")]={size:E,path:K})}function B(K){var s=0,M=[],u;K=K.replace(B.re||(B.re=/\s*([achlmqstvzACHLMQSTVZ])\s*/g),"$1");while(s<K.length){M.push(u={}),s=w(u,K,s)}return M}function w(M,u,N){var K=N,s=!1;switch(M.type=u[N]){case"z":case"Z":return N+1}M.arguments=[];while(K++<u.length){switch(u[K]){case"A":case"a":case"C":case"c":case"H":case"h":case"L":case"l":case"M":case"m":case"Q":case"q":case"S":case"s":case"T":case"t":case"V":case"v":case"Z":case"z":s=!0;case" ":M.arguments.push(parseFloat(u.substring(N+1,K))),N=K;if(s){return N}}}}function E(K,t){var u=new Image;return C(this._actions||(this._actions=B(this.path)),K,t),u.src=D.toDataURL(),u.style.cssText="width:"+K+"px;height:"+K+"px;",I.clearRect(0,0,v,v),u}var I=D.getContext("2d"),y,v,A,J;return x.fix=G,x}(document.createElement("canvas"));
/*! (C) Andrea Giammarchi */
;var d=function(v){function t(z,y){if(!y){y=t.delay}function x(){w();x._=setTimeout(u,y,z,this,arguments,x)}function w(){clearTimeout(x._)}x.clear=w;x._=0;return x}function s(){clearTimeout(this._);this._=0;return this}function u(z,y,x,w){w._=0;z.apply(y,x)}t.delay=v;return t}(500);
/*! (C) Andrea Giammarchi */
;function k(K){var A=h.Math,x=A.atan,z=A.exp,y=A.log,J=A.max,G=A.min,w=A.pow,P=A.round,R=A.sqrt,N=A.tan,E=A.PI,t=0.5,Q=90,u=Q*2,M=Q*4,v=E/2,s=E/4,I=E/u,B=u/E,H=E*2,D=E*4;if(!K){K=256}return{coordsToPoint:function F(U,T){var S=K<<T;return{x:P((U.longitude/M+t)*S),y:P(G(1,J(0,t-(y(N(s+v*U.latitude/u))/E)/2))*S)}},pointDistance:function C(T,S){return R(w(S.y-T.y,2)+w(S.x-T.x,2))},pointToCoords:function O(T,V){var U=K<<V,S=T.x/U,W=T.y/U;return{latitude:W<=0?Q:W>=1?-Q:B*(2*x(z(E*(1-2*W)))-v),longitude:(S===1?1:(S%1+1)%1)*M-u}}}}
/*! (C) Andrea Giammarchi */
;var n=(function(A,s){var G=/Android 4\.0/.test(A),E=/Android/.test(A)&&/Chrom(?:e|ium)/.test(A),H=z.prototype,I=s.abs,C=s.max,w=s.min,D=15;function z(J,K){if(!K){K=this}this._el=J;while(!J.offsetHeight){J=J.parentNode}t(this,this._r=J,true);this.disabled=false;this.onstart=K.onstart||u;this.onchange=K.onchange||u;this.onend=K.onend||u;this.onclick=K.onclick||u;if("ontouchend" in document){this._el.parentNode.style.cssText+=[";-ms-touch-action:none",";touch-action:none",";overflow:hidden"].join("")}}function u(J){}function t(J,K,M){var N=(M?"add":"remove")+"EventListener";K[N]("touchstart",J,true);K[N]("touchmove",J,true);K[N]("touchend",J,true)}H.clear=function y(){t(this,this._r,false)};H.handleEvent=function B(J){if(this._vscrolling&&J.type!=="touchend"){return}if(E){J.preventDefault()}this[J.type](J)};H.touchstart=function x(J){if(!this._scrolling){J=J.touches[0];this._x=J.pageX>>0;this._y=J.pageY>>0;this._diffY=0;this._t=0;this._l=0}};H.touchmove=function v(K){var M=K.touches[0],J=M.pageX>>0;if(this._scrolling){K.preventDefault();K.stopPropagation();K.x=J-this._diffX-this._x;this._p.scrollLeft=this._s-K.x;if(G){this._p.style.marginLeft=C(this._m,w(0,K.x+this._l))+"px";this._e=K.x}this.onchange(K)}else{this._diffX=J-this._x;this._diffY=M.pageY-this._y;this._vscrolling=D<=this._t++||D<=I(this._diffY);this._scrolling=!this._vscrolling&&D<=I(this._diffX);if(this._scrolling){K.preventDefault();this._p=this._el.parentNode;this._s=this._p.scrollLeft;if(G){if(!this._l){this._l=parseFloat(this._p.style.marginLeft||0);this._m=this._p.clientWidth-this._p.scrollWidth}this._s=-this._l}this.onstart(K)}}};H.touchend=function F(J){if(!J.touches.length){if(this._scrolling){J.preventDefault();this._p=null;if(G){this._l=C(this._m,w(0,this._e+this._l))}this.onend(J)}else{if(!this._vscrolling){this.onclick(J)}}this._t=0;this._scrolling=false;this._vscrolling=false}};z.compat=G;return z}(navigator.userAgent,Math));
/*! (C) Andrea Giammarchi */
(function(u,F,A){if(!((A=!!u.pointerEnabled)||u.msPointerEnabled)||"ontouchend" in F){return}var w=(A?"":"MS")+"POINTER_TYPE_MOUSE",v=function(O){return A?O.toLowerCase():"MS"+O},x=A?function(O){return O}:function(O){return O.slice(2).toLowerCase()},y=function(O,P,Q){P.call(O,v(Q),t,true)},H=function(O){return{value:function(){N[O].call(this);this._[O]()}}},I=function(Q,O){var P=Q[O];Object.defineProperty(Q,O,{configurable:true,value:function(T,S,R){if(T in z){P.call(this,z[T],t,R)}return P.call(this,T,S,R)}})},G=function(O){return{get:function(){return this._[O]}}},s=function(O,P){var Q=F.createEvent("Event");Q.initEvent(O,true,true);K.value=P;Object.defineProperties(Q,M);P.target.dispatchEvent(Q)},E=function(P){var O=P.pointerType;return(O===P[w]||O==="mouse")?"mouse":"touch"},J=function(O){return this[O]},D=function(O){return B[O]},K={value:null},N=F.createEvent("Event"),M={_:K,touches:{configurable:true,get:function(){K.value=Object.keys(B).map(D);return Object.defineProperty(this,"touches",K).touches}},relatedTarget:G("relatedTarget"),currentTarget:G("currentTarget"),target:G("target"),altKey:G("altKey"),metaKey:G("metaKey"),ctrlKey:G("ctrlKey"),shiftKey:G("shiftKey"),preventDefault:H("preventDefault"),stopPropagation:H("stopPropagation"),stopImmediatePropagation:H("stopImmediatePropagation")},B=Object.create(null),z=Object.create(null),t={handleEvent:function(O){if(E(O)==="touch"){t[x(O.type)](O)}},pointerdown:function(O){B[O.pointerId]=new C(O);s("touchstart",O)},pointermove:function(O){B[O.pointerId]._=O;s("touchmove",O)},pointerup:function(O){delete B[O.pointerId];s("touchend",O)}};function C(O){this._=O}Object.defineProperties(C.prototype,{identifier:G("pointerId"),target:G("target"),screenX:G("screenX"),screenY:G("screenY"),clientX:G("clientX"),clientY:G("clientY"),pageX:G("pageX"),pageY:G("pageY")});z.touchstart=v("PointerDown");z.touchmove=v("PointerMove");z.touchend=v("PointerUp");I(F,"addEventListener");I(F,"removeEventListener");I(Element.prototype,"addEventListener");I(Element.prototype,"removeEventListener");F.ontouchstart=F.ontouchmove=F.ontouchend=null}(navigator,document));h.on("wp:hs-icon",function(v){var t=document.body.appendChild(document.createElement("wp")),s=document.createElement("canvas"),u=(Math.min(p.width,p.height)/2)>>0;s.style.cssText="width:"+u+"px;height:"+u+"px;";t.appendChild(q(s,u*p.ratio,"#E6A72A","#286868"));t.appendChild(document.createElement("h1")).textContent="equolo.org";t.onclick=t.remove;if(IE9Mobile){t.style.cssText=[";top:",document.documentElement.scrollTop,"px",";width:",p.width,"px",";height:",p.height,"px"].join("")}v.preventDefault()});h.on("wp:ffos-install",function(t){try{navigator.mozApps.install("http://equolo.org/equolo.webapp").onerror=function(){alert(":-(\n"+this.error.name)}}catch(s){}t.preventDefault()});function e(){if(location.href.indexOf("equolo")<0){return}h._gaq=[["_setAccount","UA-924021-6"],["_trackPageview"]];var u=document.createElement("script"),t=document.getElementsByTagName("script")[0];u.type="text/javascript";u.async=true;u.src="http://www.google-analytics.com/ga.js";t.parentNode.insertBefore(u,t)}function l(){var v="https://www.paypalobjects.com/",u=document.createDocumentFragment(),t=u.appendChild(document.createElement("input")),s=u.appendChild(document.createElement("img"));t.type="image";t.src=v+"en_US/i/btn/btn_donate_SM.gif";t.border=s.border=0;t.name="submit";t.alt="PayPal - The safer, easier way to pay online!";s.alt="";s.src=v+"de_DE/i/scr/pixel.gif";s.width=s.height=1;$("form#paypal")[0].appendChild(u)}try{if(IE9Mobile||f("?",36).length<36){throw 0}}catch(a){h.compat=true;f=function(s){return base64Icon[s]};(function(t,s){s=t.documentElement;s.insertBefore(t.createElement("script"),s.lastChild).src="/cgi/base64_icon.php"}(document))}(function(ap,y){var D=12,K=15,aw=18,O=3,aC="ontouchend" in y,Z=new k(256),ag,t,W,az,aq,z,C,R,x,I,Q,ar,H,aE,at,am=true;ap.onDOM(function(){if(IE9Mobile){j("../fonts/fontawesome-webfont.svg")}al();$("noscript").forEach(function(aF){aF.remove()});ak(false,true)});ap.onLoad(aB);function al(){while(y.body.firstChild.id!="map"){y.body.removeChild(y.body.firstChild)}}function aB(){var aF,aJ,aH,aI;if(!ap.L){return setTimeout(aB,15)}Q={map:$("section#map")[0],about:$("section#about")[0],contact:$("section#contact")[0],pinIt:$("section#pin-it")[0]};Q.nav=$("nav",Q.map)[0];Q.placeDetails=$("div.details",Q.map)[0];Q.location=$("div.location",Q.map)[0];Q.details=[Q.about,Q.contact,Q.pinIt];aJ=$("section#map img")[0];if(!ap.compat){aG();aH=y.createElement("canvas");aH.style.cssText="width:"+aJ.width+"px;height:"+aJ.height+"px;";aJ.replace(q(aH,aJ.width*p.ratio,"#E6A72A").on("click",X));aH=y.createElement("canvas");aH.style.cssText="width:"+20+"px;height:"+20+"px;";$("li.intro h3 > i")[0].replace(q(aH,20*p.ratio,"#064646"))}else{aJ.on("click",X)}E();if(p.height<=500){Q.map.appendChild($(ap.compat?"img":"canvas",Q.map)[0]).classList.add("logo")}setTimeout(ax,Math.random()*1000);function aG(){for(var aO,aN,aQ=y.createElement("canvas"),aP=y.createDocumentFragment(),aS=[30,57,60,72,114,128,144,173,196,214,256],aR=0;aR<aS.length;aR++){aO=y.createElement("link");aN=y.createElement("link");aO.rel="shortcut icon";aN.rel="apple-touch-icon";aO.type=aN.type="image/png";aO.href=aN.href=q(aQ,aS[aR],"#E6A72A","#286868").toDataURL();aO.setAttribute("sizes",aO.sizes=aS[aR]+"x"+aS[aR]);aN.setAttribute("sizes",aO.sizes);aP.appendChild(aO);aP.appendChild(aN)}(y.head||y.querySelector("head")).appendChild(aP)}e();l();function aM(aN,aO){if(aO.parentNode){aO.parentNode.classList.remove("selected")}aO.parentNode=aN;aO.section=aN.firstChild.href.split("#")[1];aN.classList.add("selected")}W=$("select[name=category]")[0];W.on("change",function(){S(false);af()});az=[].map.call(W.options,function(aN){this[aN.value]=aN.textContent;return aN.value},aq={});aF=$("nav a").on("click",function aL(aR){var aN=this.parentNode,aO;if(aL.sk){aL.sk.cancel()}if(aN.classList.contains("selected")){aR.preventDefault();aL.parentNode=null;aN.classList.remove("selected");aO=Q.nav.offsetHeight;(aL.sk=new b({context:Q.map,onstart:function(){aL.kinetic=true;if(ad.sk){ad.sk.cancel()}ak(false);y.body.scrollTop=y.documentElement.scrollTop=0;aL.ms.display="block";if(IE9Mobile){Q.nav.style.top=null}aL.np.appendChild(Q.nav)},onmove:function(aS,aX,aU,aT,aW,aV){aL.ms.minHeight=aX+"px"},onend:function(aS,aX,aU,aT,aW,aV){aL.ms.minHeight=null;I.style.zIndex=W.style.zIndex=9999;Q.placeDetails.style.height=Q.placeDetails.style._height;T();aL.kinetic=false;aL.doNotScroll=true}})).init(0,aO,0,p.height-aO,false,true)}else{if(aL.parentNode){if(IE9Mobile){aM(aN,aL)}else{aR.preventDefault();aM(aN,aL);setTimeout(ad,300,aN)}}else{aR.preventDefault();aL.sk=new b({context:Q.map,onstart:function(){I.style.zIndex=W.style.zIndex=0;Q.placeDetails.style._height=Q.placeDetails.style.height;Q.placeDetails.style.height=0;aL.doNotScroll=false;aL.kinetic=true;ak(true)},onmove:function(aS,aX,aU,aT,aW,aV){aL.ms.minHeight=aX+"px"},onend:function(){Q.about.prepend(Q.nav);aL.ms.display="none";setTimeout(aM,100,aL.lt,aL);setTimeout(ad,400,aL.lt);aL.kinetic=false}});if(!aL.np){aL.np=Q.nav.parentNode;aL.ms=Q.map.style}aL.lt=aN;aO=Q.map.offsetHeight;aL.sk.init(0,aO,0,($("footer",Q.map)[0].offsetHeight-aO),false,true);if(!aL.scroll){aL.scroll=true;[y,y.documentElement,y.body].forEach(function(aS){aS.on("scroll",this).on("mousewheel",this);this.i=0},function aP(aX){if(ad.kinetic||aL.kinetic||aL.doNotScroll){return}var aW=at(),aU,aS,aT,aV;if(at.el){aU="scrollTop" in this?this:at.el;if(aU==at.el){aS=aV=0;aT=aW+p.height/3;while(aS<Q.details.length){aU=Q.details[aS++];aV+=aU.offsetHeight+8;if(aT<aV){--aS;break}}if(aS!=aP.i){aP.i=aS;aM(aF[aS].parentNode,aL)}if(IE9Mobile){Q.nav.style.top=y.documentElement.scrollTop+"px"}}else{this.off("scroll",aP).off("mousewheel",aP)}}})}}}try{this.blur()}catch(aQ){}});aF.some(function(aN){if(aN.href.split("#")[1]==this){setTimeout(aN.trigger.bind(aN),2000,"click");return true}},location.href.split("#")[1]);Q.tiles=$("#tiles")[0];ag=P(Q.tiles);C={};ac(navigator.country&&navigator.country.iso2!="US"?navigator.country.geo:[49.6,6.116667],5);I=$("button#find-me")[0];if("geolocation" in navigator){I.on("click",function(aO){I.firstChild.classList.remove("fa-compass");I.firstChild.classList.add("fa-spin","fa-refresh");I.disabled=true;I.moved=false;try{if(aI){navigator.geolocation.clearWatch(aI)}aI=navigator.geolocation.watchPosition(function(aP){if(!I.moved){I.moved=true;ac(aP.coords,15)}B(aP.coords);av()},av,{maximumAge:300000})}catch(aN){I.remove()}I.blur()})}else{I.remove()}ah();if(r.length){U(r.getItem("equolo.activities"));aH=r.getItem("equolo.map");if(aH){am=false;ac.apply(null,JSON.parse(aH))}}if(am){$("li.intro",Q.map)[0].style.cssText="display:block;margin-left:"+(aA())+"px;"}ag.on("zoomend",function aK(aN){var aO=ag.getZoom(),aP=aK.current||0;aK.current=aO;if(aP===0||((D<=aO&&aP<D)||(aO<D&&D<=aP))){S(true);af()}});ag.on("movestart",function(){I.moved=true;am=false});ag.on("moveend",aH=d(function(){var aP=ag.getZoom(),aN=ag.getCenter(),aO;r.setItem("equolo.map",JSON.stringify([aN,aP]))}));ag.on("movestart",aH.clear);E();ap.on("pagehide",v).on("unload",v);if(IE9Mobile){ap.trigger("leaflet:map",ag)}}function v(){if(r.length){try{r.setItem("equolo.activities",ar||"")}catch(aF){r.setItem("equolo.activities","")}}}function P(aH,aG){var aF={attribution:'Map Tiles <a href="http://open.mapquest.com/">&copy; Open MapQuest</a>',maxZoom:aw,minZoom:O},aI;aI=aG?L.map(aH,aG):L.map(aH);L.tileLayer("http://otile1.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",aF).addTo(aI);return aI}function av(){I.firstChild.classList.remove("fa-spin","fa-download");I.firstChild.classList.add("fa-compass");I.disabled=false}function aa(){if(!aE){aE=H.reduce(aD,[])}return aE}function ab(aG,aF){var aH=Z.pointDistance(Z.coordsToPoint(aG,aw),Z.coordsToPoint(aF,aw));if(!("distance" in aG)){aG.distance=aH}if(!("distance" in aF)){aF.distance=aH}if(aG.distance<aF.distance){if(aH<aG.distance){aG.distance=aH;return 1}return 0}else{if(aF.distance<aG.distance){return -1}else{return 0}}}function ae(aF){aF.name=this.name;aF.description=this.description;aF.aid=this.id;return aF}function aD(aF,aG){return aF.concat(aG.place.map(ae,aG))}function M(aM){for(var aG,aL,aJ,aK=D<=ag.getZoom(),aH=aK||{stroke:true,color:"#286868",weight:2,opacity:1,fill:true,fillColor:"#E6A72A",fillOpacity:1,radius:8,clickable:false,pointerEvents:false},aF=aM.place,aI=0;aI<aF.length;aI++){aL=aF[aI];aJ=aL.icon;if(aK){aG=A(aL);aG.activity=aM;aG.placeIndex=aI}else{aG=L.circleMarker(N(aL),aH)}C[aJ].addLayer(aG)}}function A(aG){var aF=L.marker(N(aG),{icon:L.icon({iconUrl:f(aG.icon,36),iconSize:[36,36],iconAnchor:[18,36]})});aF.on("click",G);aF.id=aG.id;return aF}function B(aF){var aG=N(aF);if(!x){x=L.circleMarker(aG,{clickable:false,pointerEvents:false});x.addTo(ag)}x.setLatLng(aG)}function V(){for(var aG=W.value,aF=1;aF<az.length;aF++){if(aG=="all"||aG==az[aF]){C[az[aF]].addTo(ag)}}}function s(aG){for(var aF=1;aF<az.length;aF++){if(C.hasOwnProperty(az[aF])){ag.removeLayer(C[az[aF]])}if(aG){C[az[aF]]=L.layerGroup()}}}function ai(aF){if(!this.hasOwnProperty(aF.icon)){this[aF.icon]=0}this[aF.icon]++}function af(){if(am){return}if(af.moveend){ag.off("moveend",af.moveend);ag.off("movestart",af.moveend.clear)}$("li",Q.location).forEach(function(aF){if(aF.classList.contains("place")){aF.remove()}else{aF.style.display="none"}});af.map={};if(ag.getZoom()<D){if(af.el){af.el.style.width=null}af.el=$("li.stats",Q.map)[0];af.el.style.display="block";ag.on("moveend",af.moveend=d(function(){var aI,aH,aG={},aF=[];aa().filter(an,ag.getBounds()).forEach(ai,aG);for(aH in aG){if(aG.hasOwnProperty(aH)){aF.push('<i class="fa fa-'+aH+'"></i> '+aq[aH]+" "+aG[aH])}}aI=af.el.childNodes[1];aI.innerHTML=aF.length?aF.join(", "):"we have nothing nothing in this area :-(<br/>do you know any activity that could be part of equolo?";ao(aI)}));ag.on("movestart",af.moveend.clear)}else{af.el=$("ul",Q.map)[0];ag.on("moveend",af.moveend=d(function(){var aJ=aa().filter(an,ag.getBounds()),aI=aJ.length,aF=aI&&y.createDocumentFragment(),aG=0,aH;if(!aI){return}aH=[];aJ.forEach(function(aL){aH.push(aL.id);if(af.map[aL.id]){return}var aK=this.appendChild(y.createElement("li")),aM=aK.appendChild(y.createElement("h3")),aN=aK.appendChild(y.createElement("p"));aM.classList.add("ellipsis");aK.data("coords",aL.latitude+"/"+aL.longitude);aK.classList.add("place","t-all");aK.id="place-"+aL.id;af.map[aL.id]=aL;aM.appendChild(y.createElement("i")).classList.add("fa","fa-"+aL.icon);aM.appendChild(y.createTextNode(" "+aL.name));aM.appendChild(y.createElement("span")).textContent=aL.postcode;aN.appendChild(y.createTextNode(aL.description));if(!aC){aK.on("click",au)}},aF);af.el.appendChild(aF);aI=$("li.place",af.el).filter(function(aK){var aL=aK.id.slice(6);if(aH.indexOf(aL)<0){delete af.map[aL];aK.remove();return false}return true}).length;af.el.style.width=(aI*276+aA()*2+1)+"px";ao(af.el);if(aC&&!af.hscroll){af.hscroll=new n(af.el,{onstart:function(){this.x=af.el.scrollLeft;this.el=au.last||$("li.place",af.el)[0];au.reset()},onchange:function(aK){this.x=aK.x-this.x},onend:function(aK){au.call((this.x<0?this.el.nextElementSibling:this.el.previousElementSibling)||this.el,{})},onclick:function(aL){var aK=aL.target;while(aK&&aK.nodeName!=="LI"){aK=aK.parentNode}if(aK&&aK.nodeName==="LI"){au.call(aK,aK)}}})}}));ag.on("movestart",af.movestart=function(){af.moveend.clear();au.cancel()});af.moveend()}}function G(){au.call($("li#place-"+this.id)[0],{detail:false})}function w(aF){return this[aF].length}function u(aF){return this[aF]}function J(aH,aG,aF){var aI=aF.filter(w,aG);if(aI.length){(aH.appendChild(y.createElement("li"))).textContent=aI.map(u,aG).join(", ")}}function ay(aH,aG,aJ,aI){var aF;if(aG[aJ]){aF=aH.lastChild.appendChild(y.createElement("a"));aF.classList.add("social");switch(aJ){case"twitter":aF.href=/^https?:\/\/(?:www.)?twitter\./.test(aG[aJ])?aG[aJ]:"https://twitter.com/"+aG[aJ].replace(/^@/,"");break;case"facebook":aF.href=/^https?:\/\/(?:www.)?facebook\./.test(aG[aJ])?aG[aJ]:"https://www.facebook.com/"+aG[aJ];break;case"gplus":aF.href=/^https?:\/\/plus\.google\./.test(aG[aJ])?aG[aJ]:"https://plus.google.com/"+aG[aJ];break}aF.appendChild(y.createElement("i")).classList.add("fa","fa-"+aI)}}function Y(aH,aG,aJ,aI){var aF;if(aG[aJ]){aF=aH.appendChild(y.createElement("li"));aF.classList.add("button");aF.appendChild(y.createElement("i")).classList.add("fa","fa-"+aI);aF=aF.appendChild(y.createElement("a"));aF.classList.add("ellipsis");switch(aJ){case"phone":aF.href="tel:"+aG[aJ].replace(/[^0-9+]/g,"");break;case"email":aF.href="mailto:"+aG[aJ];break;default:aF.href=/^https?:\/\//i.test(aG[aJ])?aG[aJ]:"http://"+aG[aJ];break}aF.textContent=aG[aJ]}}function F(aG){var aI,aH,aF,aJ;F.showing=true;if(!F.footer){F.footer=Q.nav.parentNode.offsetHeight}if(!F.el){F.el=Q.placeDetails}aF=Q.tiles.offsetHeight;aI=F.el;aI.style.cssText="opacity:1;top:"+($("header",Q.map)[0].offsetHeight)+"px;height:"+(aF<276?(aF+F.footer):aF)+"px;";if(aF<276){Q.location.style.bottom=Q.nav.parentNode.style.height=0}if(!t){F.h3=$("h3",aI)[0];F.info=$("ul",aI)[0];F.address=$("ul.address",aI)[0];F.contact=$("ul.contact",aI)[0];t=P($("div.minimap",aI)[0],{zoomControl:false,dragging:false,touchZoom:false,doubleClickZoom:false,scrollWheelZoom:false,boxZoom:false,keyboard:false,attributionControl:false,tap:false,fadeAnimation:false})}A(aG).addTo(t);aJ=Z.coordsToPoint(aG,15);aJ.y-=18;t.setView(N(Z.pointToCoords(aJ,15)),15);F.h3.textContent=F.address.textContent=F.contact.textContent="";F.h3.appendChild(y.createElement("i")).className="fa fa-"+aG.icon;F.h3.appendChild(y.createTextNode(" "+aG.name));aH=F.address;J(aH,aG,["address","extra","postcode","city"]);Y(aH,aG,"phone","phone");ay(aH,aG,"twitter","twitter");Y(aH,aG,"email","envelope");ay(aH,aG,"facebook","facebook-square");Y(aH,aG,"website","globe");ay(aH,aG,"gplus","google-plus");ao(aI)}function au(aH){try{var aJ=this.data("coords").split("/"),aM=au.last==this,aG=this.parentNode.parentNode,aK=this.id.slice(6),aN,aL,aF,aO}catch(aI){return}this.clicked=true;if(aM){if(F.showing){F.showing=false;F.el.style.cssText="";Q.location.style.bottom=Q.nav.parentNode.style.height=null}else{F(af.map[aK])}}else{aO=aH.detail===false?Object:function(aP,aV,aR,aQ,aT,aS){var aU=au.cancel;au.cancel=Object;ac({latitude:parseFloat(aJ[0]),longitude:parseFloat(aJ[1])},ag.getZoom());au.cancel=aU;if(F.showing){F(af.map[aK])}};au.cancel();(au.last=this).classList.add("selected");aL=0;aN=this.previousElementSibling;while(aN.classList.contains("place")){aN=aN.previousElementSibling;aL+=276}aF=n.compat?-parseFloat(aG.style.marginLeft||0):aG.scrollLeft;(au.sk=new b({onmove:function(aP,aU,aR,aQ,aT,aS){if(n.compat){aG.style.marginLeft=-aP+"px"}else{aG.scrollLeft=aP}},onend:aO})).init(aF,0,aL-aF,0,true,false)||aO()}}au.reset=function(){if(au.last){au.last.classList.remove("selected");au.last=null}};au.cancel=function(){if(au.sk){au.sk.cancel()}au.reset()};function S(aF){s(aF);if(aF){H.forEach(M)}V()}function U(aF){if(aF){H=JSON.parse(aF).map(aj);ar=aF;aE=null;S(true);af()}}function ah(){var aF=ap.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");aF.open("GET","/cgi/location.php",true);aF.onreadystatechange=function(){if(aF.readyState==4){if(199<aF.status&&aF.status<400){U(aF.responseText)}else{setTimeout(ah,5000)}}};aF.send(null)}at=function(aG){var aF=y.body.scrollTop?y.body:(y.documentElement.scrollTop?y.documentElement:null);if(aF){at=function(aH){return aH==null?aF.scrollTop:(aF.scrollTop=aH)};at.el=aF;return at(aG)}else{if(aG==null){return 0}else{y.body.scrollTop=y.documentElement.scrollTop=aG}}};function ad(aI){var aH=aI.firstChild.href.split("#")[1],aG=Q.details,aM=true,aK=0,aF=0,aJ=aG.length,aL=at();while(aM){aM=aG[aF].id!=aH;if(aM){aK+=aG[aF].offsetHeight+8}aF++}if(IEMobile){at(aK)}else{if(ad.sk){ad.sk.cancel()}(ad.sk=new b({onstart:function(){ad.kinetic=true},onmove:function(aN,aS,aP,aO,aR,aQ){at(aS)},onend:function(aN,aS,aP,aO,aR,aQ){at(aQ);ad.kinetic=false}})).init(0,aL,0,aK-aL,false,true)}}function ac(aG,aF){ag.setView(N(aG),aF||Math.max(15,ag.getZoom()))}function ak(aG,aF){var aH=aG?"remove":"add";if(aF){y.documentElement.scrollTop=0;y.body.scrollTop=0}y.documentElement.classList[aH]("no-scroll");y.body.classList[aH]("no-scroll")}function aA(){return(p.width-276)>>1}function E(){var aF=aA();g({section:{"min-height":p.height+"px"},"section#map > div.location li.place:nth-child(3)":{"margin-left":aF+"px"},"section#map > div.location li.place:last-child":{"margin-right":aF+"px"},"section#map > div.location > ul > li":{"min-height":(150-m)+"px"}});T()}function T(){if(ag){ag.invalidateSize()}if(t){t.invalidateSize()}}function an(aF){var aG=W.value;return aF.icon==aG||aG=="all"&&this.contains(new L.LatLng(aF.latitude,aF.longitude))}function N(aF){return[aF.latitude||aF.lat||aF[0]||0,aF.longitude||aF.lng||aF[1]||0]}function ao(aF){if(IE9Mobile){j.fix(aF)}}function X(){p.full(!p.fullScreen);setTimeout(T,300)}ap.on("go:fullscreen",function(){p.full(true)});function aj(aF){aF.place=o.unpack(aF.place);return aF}function ax(){$("span.email").forEach(function(aH){var aF=y.createElement("a"),aG=aH.textContent.split("").reverse().join("");aF.href="mailto:"+aG;aF.textContent=aG;aH.replace(aF)})}p.on("change",E)}(h,document))}(this));