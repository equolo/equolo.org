/*! )Â°(, equolo - https://github.com/equolo/equolo.org */
/*@cc_on
(function(f){
window.setTimeout=f(window.setTimeout);
window.setInterval=f(window.setInterval);
})(function(f){return function(c,t,a){a=[].slice.call(arguments,2);return f(function(){c.apply(this,a)},t)}});
@*/
var
IEMobile=/*@cc_on/\bIEMobile\b/.test(navigator.userAgent)||@*/false,
IE9Mobile=/*@cc_on(IEMobile&&@_jscript_version<10)||@*/false,
IE10Mobile=/*@cc_on(IEMobile&&@_jscript_version/10>=1)||@*/false
;
IE9Mobile&&document.write('<link rel="stylesheet" href="css/IE9Mobile.css"/><script src="js/IE9Mobile.js"></script>');(function(h){
/*! display v0.1.8 - MIT license */
;var j=function(F){var u=F.Math,y=u.abs,H=u.max,E=u.min,N=F.Infinity,r=F.screen||N,q=F.matchMedia,z="addEventListener",A=F.document,M=A.documentElement,v=/\bMobile\b/.test(navigator.userAgent),s=M.requestFullscreen||M.mozRequestFullScreen||M.webkitRequestFullScreen,J=A.exitFullscreen||A.cancelFullscreen||A.mozCancelFullScreen||A.webkitExitFullscreen,B={change:[]},G={width:0,height:0,ratio:0,full:s&&J?function(O){var P=A.fullscreenElement||A.mozFullScreenElement||A.webkitFullscreenElement;if(O||O==null){G.fullScreen=true;if(!P){s.call(M)}}else{if(P){G.fullScreen=false;J.call(A)}}}:Object,on:function(O,P){B[O].push(P)}},I=B.change.forEach||function(Q,O){for(var P=0;P<this.length;P++){Q.call(O,this[P],P,this)}},w;function x(O){O.call(G,G.width,G.height)}function D(O){if(w){clearTimeout(w);w=0}return(!C()&&innerHeight<300)||(w=setTimeout(t,300,O))}function C(){return"orientation" in F?y(F.orientation||0)===90:!!q&&q("(orientation:landscape)").matches}function t(T){w=0;var P=F.devicePixelRatio||1,U=C(),Q=r.width,S=r.height,R=E(F.innerWidth||N,M.clientWidth||N,P<1?N:((v&&U?H(Q,S):Q)||N)),O=E(F.innerHeight||N,M.clientHeight||N,P<1?N:((v&&U?E(Q,S):S)||N));if(R!==G.width||O!==G.height){G.width=R;G.height=O;I.call(B.change,x)}}if(z in F){F[z]("orientationchange",D,true);F[z]("resize",D,true);try{r[z]("orientationchange",D,true)}catch(K){}}else{F.attachEvent("onresize",t)}t.call(F);G.ratio=F.devicePixelRatio||r.width/G.width||(r.deviceXDPI||1)/(r.logicalXDPI||1);return G}(h);
/*! (C) Andrea Giammarchi Mit Style License */
;var o=function(B){function E(s,r){this.node=s,this.css=r}function D(s,r,u){return r+"-"+u.toLowerCase()}function A(K,I,N){var H=[],J=typeof I=="number"?"px":"",M=K.replace(q,D),r=N.length;while(r--){H.push("-",N[r],"-",M,":",I,J,";")}return H.push(M,":",I,J,";"),H.join("")}function x(s,r){return s.length?s+"-"+r:r}function C(N,J,M,K){var O,I,H;for(O in M){if(w.call(M,O)){if(typeof M[O]=="object"){if(y(M[O])){I=M[O];for(H=0;H<I.length;H++){N.push(A(x(J,O),I[H],K))}}else{C(N,x(J,O),M[O],K)}}else{N.push(A(x(J,O),M[O],K))}}}return N.join("")}function z(N,Q){var s=[],K,I,P,O,M,J,H;for(O in N){if(w.call(N,O)){K=O.charAt(0)==="@",I=K?O.slice(1):O,M=G.concat(N[O]);for(J=0;J<M.length;J++){P=M[J];if(K){H=Q.length;while(H--){s.push("@-",Q[H],"-",I,"{",z(P,[Q[H]]),"}")}s.push(O,"{",z(P,Q),"}")}else{s.push(O,"{",C([],"",P,Q),"}")}}}}return s.join("")}var F=B.toString,w=B.hasOwnProperty,q=/([a-z])([A-Z])/g,y=Array.isArray||function(r){return F.call(r)==="[object Array]"},G=[],v;return E.prototype={remove:function(){var s=this.node,r=s.parentNode;r&&r.removeChild(s)},valueOf:function(){return this.css}},typeof document=="undefined"?(v=function(s,r){return z(s,r||G)},v.restyle=v):v=function(M,I,N){var K=N||document,H=z(M,I||v.prefixes),J=K.head||K.getElementsByTagName("head")[0]||K.documentElement,u=J.insertBefore(K.createElement("style"),J.lastChild);return u.type="text/css","styleSheet" in u?u.styleSheet.cssText=H:u.appendChild(K.createTextNode(H)),new E(u,H)},v.prefixes=["o","ms","moz","webkit"],v}({});(function(s,q,r){"bind" in q||(q.bind=function(w){var v=this,u=s.slice,t=u.call(arguments,1);return function(){return v.apply(w,t.concat(u.call(arguments)))}});"trim" in r||(r.trim=function(){return this.replace(/^[^\S]+|[^\S]+$/g,"")})}(Array.prototype,Function.prototype,String.prototype));var n,b=n=function(z,s){function H(Q){for(var K=Q.length,R=x(K?Q[0]:{}),M=R.length,S=z(K*M),P=0,O=0,N,J;P<K;++P){for(J=Q[P],N=0;N<M;S[O++]=J[R[N++]]){}}return u.call([M],R,S)}function F(O){for(var P=O.length,K=O[0],J=z(((P-K-1)/K)||0),N=1+K,M=0,R,Q;N<P;){for(J[M++]=(Q={}),R=0;R<K;Q[O[++R]]=O[N++]){}}return J}function t(K){return function J(R){for(var T=this,S=R,P=0,Q=T.length,N,M,O;P<Q;++P){if(w(O=S[M=T[P]])){N=P+1;S[M]=N<Q?I.call(O,K,T.slice(N)):K(O)}S=S[M]}return R}}function v(K){return function J(S,Q){for(var N=w(S),M=u.call(r,S),R=u.call(r,Q),O=0,P=R.length;O<P;++O){M=I.call(M,K,R[O].split("."))}return N?M:M[0]}}function D(K,J){return J?y(K,J):H(K)}function q(J,K){return K?C(J,K):F(J)}function B(N,J,M,K){return G(D(N,K),J,M)}function A(K,J,M){return q(E(K,J),M)}var r=[],u=r.concat,x=Object.keys||function(M){var K=[],J;for(J in M){M.hasOwnProperty(J)&&K.push(J)}return K},w=z.isArray||(function(K,M){M=K.call(r);return function J(N){return K.call(N)==M}}({}.toString)),I=r.map||function(O,N){for(var K=this,M=K.length,J=z(M);M--;J[M]=O.call(N,K[M],M,K)){}return J},y=v(t(H)),C=v(t(F)),G=s.stringify,E=s.parse;return{pack:D,parse:A,stringify:B,unpack:q}}(Array,JSON);
/*! (C) WebReflection Mit Style License */
(function(D){function J(r){return typeof r=="string"?D.document.createTextNode(r):r}function y(M){if(M.length===1){return J(M[0])}for(var v=D.document.createDocumentFragment(),t=B.call(M),u=0;u<M.length;u++){v.appendChild(J(t[u]))}return v}for(var q,A,K,x=/^\s+|\s+$/g,I=/\s+/,G=" ",C=function(r,s){return this.contains(r)?s||this.remove(r):s&&this.add(r),!!s},z=(D.Element||D.Node||D.HTMLElement).prototype,F=["prepend",function(){var s=this.firstChild,u=y(arguments);s?this.insertBefore(u,s):this.appendChild(u)},"append",function(){this.appendChild(y(arguments))},"before",function(){var r=this.parentNode;r&&r.insertBefore(y(arguments),this)},"after",function(){var u=this.parentNode,v=this.nextSibling,s=y(arguments);u&&(v?u.insertBefore(s,v):u.appendChild(s))},"replace",function(){var r=this.parentNode;r&&r.replaceChild(y(arguments),this)},"remove",function(){var r=this.parentNode;r&&r.removeChild(this)}],B=F.slice,w=F.length;w;w-=2){q=F[w-2],q in z||(z[q]=F[w-1])}"classList" in document.documentElement?(K=document.createElement("div").classList,K.add("a","b"),"a b"!=K&&(z=K.constructor.prototype,"add" in z||(z=D.DOMTokenList.prototype),A=function(r){return function(){var s=0;while(s<arguments.length){r.call(this,arguments[s++])}}},z.add=A(z.add),z.remove=A(z.remove),z.toggle=C)):(A=function(r){if(!r){throw"SyntaxError"}if(I.test(r)){throw"InvalidCharacterError"}return r},K=function(s){var r=s.className.replace(x,"");r.length&&F.push.apply(this,r.split(I)),this._=s},K.prototype={length:0,add:function(){for(var r=0,s;r<arguments.length;r++){s=arguments[r],this.contains(s)||F.push.call(this,q)}this._.className=""+this},contains:function(r){return function(s){return w=r.call(this,q=A(s)),-1<w}}([].indexOf||function(r){w=this.length;while(w--&&this[w]!==r){}return w}),item:function(r){return this[r]||null},remove:function(){for(var r=0,s;r<arguments.length;r++){s=arguments[r],this.contains(s)&&F.splice.call(this,w,1)}this._.className=""+this},toggle:C,toString:function H(){return F.join.call(this,G)}},(Object.defineProperty||function(s,r,u){s.__defineGetter__(r,u.get)})(z,"classList",{get:function(){return new K(this)},set:function(){}}));try{new D.CustomEvent("?")}catch(E){D.CustomEvent=function(v,s){function M(N,r){var t=document.createEvent(v);if(typeof N!="string"){throw new Error("An event name must be provided")}return v=="Event"&&(t.initCustomEvent=u),r==null&&(r=s),t.initCustomEvent(N,r.bubbles,r.cancelable,r.detail),t}function u(P,N,Q,O){this.initEvent(P,N,Q),this.detail=O}return M}(D.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}})(h);
/*! (C) Andrea Giammarchi Mit Style License */
(function(ar){function z(){return{w:{},l:{},m:[],b:[]}}function Z(s,r,u){typeof r=="function"?r.apply(s,u):r.handleEvent.apply(r,u)}function q(s,r,u){u!==void 0&&av(this,"detail",u),av(this,"type",r),av(this,"target",s),av(this,"timeStamp",aj())}if(ar.eddy){return}ar.eddy=!0;var ad=Array.prototype,ai=ar.prototype,af=q.prototype,an=ai.hasOwnProperty,ae=ad.push,ah=ad.slice,ac=ad.unshift,aw="toLocaleString",aq={toLocaleString:1}.propertyIsEnumerable(aw)?"_@eddy"+Math.random():aw,ak=aq===aw,au=(ar.create||ar)(null),ao=[],ag=ak?function(s,r,u){s[r]=u.value}:ar.defineProperty,at=function(s){var r=this;return function(){return r.apply(s,arguments)}},ab=ad.indexOf||function(s){var r=this.length;while(r--&&this[r]!==s){}return r},aj=Date.now||function(){return(new Date).getTime()},ap=function(s){var r=z();return au.value=r,ag(s,aq,au),au.value=null,r},Y={boundTo:function al(y,w){var B=an.call(this,aq)?this[aq]:ap(this),x=B.m,A=B.b,v=typeof y=="string"?typeof w===void 0||an.call(this,y)?this[y]:this[y]=w:y,s=ab.call(x,v);return s<0?A[ae.call(x,v)-1]=at.call(v,this):A[s]},emit:function K(C){var y=an.call(this,aq),D=y&&this[aq].l,B=y&&an.call(D,C),A=B&&D[C].slice(0),x=B&&ah.call(arguments,1),w=0,v=B?A.length:w;while(w<v){Z(this,A[w++],x)}return B},listeners:function X(r){return an.call(this,aq)&&an.call(this[aq].l,r)&&this[aq].l[r].slice()||[]},off:function G(x,u){var A=an.call(this,aq),w=A&&this[aq].l,v=A&&an.call(w,x)&&w[x],y;return v&&(y=ab.call(v,u),-1<y&&(v.splice(y,1),v.length||delete w[x])),this},on:function J(w,u,y){var v=an.call(this,aq),x=(v?this[aq]:ap(this)).l,s=v&&an.call(x,w)?x[w]:x[w]=[];return ab.call(s,u)<0&&(y?ac:ae).call(s,u),this},once:function ax(w,u,x){var v=function(r){s.off(w,v,x),Z(s,u,arguments)},s=this;return s.on(w,v,x)},trigger:function U(A,M){var x=an.call(this,aq),N=x&&this[aq].l,w=typeof A=="string",H=w?A:A.type,D=x&&an.call(N,H),y=D&&N[H].slice(0),C=w?new q(this,H,M):A,r=0,B=D?y.length:r,E=!(C instanceof q);E&&(C._active=!0,C.stopImmediatePropagation=af.stopImmediatePropagation),C.currentTarget=this,ao[0]=C;while(C._active&&r<B){Z(this,y[r++],ao)}return E&&(delete C._active,delete C.stopImmediatePropagation),!C.defaultPrevented},when:function(x,u){var y=an.call(this,aq),w=(y?this[aq]:ap(this)).w,v=y&&an.call(w,x);return v?(Z(this,u,w[x]),this):this.once(x,function(){an.call(w,x)||(w[x]=arguments)},!0).once(x,u)}},av=function(s,r,u){an.call(s,r)||(s[r]=u)},aa=!1,R;af.defaultPrevented=!1,af._active=af.cancelable=!0,af.preventDefault=function(){this.defaultPrevented=!0},af.stopImmediatePropagation=function(){this._active=!1};for(R in Y){an.call(Y,R)&&ag(ai,R,{enumerable:!1,configurable:!0,writable:!0,value:Y[R]})}(function(t){function u(r){function v(w){w[r].apply(w,this)}return function(){return t.call(this,v,arguments),this}}for(var s in Y){Y.hasOwnProperty(s)&&!/^listeners|boundTo$/.test(s)&&ag(ad,s,{enumerable:!1,configurable:!0,writable:!0,value:u(s)})}})(ad.forEach);var I={boundTo:function(s){try{s.call(document.createElement("div"),function(){})}catch(r){ap=function(t){return t[aq]=z(),t[aq]}}return s}(Y.boundTo),data:function F(v,s){var w="dataset" in this,u;return arguments.length<2?w?v in this.dataset?this.dataset[v]:u:(s=this.getAttribute("data-"+v.replace(F.gre||(F.gre=/-[a-z]/g),F.gplace||(F.gplace=function(x,r){return r.toUpperCase()}))))==null?u:s:w?s==null?delete this.dataset[v]:(this.dataset[v]=s,s):(F.sre||(F.sre=/([a-z])([A-Z])/g,F.splace=function(x,r,y){return r+"-"+y.toLowerCase()}),v="data-"+v.replace(F.sre,F.splace),s==null?!this.removeAttribute(v):(this.setAttribute(v,s),s))},emit:function Q(r){var s=new CustomEvent(r);return s.arguments=ad.slice.call(arguments,1),this.dispatchEvent(s)},listeners:function W(r){return[]},off:function(s,r,u){return this.removeEventListener(s,r,u),this},on:function(s,r,u){return this.addEventListener(s,r,u),this},once:Y.once,trigger:function am(w,u){var x=typeof w=="string",v=x?w:w.type,s=x?new CustomEvent(v,(au.detail=u,au)):w;return au.detail=null,q.call(s,this,v),this.dispatchEvent(s)},when:Y.when};au.cancelable=!0,au.bubbles=!0;try{document.createEvent("Event").target=document}catch(V){aa=!0,av=function(v,s,w){if(!an.call(v,s)){try{v[s]=w}catch(u){}}}}(function(E){var x=E.Window,v=x?x.prototype:E,H=(E.Node||E.Element||E.HTMLElement).prototype,w=(E.Document||E.HTMLDocument).prototype,D=(E.XMLHttpRequest||function(){}).prototype,C=function(){A.trigger("ready")},A=E.document,y,B;for(y in I){an.call(I,y)&&(B={enumerable:!1,configurable:!0,writable:!0,value:I[y]},ag(H,y,B),y!=="data"&&(ag(v,y,B),ag(w,y,B),ag(D,y,B)))}A.when("ready",ar),/loaded|complete/.test(A.readyState)?(E.setImmediate||setTimeout)(C):A.once("DOMContentLoaded",C,!0)})(h)})(Object);h.$=function(q){return function(s,r){return q.slice.call(q.concat(r||document)[0].querySelectorAll(s))}}([]);
/*! (C) Andrea Giammarchi */
;function i(I){var y=h.Math,v=y.atan,x=y.exp,w=y.log,H=y.max,E=y.min,u=y.pow,N=y.round,P=y.sqrt,K=y.tan,C=y.PI,r=0.5,O=90,s=O*2,J=O*4,t=C/2,q=C/4,G=C/s,z=s/C,F=C*2,B=C*4;if(!I){I=256}return{coordsToPoint:function D(S,R){var Q=I<<R;return{x:N((S.longitude/J+r)*Q),y:N(E(1,H(0,r-(w(K(q+t*S.latitude/s))/C)/2))*Q)}},pointDistance:function A(R,Q){return P(u(Q.y-R.y,2)+u(Q.x-R.x,2))},pointToCoords:function M(R,T){var S=I<<T,Q=R.x/S,U=R.y/S;return{latitude:U<=0?O:U>=1?-O:z*(2*v(x(C*(1-2*U)))-t),longitude:(Q===1?1:(Q%1+1)%1)*J-s}}}}var k=k||function(u){var t=u.documentElement,s=u.createElement("p"),q;s.style.cssText=[";position:absolute",";margin:0",";padding:0",";display:block",";overflow:scroll",";width:50px",";line-height:50px",";font-size:50px"].join(" !important");s.innerHTML="0";t.insertBefore(s,t.lastChild);q=s.offsetWidth-s.clientWidth;t.removeChild(s);return q}(document);
/*! SimpleKinetic v0.1.1 - MIT license */
;var c=function(r){var z=r.isNaN,s=r.Math,G=s.abs,F=s.round,C=s.sqrt,y=r.setInterval,D=r.clearInterval,u=0.2,E=9,A=1000/60,x=t.prototype;function t(H){for(var I in H){if(/^on|context|interval/.test(I)){this[I]=H[I]}}}x.init=function(W,V,N,K,Q,O){var X=w(this),M=(G(N)<1?0:N)*(Q?1:E),S=(G(K)<1?0:K)*(O?1:E),J=M*M,R=S*S,I=C(J+R),H=M/I,P=S/I,U,T;X.cancel(X._cx,X._cy);if(!(z(H)||z(P))){X._a=y(v,X.interval||A,X);X._t=0;X._d=I;X._sx=X._cx=W;X._sy=X._cy=V;X._xa=H;X._ya=P;U=F(W+I*H);T=F(V+I*P);X._ex=U;X._ey=T;if((W!==U||V!==T)&&X.start(W,V,0,0,U,T)!==false){return true}w(X._a)}return false};x.start=B("start");x.move=B("move");x.end=B("end");x.cancel=function(J,H,K,I,N,M){if(this._a){w(this).oncancel.call(this.context||this,J,H,K,I,N,M)}};x.onstart=x.onmove=x.onend=x.oncancel=function(J,H,K,I,N,M){};function w(H){D(H._a);H._a=0;return H}function B(H){H="on"+H;return function(K,I,M,J,O,N){return this[H].call(this.context||this,K,I,M,J,O,N)}}function v(I){var O=(I._t+=(I._d-I._t)*u),H=F(I._sx+O*I._xa),P=F(I._sy+O*I._ya),N=I._ex,K=I._ey,M=H-I._cx,J=P-I._cy;if(H===N&&P===K){w(I).end(N,K,M,J,N,K)}else{I.move(H,P,M,J,N,K);I._cx=H;I._cy=P}}var q=y(function(H){D(q);if(!H){y=function(K,J,I){return r.setInterval(function(){K(I)},J)}}},0,1);return t}(this);function a(s,z,q,w){
/*! (C) equolo.org */
;var t=192,v=z/t,x=q||"#286868",r=s.getContext("2d");function y(A,B){r.moveTo(A*v,B*v)}function u(B,A,F,E,D,C){r.bezierCurveTo(B*v,A*v,F*v,E*v,D*v,C*v)}r.clearRect(0,0,s.width,s.height);s.width=s.height=z;if(w){r.fillStyle=w;r.fillRect(0,0,z,z)}r.fillStyle=x;r.save();r.scale(1.25,1.25);r.beginPath();y(95.32+10,10.21);u(101.05+10,7.85,108.56+10,12.68,108.09+10,19.01);u(108.39+10,25.61,100.46+10,30.49,94.67+10,27.28);u(87.81+10,24.1,88.04+10,12.79,95.32+10,10.21);r.closePath();r.fill();r.beginPath();y(67.01+10,7.48);u(72.33+10,20.59,82.54+10,31.7,95.46+10,37.57);u(104.17+10,41.72,113.89+10,43.25,123.47+10,43.1);u(108.12+10,48.29,96.34+10,60.6,88.32+10,74.31);u(79.91+10,88.85,78.34+10,106.86,83.29+10,122.84);u(72.84+10,106.64,59.08+10,91.84,41.39+10,83.57);u(30.55+10,78.74,18.41+10,76.4,6.58+10,77.64);u(24.52+10,73.08,42.99+10,65.59,54.74+10,50.61);u(64.15+10,38.49,68.55+10,22.74,67.01+10,7.48);r.closePath();r.fill();r.beginPath();y(43.22+10,119.97);u(43.75+10,102.87,43.89+10,94.92,48.72+10,89.2);u(50.5+10,93.22,49.73+10,97.67,50.54+10,101.88);u(51.34+10,107.31,53.13+10,112.93,57.29+10,116.73);u(61.3+10,121.01,68.71+10,121.41,70.94+10,127.44);u(72.27+10,133.19,66.42+10,138.03,61.08+10,138.09);u(54.7+10,138.64,49.47+10,133.66,46.69+10,128.39);u(43.41+10,122.84,43.52+10,116.2,43.22+10,109.97);r.closePath();r.fill();r.restore();return s}function m(q){for(var s,r,u=document.createElement("canvas"),t=document.createDocumentFragment(),w=[30,57,60,72,114,128,144,173,196,214,256],v=0;v<w.length;v++){s=document.createElement("link");r=document.createElement("link");s.rel="shortcut icon";r.rel="apple-touch-icon";s.type=r.type="image/png";s.href=r.href=q(u,w[v],"#E6A72A","#286868").toDataURL();s.setAttribute("sizes",s.sizes=w[v]+"x"+w[v]);r.setAttribute("sizes",s.sizes);t.appendChild(s);t.appendChild(r)}(document.head||document.querySelector("head")).appendChild(t)}var f=localStorage;try{f.setItem("0",0);f.removeItem("0")}catch(d){f={getItem:function(t){var s=document.cookie,r=s.indexOf(t=escape(""+t)),q;if(-1<r){r+=1+t.length;q=s.indexOf(";",r);return unescape(s.substring(r,q<0?s.length:q))}},setItem:function(q,r){document.cookie=[escape(""+q)+"="+escape(""+r),"expires="+(new Date(Date.now()+1000*60*60*24)).toUTCString(),"path=/"].join("; ")}}}h.on("leaflet:map",function(x){function w(){r.panBy([A*6,y*6]);B=null;s=0;t.scrollLeft=parseFloat(t.style.width);t.scrollTop=parseFloat(t.style.height)}function u(){t.style.top=v.offsetHeight+"px";q.style.width=(parseFloat(t.style.width=j.width+"px")*3)+"px";q.style.height=(parseFloat(t.style.height=D.offsetHeight+"px")*3)+"px"}var r=x.detail,D=document.getElementById("tiles"),v=D.parentNode.children[0],t=D.parentNode.appendChild(document.createElement("div")),q=t.appendChild(document.createElement("span")),C={animate:false,noMoveStart:true},s=0,A=0,y=0,B,z;t.id="ie9-map-wrapper";q.id="ie9-map-center";j.on("change",u);q.onmouseenter=q.onmouseleave=q.onselectionstart=q.onmousedown=q.onmouseup=q.onmousemove=q.onclick=q.ondblclick=function(E){E.preventDefault();E.stopPropagation();if(E.pageX<60&&E.pageY<100){}};w();t.onscroll=function(E){if(B!=null){r.panBy([(A=t.scrollLeft-B),(y=t.scrollTop-z)],C);clearTimeout(s);s=setTimeout(w,30)}B=t.scrollLeft;z=t.scrollTop};setTimeout(u)});
/*! (C) Andrea Giammarchi */
;var p=function(t){function r(w,v){function u(){q.call(u);u.waiting=setTimeout(s,v,u,w,this,arguments)}if(!v){v=r.delay}u.clear=q;u.waiting=Infinity;return u}function q(){if(this.waiting!==Infinity){clearTimeout(this.waiting)}this.waiting=0}function s(v,x,w,u){v.waiting=0;x.apply(w,u)}r.delay=t;return r}(500);
/*! (C) Andrea Giammarchi */
;function i(I){var y=h.Math,v=y.atan,x=y.exp,w=y.log,H=y.max,E=y.min,u=y.pow,N=y.round,P=y.sqrt,K=y.tan,C=y.PI,r=0.5,O=90,s=O*2,J=O*4,t=C/2,q=C/4,G=C/s,z=s/C,F=C*2,B=C*4;if(!I){I=256}return{coordsToPoint:function D(S,R){var Q=I<<R;return{x:N((S.longitude/J+r)*Q),y:N(E(1,H(0,r-(w(K(q+t*S.latitude/s))/C)/2))*Q)}},pointDistance:function A(R,Q){return P(u(Q.y-R.y,2)+u(Q.x-R.x,2))},pointToCoords:function M(R,T){var S=I<<T,Q=R.x/S,U=R.y/S;return{latitude:U<=0?O:U>=1?-O:z*(2*v(x(C*(1-2*U)))-t),longitude:(Q===1?1:(Q%1+1)%1)*J-s}}}}
/*! (C) Andrea Giammarchi */
;var g=(function(y,q){var E=/Android 4\.0/.test(y),C=/Android/.test(y)&&/Chrom(?:e|ium)/.test(y),F=x.prototype,G=q.abs,A=q.max,u=q.min,B=15;function x(H,I){if(!I){I=this}this._el=H;while(!H.offsetHeight){H=H.parentNode}r(this,this._r=H,true);this.disabled=false;this.onstart=I.onstart||s;this.onchange=I.onchange||s;this.onend=I.onend||s;this.onclick=I.onclick||s;if("ontouchend" in document){this._el.parentNode.style.cssText+=[";-ms-touch-action:none",";touch-action:none",";overflow:hidden"].join("")}}function s(H){}function r(H,I,J){var K=(J?"add":"remove")+"EventListener";if("ontouchend" in document){I[K]("touchstart",H,true);I[K]("touchmove",H,true);I[K]("touchend",H,true)}else{I[K]("mousedown",H,true);I[K]("mousemove",H,true);I[K]("mouseup",H,true)}}F.clear=function w(){r(this,this._r,false)};F.handleEvent=function z(H){if(this._vscrolling&&H.type!=="touchend"){return}if(C){H.preventDefault()}this[H.type](H)};F.touchstart=function v(H){if(!this._scrolling){H=H.touches[0];this._x=H.pageX>>0;this._y=H.pageY>>0;this._diffY=0;this._t=0;this._l=0}};F.touchmove=function t(I){var J=I.touches[0],H=J.pageX>>0;if(this._scrolling){I.preventDefault();I.stopPropagation();I.x=H-this._diffX-this._x;if(E){this._p.style.marginLeft=A(this._m,u(0,I.x+this._l))+"px";this._e=I.x}else{this._p.scrollLeft=this._s-I.x}this.onchange(I)}else{this._diffX=H-this._x;this._diffY=J.pageY-this._y;this._vscrolling=B<=this._t++||B<=G(this._diffY);this._scrolling=!this._vscrolling&&B<=G(this._diffX);if(this._scrolling){I.preventDefault();this._p=this._el.parentNode;this._s=this._p.scrollLeft;if(E){if(!this._l){this._l=parseFloat(this._p.style.marginLeft||0);if(!this._l&&this._p.scrollLeft){this._l=-this._p.scrollLeft;this._p.scrollLeft=0;this._p.style.marginLeft=this._l+"px"}if(!this._m){this._m=this._p.clientWidth-this._p.scrollWidth}}this._s=-this._l}this.onstart(I)}}};F.touchend=function D(H){if(!H.touches.length){if(this._scrolling){H.preventDefault();this._p=null;if(E){this._l=A(this._m,u(0,this._e+this._l))}this.onend(H)}else{if(!this._vscrolling){this.onclick(H)}}this._t=0;this._scrolling=false;this._vscrolling=false}};x.compat=E;return x}(navigator.userAgent,Math));
/*! (C) Andrea Giammarchi */
(function(s,D,y){if(!((y=!!s.pointerEnabled)||s.msPointerEnabled)||"ontouchend" in D){return}var u=(y?"":"MS")+"POINTER_TYPE_MOUSE",t=function(M){return y?M.toLowerCase():"MS"+M},v=y?function(M){return M}:function(M){return M.slice(2).toLowerCase()},w=function(M,N,O){N.call(M,t(O),r,true)},F=function(M){return{value:function(){K[M].call(this);this._[M]()}}},G=function(O,M){var N=O[M];Object.defineProperty(O,M,{configurable:true,value:function(R,Q,P){if(R in x){N.call(this,x[R],r,P)}return N.call(this,R,Q,P)}})},E=function(M){return{get:function(){return this._[M]}}},q=function(M,N){var O=D.createEvent("Event");O.initEvent(M,true,true);I.value=N;Object.defineProperties(O,J);N.target.dispatchEvent(O)},C=function(N){var M=N.pointerType;return(M===N[u]||M==="mouse")?"mouse":"touch"},H=function(M){return this[M]},B=function(M){return z[M]},I={value:null},K=D.createEvent("Event"),J={_:I,touches:{configurable:true,get:function(){I.value=Object.keys(z).map(B);return Object.defineProperty(this,"touches",I).touches}},relatedTarget:E("relatedTarget"),currentTarget:E("currentTarget"),target:E("target"),altKey:E("altKey"),metaKey:E("metaKey"),ctrlKey:E("ctrlKey"),shiftKey:E("shiftKey"),preventDefault:F("preventDefault"),stopPropagation:F("stopPropagation"),stopImmediatePropagation:F("stopImmediatePropagation")},z=Object.create(null),x=Object.create(null),r={handleEvent:function(M){if(C(M)==="touch"){r[v(M.type)](M)}},pointerdown:function(M){z[M.pointerId]=new A(M);q("touchstart",M)},pointermove:function(M){z[M.pointerId]._=M;q("touchmove",M)},pointerup:function(M){delete z[M.pointerId];q("touchend",M)}};function A(M){this._=M}Object.defineProperties(A.prototype,{identifier:E("pointerId"),target:E("target"),screenX:E("screenX"),screenY:E("screenY"),clientX:E("clientX"),clientY:E("clientY"),pageX:E("pageX"),pageY:E("pageY")});x.touchstart=t("PointerDown");x.touchmove=t("PointerMove");x.touchend=t("PointerUp");G(D,"addEventListener");G(D,"removeEventListener");G(Element.prototype,"addEventListener");G(Element.prototype,"removeEventListener");D.ontouchstart=D.ontouchmove=D.ontouchend=null}(navigator,document));h.on("wp:hs-icon",function(t){var r=document.body.appendChild(document.createElement("wp")),q=document.createElement("canvas"),s=(Math.min(j.width,j.height)/2)>>0;q.style.cssText="width:"+s+"px;height:"+s+"px;";r.appendChild(a(q,s*j.ratio,"#E6A72A","#286868"));r.appendChild(document.createElement("h1")).textContent="equolo.org";r.onclick=r.remove;if(IE9Mobile){r.style.cssText=[";top:",document.documentElement.scrollTop,"px",";width:",j.width,"px",";height:",j.height,"px"].join("")}t.arguments[0].preventDefault()});h.on("wp:ffos-install",function(r){try{navigator.mozApps.install("http://equolo.org/equolo.webapp").onerror=function(){alert(":-(\n"+this.error.name)}}catch(q){}r.arguments[0].preventDefault()});function l(){if(location.href.indexOf("equolo")<0){return}h._gaq=[["_setAccount","UA-924021-6"],["_trackPageview"]];var r=document.createElement("script"),q=document.getElementsByTagName("script")[0];r.type="text/javascript";r.async=true;r.src="http://www.google-analytics.com/ga.js";q.parentNode.insertBefore(r,q)}function e(){var t="https://www.paypalobjects.com/",s=document.createDocumentFragment(),r=s.appendChild(document.createElement("input")),q=s.appendChild(document.createElement("img"));r.type="image";r.src=t+"en_US/i/btn/btn_donate_SM.gif";r.border=q.border=0;r.name="submit";r.alt="PayPal - The safer, easier way to pay online!";q.alt="";q.src=t+"de_DE/i/scr/pixel.gif";q.width=q.height=1;$("form#paypal")[0].appendChild(s)}(function(ap,x){if(ap.applicationCache){applicationCache.addEventListener("updateready",function(){ap.location.reload()})}var C=10,M=15,ax=18,O=3,aD="ontouchend" in x,aq=false,Z=new i(256),ag,r,W,aA,ar,y,B,R,w,I,Q,at,G,aF,au,am=true,u;if(aD){["touchstart","mousemove","mousewheel","scroll"].forEach(function(aG){x.once(aG,this,true)},function(aG){if(!aq){aq=aG.type==="touchstart";if(!aq&&aD){aD=false;x.emit("fake:touch")}}})}x.when("ready",function(){al();$("noscript").forEach(function(aG){aG.remove()});ak(false,true)});ap.once("load",aC);function al(){while(x.body.firstChild.id!="map"){x.body.removeChild(x.body.firstChild)}}function aC(){var aG,aK,aH,aJ,aI;if(!ap.L){return setTimeout(aC,50)}Q={map:$("section#map")[0],about:$("section#about")[0],contact:$("section#contact")[0],pinIt:$("section#pin-it")[0],intro:$("section#intro")[0]};u=Q.intro.classList.contains("show")&&!f.getItem("equolo.show-intro");if(u){$("section#intro a").on("click",function(aO){aO.preventDefault();if(this.classList.contains("map")){f.setItem("equolo.show-intro",1);H();setTimeout(function(){u=false;Q.intro.classList.remove("show","t-all");Q.intro.remove()},1000)}else{location.href="/submit.php"}});setTimeout(function(){Q.intro.style.left="50%"},2000)}else{Q.intro.remove()}Q.nav=$("nav",Q.map)[0];Q.placeDetails=$("div.details",Q.map)[0];Q.location=$("div.location",Q.map)[0];Q.details=[Q.about,Q.contact,Q.pinIt];$(".logo",Q.map).on("click",X);if(!ap.compat){m(a)}else{aH=$("head")[0].appendChild(x.createElement("link"));aH.rel="shortcut icon";aH.type="image/png";aH.href="/img/equolo-favicon.png"}D();setTimeout(ay,Math.random()*1000);l();e();function aN(aO,aP){if(aP.parentNode){aP.parentNode.classList.remove("selected")}aP.parentNode=aO;aP.section=aO.firstChild.href.split("#")[1];aO.classList.add("selected")}W=$("select[name=category]")[0];W.on("change",function(){S(false);af()});aA=[].map.call(W.options,function(aO){this[aO.value]=aO.textContent;return aO.value},ar={});aG=$("nav a").on("click",function aM(aS){var aO=this.parentNode,aP;H();if(aM.sk){aM.sk.cancel()}if(aO.classList.contains("selected")){aS.preventDefault();aM.parentNode=null;aO.classList.remove("selected");aP=Q.nav.offsetHeight;(aM.sk=new c({context:Q.map,onstart:function(){aM.kinetic=true;if(ad.sk){ad.sk.cancel()}ak(false);x.body.scrollTop=x.documentElement.scrollTop=0;aM.ms.display="block";if(IE9Mobile){Q.nav.style.top=null}aM.np.appendChild(Q.nav)},onmove:function(aT,aY,aV,aU,aX,aW){aM.ms.minHeight=aY+"px"},onend:function(aT,aY,aV,aU,aX,aW){aM.ms.minHeight=null;I.style.zIndex=W.style.zIndex=9999;Q.placeDetails.style.height=Q.placeDetails.style._height;T();aM.kinetic=false;aM.doNotScroll=true}})).init(0,aP,0,j.height-aP,false,true)}else{if(aM.parentNode){if(IE9Mobile){aN(aO,aM)}else{aS.preventDefault();aN(aO,aM);setTimeout(ad,300,aO)}}else{aS.preventDefault();aM.sk=new c({context:Q.map,onstart:function(){I.style.zIndex=W.style.zIndex=0;Q.placeDetails.style._height=Q.placeDetails.style.height;Q.placeDetails.style.height=0;aM.doNotScroll=false;aM.kinetic=true;ak(true)},onmove:function(aT,aY,aV,aU,aX,aW){aM.ms.minHeight=aY+"px"},onend:function(){Q.about.prepend(Q.nav);aM.ms.display="none";setTimeout(aN,100,aM.lt,aM);setTimeout(ad,400,aM.lt);aM.kinetic=false}});if(!aM.np){aM.np=Q.nav.parentNode;aM.ms=Q.map.style}aM.lt=aO;aP=Q.map.offsetHeight;aM.sk.init(0,aP,0,($("footer",Q.map)[0].offsetHeight-aP),false,true);if(!aM.scroll){aM.scroll=true;[x,x.documentElement,x.body].forEach(function(aT){aT.on("scroll",this).on("mousewheel",this);this.i=0},function aQ(aY){if(ad.kinetic||aM.kinetic||aM.doNotScroll){return}var aX=au(),aV,aT,aU,aW;if(au.el){aV="scrollTop" in this?this:au.el;if(aV==au.el){aT=aW=0;aU=aX+j.height/3;while(aT<Q.details.length){aV=Q.details[aT++];aW+=aV.offsetHeight+8;if(aU<aW){--aT;break}}if(aT!=aQ.i){aQ.i=aT;aN(aG[aT].parentNode,aM)}if(IE9Mobile){Q.nav.style.top=x.documentElement.scrollTop+"px"}}else{this.off("scroll",aQ).off("mousewheel",aQ)}}})}}}try{this.blur()}catch(aR){}});aG.some(function(aO){if(aO.href.split("#")[1]==this){setTimeout(aO.trigger.bind(aO),2000,"click");return true}},location.href.split("#")[1]);Q.tiles=$("#tiles")[0];ag=P(Q.tiles);B={};ac(navigator.country&&navigator.country.iso2!="US"?navigator.country.geo:[49.6,6.116667],5);I=$("button#find-me")[0];if("geolocation" in navigator){I.on("click",function(aP){I.firstChild.classList.remove("icon-compass");I.firstChild.classList.add("fx-spin","icon-refresh");I.disabled=true;I.moved=false;try{if(aJ){navigator.geolocation.clearWatch(aJ)}aJ=navigator.geolocation.watchPosition(function(aQ){if(!I.moved){I.moved=true;ac(aQ.coords,15)}A(aQ.coords);aw()},aw,{maximumAge:300000})}catch(aO){I.remove()}I.blur()})}else{I.remove()}ah();aH=f.getItem("equolo.activities");if(aH){U(aH)}if(/#(-?\d+\.\d+)(?:\||\/)(-?\d+\.\d+)(?:\||\/)(\d+)$/.test(decodeURIComponent(location.hash))){am=false;ac({latitude:parseFloat(RegExp.$1),longitude:parseFloat(RegExp.$2)},parseInt(RegExp.$3,10))}else{if(aH=f.getItem("equolo.map")){am=false;ac.apply(null,JSON.parse(aH))}}if(am){$("li.intro",Q.map)[0].style.cssText="display:block;margin-left:"+(aB())+"px;"}ag.on("zoomend",function aL(aO){var aP=ag.getZoom(),aQ=aL.current||0;aL.current=aP;if(aQ===0||((C<=aP&&aQ<C)||(aP<C&&C<=aQ))){S(true);af()}});ag.on("movestart",function(){H();I.moved=true;am=false});ag.on("moveend",aH=p(function(){var aP=ag.getZoom(),aO=ag.getCenter(),aQ=[aO.lat.toFixed(3),aO.lng.toFixed(3),aP];f.setItem("equolo.map",JSON.stringify([aO,aP]));if(ap.history){history.replaceState(aQ,x.title,"#"+aQ.join("/"))}}));ag.on("movestart",aH.clear);ap.on("pagehide",t).on("unload",t);if(IE9Mobile){ap.trigger("leaflet:map",ag)}}function t(){try{f.setItem("equolo.activities",at||"")}catch(aG){f.setItem("equolo.activities","")}}function P(aI,aH){var aG={attribution:'Map Tiles <a href="http://open.mapquest.com/">&copy; Open MapQuest</a>',maxZoom:ax,minZoom:O},aJ;aJ=aH?L.map(aI,aH):L.map(aI);L.tileLayer("http://otile1.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",aG).addTo(aJ);return aJ}function aw(){I.firstChild.classList.remove("fx-spin","icon-download");I.firstChild.classList.add("icon-compass");I.disabled=false}function aa(){if(!aF){aF=G.reduce(aE,[])}return aF}function H(){if(u){Q.intro.style.left="100%"}}function ab(aH,aG){var aI=Z.pointDistance(Z.coordsToPoint(aH,ax),Z.coordsToPoint(aG,ax));if(!("distance" in aH)){aH.distance=aI}if(!("distance" in aG)){aG.distance=aI}if(aH.distance<aG.distance){if(aI<aH.distance){aH.distance=aI;return 1}return 0}else{if(aG.distance<aH.distance){return -1}else{return 0}}}function ae(aG){aG.name=this.name;aG.description=this.description;aG.aid=this.id;return aG}function aE(aG,aH){return aG.concat(aH.place.map(ae,aH))}function K(aG){for(var aJ,aM,aN,aL=C<=ag.getZoom(),aO=aL||{stroke:true,color:"#286868",weight:2,opacity:1,fill:true,fillColor:"#E6A72A",fillOpacity:1,radius:8,clickable:false,pointerEvents:false},aH=aG.place,aI=0;aI<aH.length;aI++){aM=aH[aI];aN=aM.icon;if(aL){aJ=z(aM);aJ.activity=aG;aJ.placeIndex=aI}else{aJ=L.circleMarker(N(aM),aO)}try{B[aN].addLayer(aJ)}catch(aK){console.log(aN||"icon:fail");console.log(B||"groups:fail")}}}function z(aH){var aG=L.marker(N(aH),{icon:L.icon({iconUrl:"/img/map/"+aH.icon+".png",iconSize:[36,36],iconAnchor:[18,36]})});aG.on("click",F);aG.id=aH.id;return aG}function A(aG){var aH=N(aG);if(!w){w=L.circleMarker(aH,{clickable:false,pointerEvents:false});w.addTo(ag)}w.setLatLng(aH)}function V(){for(var aH=W.value,aG=1;aG<aA.length;aG++){if(aH=="all"||aH==aA[aG]){B[aA[aG]].addTo(ag)}}}function q(aH){for(var aG=1;aG<aA.length;aG++){if(B.hasOwnProperty(aA[aG])){ag.removeLayer(B[aA[aG]])}if(aH){B[aA[aG]]=L.layerGroup()}}}function ai(aG){if(!this.hasOwnProperty(aG.icon)){this[aG.icon]=0}this[aG.icon]++}function af(){if(am){return}if(af.moveend){ag.off("moveend",af.moveend);ag.off("movestart",af.moveend.clear)}$("li",Q.location).forEach(function(aG){if(aG.classList.contains("place")){aG.remove()}else{aG.style.display="none"}});af.map={};if(ag.getZoom()<C){if(af.el){af.el.style.width=null}af.el=$("li.stats",Q.map)[0];af.el.style.display="block";ag.on("moveend",af.moveend=p(function(){var aJ,aI,aH={},aG=[];aa().filter(an,ag.getBounds()).forEach(ai,aH);for(aI in aH){if(aH.hasOwnProperty(aI)){aG.push('<i class="icon-'+aI+'"></i> '+ar[aI]+" "+aH[aI])}}aJ=af.el.childNodes[1];aJ.innerHTML=aG.length?aG.join(", "):"we have nothing nothing in this area :-(<br/>do you know any activity that could be part of equolo?";ao(aJ)}));ag.on("movestart",af.moveend.clear)}else{af.el=$("ul",Q.map)[0];ag.on("moveend",af.moveend=p(function(){var aK=aa().filter(an,ag.getBounds()),aJ=aK.length,aG=aJ&&x.createDocumentFragment(),aH=0,aI;if(!aJ){return}aI=[];aK.forEach(function(aM){aI.push(aM.id);if(af.map[aM.id]){return}var aL=this.appendChild(x.createElement("li")),aN=aL.appendChild(x.createElement("h3")),aO=aL.appendChild(x.createElement("p"));aN.classList.add("ellipsis");aL.data("coords",aM.latitude+"/"+aM.longitude);aL.classList.add("place","t-all");aL.id="place-"+aM.id;af.map[aM.id]=aM;aN.appendChild(x.createElement("i")).classList.add("icon-"+aM.icon);aN.appendChild(x.createTextNode(" "+aM.name));aN.appendChild(x.createElement("span")).textContent=aM.postcode;aO.appendChild(x.createTextNode(aM.description));aO.appendChild(x.createElement("i")).className="open-close icon icon-new-tab";if(!aD){aL.on("click",av)}},aG);af.el.appendChild(aG);aJ=$("li.place",af.el).filter(function(aL){var aM=aL.id.slice(6);if(aI.indexOf(aM)<0){delete af.map[aM];aL.remove();return false}return true}).length;af.el.style.width=(aJ*276+aB()*2+1)+"px";ao(af.el);if(aD&&!af.hscroll){x.once("fake:touch",function(){$("li.place",af.el).on("click",av);af.hscroll.clear();af.el.parentNode.style.overflow="auto"});af.hscroll=new g(af.el,{onstart:function(){this.x=af.el.scrollLeft;this.el=av.last||$("li.place",af.el)[0];av.reset()},onchange:function(aL){this.x=aL.x-this.x},onend:function(aL){av.call((this.x<0?this.el.nextElementSibling:this.el.previousElementSibling)||this.el,{})},onclick:function(aM){var aL=aM.target;while(aL&&aL.nodeName!=="LI"){aL=aL.parentNode}if(aL&&aL.nodeName==="LI"){av.call(aL,aL)}}})}}));ag.on("movestart",af.movestart=function(){af.moveend.clear();av.cancel()})}af.moveend()}function F(){av.call($("li#place-"+this.id)[0],{detail:false})}function v(aG){return this[aG].length}function s(aG){return this[aG]}function J(aI,aH,aG){var aJ=aG.filter(v,aH);if(aJ.length){(aI.appendChild(x.createElement("li"))).textContent=aJ.map(s,aH).join(", ")}}function az(aI,aH,aK,aJ){var aG;if(aH[aK]){aG=aI.lastChild.appendChild(x.createElement("a"));aG.target="_blank";aG.classList.add("social");switch(aK){case"twitter":aG.href=/^https?:\/\/(?:www.)?twitter\./.test(aH[aK])?aH[aK]:"https://twitter.com/"+aH[aK].replace(/^@/,"");break;case"facebook":aG.href=/^https?:\/\/(?:www.)?facebook\./.test(aH[aK])?aH[aK]:"https://www.facebook.com/"+aH[aK];break;case"gplus":aG.href=/^https?:\/\/plus\.google\./.test(aH[aK])?aH[aK]:"https://plus.google.com/"+aH[aK];break}aG.appendChild(x.createElement("i")).classList.add("icon-"+aJ)}}function Y(aI,aH,aK,aJ){var aG;if(aH[aK]){aG=aI.appendChild(x.createElement("li"));aG.classList.add("button");aG.appendChild(x.createElement("i")).classList.add("icon-"+aJ);aG=aG.appendChild(x.createElement("a"));aG.classList.add("ellipsis");switch(aK){case"phone":aG.href="tel:"+aH[aK].replace(/[^0-9+]/g,"");break;case"email":aG.href="mailto:"+aH[aK];break;default:aG.target="_blank";aG.href=/^https?:\/\//i.test(aH[aK])?aH[aK]:"http://"+aH[aK];break}aG.textContent=aH[aK]}}function E(aH){var aJ,aI,aG,aK;E.showing=true;if(!E.footer){E.footer=Q.nav.parentNode.offsetHeight}if(!E.el){E.el=Q.placeDetails}aG=Q.tiles.offsetHeight;aJ=E.el;aJ.style.cssText="opacity:1;top:"+($("header",Q.map)[0].offsetHeight)+"px;height:"+(aG<276?(aG+E.footer):aG)+"px;";if(aG<276){Q.location.style.bottom=Q.nav.parentNode.style.height=0}if(!r){E.h3=$("h3",aJ)[0];E.info=$("ul",aJ)[0];E.address=$("ul.address",aJ)[0];E.contact=$("ul.contact",aJ)[0];r=P($("div.minimap",aJ)[0],{zoomControl:false,dragging:false,touchZoom:false,doubleClickZoom:false,scrollWheelZoom:false,boxZoom:false,keyboard:false,attributionControl:false,tap:false,fadeAnimation:false})}z(aH).addTo(r);aK=Z.coordsToPoint(aH,15);aK.y-=18;r.setView(N(Z.pointToCoords(aK,15)),15);E.h3.textContent=E.address.textContent=E.contact.textContent="";E.h3.appendChild(x.createElement("i")).className="icon-"+aH.icon;E.h3.appendChild(x.createTextNode(" "+aH.name));aI=E.address;J(aI,aH,["address","extra","postcode","city"]);Y(aI,aH,"phone","phone");az(aI,aH,"twitter","twitter");Y(aI,aH,"email","envelope");az(aI,aH,"facebook","facebook");Y(aI,aH,"website","earth");az(aI,aH,"gplus","google-plus");ao(aJ)}function av(aI){try{var aK=this.data("coords").split("/"),aN=av.last==this,aH=this.parentNode.parentNode,aL=this.id.slice(6),aO,aM,aG,aP}catch(aJ){return}this.clicked=true;if(aN){if(E.showing){E.showing=false;E.el.style.cssText="";Q.location.style.bottom=Q.nav.parentNode.style.height=null}else{E(af.map[aL])}}else{aP=aI.detail===false?Object:function(aQ,aW,aS,aR,aU,aT){var aV=av.cancel;av.cancel=Object;ac({latitude:parseFloat(aK[0]),longitude:parseFloat(aK[1])},ag.getZoom());av.cancel=aV;if(E.showing){E(af.map[aL])}};av.cancel();(av.last=this).classList.add("selected");aM=0;aO=this.previousElementSibling;while(aO.classList.contains("place")){aO=aO.previousElementSibling;aM+=276}aG=g.compat?-parseFloat(aH.style.marginLeft||0):aH.scrollLeft;(av.sk=new c({onmove:function(aQ,aV,aS,aR,aU,aT){if(g.compat){aH.style.marginLeft=-aQ+"px"}else{aH.scrollLeft=aQ}},onend:aP})).init(aG,0,aM-aG,0,true,false)||aP()}}av.reset=function(){if(av.last){av.last.classList.remove("selected");av.last=null}};av.cancel=function(){if(av.sk){av.sk.cancel()}av.reset()};function S(aG){q(aG);if(aG){G.forEach(K)}V()}function U(aG){if(aG){G=JSON.parse(aG).map(aj);at=aG;aF=null;S(true);af()}}function ah(){var aG=ap.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");aG.open("GET","/cgi/location.php",true);aG.onreadystatechange=function(){if(aG.readyState==4){if(199<aG.status&&aG.status<400){U(aG.responseText)}else{setTimeout(ah,5000)}}};aG.send(null)}au=function(aH){var aG=x.body.scrollTop?x.body:(x.documentElement.scrollTop?x.documentElement:null);if(aG){au=function(aI){return aI==null?aG.scrollTop:(aG.scrollTop=aI)};au.el=aG;return au(aH)}else{if(aH==null){return 0}else{x.body.scrollTop=x.documentElement.scrollTop=aH}}};function ad(aJ){var aI=aJ.firstChild.href.split("#")[1],aH=Q.details,aN=true,aL=0,aG=0,aK=aH.length,aM=au();while(aN){aN=aH[aG].id!=aI;if(aN){aL+=aH[aG].offsetHeight+8}aG++}if(IEMobile){au(aL)}else{if(ad.sk){ad.sk.cancel()}(ad.sk=new c({onstart:function(){ad.kinetic=true},onmove:function(aO,aT,aQ,aP,aS,aR){au(aT)},onend:function(aO,aT,aQ,aP,aS,aR){au(aR);ad.kinetic=false}})).init(0,aM,0,aL-aM,false,true)}}function ac(aH,aG){ag.setView(N(aH),aG||Math.max(15,ag.getZoom()))}function ak(aH,aG){var aI=aH?"remove":"add";if(aG){x.documentElement.scrollTop=0;x.body.scrollTop=0}x.documentElement.classList[aI]("no-scroll");x.body.classList[aI]("no-scroll")}function aB(){return(j.width-276)>>1}function D(){var aI=aB(),aJ=$("header",Q.map)[0].offsetHeight,aH=(j.height-aJ-$("footer",Q.map)[0].offsetHeight),aG=o({section:{"min-height":j.height},"section#map > div.location li.place:nth-child(3)":{"margin-left":aI},"section#map > div.location li.place:last-child":{"margin-right":aI},"section#map > div.location > ul > li":{"min-height":150-k},"section#intro":{top:aJ+"px",width:Math.round(j.width/2),"max-height":aH,"min-height":aH}},[]);if(D.style){D.style.remove()}D.style=aG;T()}function T(){if(ag){ag.invalidateSize()}if(r){r.invalidateSize()}}function an(aG){var aH=W.value;return aG.icon==aH||aH=="all"&&this.contains(new L.LatLng(aG.latitude,aG.longitude))}function N(aG){return[aG.latitude||aG.lat||aG[0]||0,aG.longitude||aG.lng||aG[1]||0]}function ao(aG){}function X(){j.full(!j.fullScreen);setTimeout(T,300)}ap.on("go:fullscreen",function(){j.full(true)});function aj(aG){aG.place=n.unpack(aG.place);return aG}function ay(){$("span.email").forEach(function(aI){var aG=x.createElement("a"),aH=aI.textContent.split("").reverse().join("");aG.href="mailto:"+aH;aG.textContent=aH;aI.replace(aG)})}j.on("change",D)}(h,document))}(this));