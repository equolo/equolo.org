/*! )°(, equolo - https://github.com/equolo/equolo.org */
/*@cc_on
(function(f){
window.setTimeout=f(window.setTimeout);
window.setInterval=f(window.setInterval);
})(function(f){return function(c,t,a){a=[].slice.call(arguments,2);return f(function(){c.apply(this,a)},t)}});
@*/
var
IEMobile=/*@cc_on/\bIEMobile\b/.test(navigator.userAgent)||@*/false,
IE9Mobile=/*@cc_on(IEMobile&&@_jscript_version<10)||@*/false,
IE10Mobile=/*@cc_on(IEMobile&&@_jscript_version/10>=1)||@*/false
;
IE9Mobile&&document.write('<link rel="stylesheet" href="css/IE9Mobile.css"/><script src="js/IE9Mobile.js"></script>');(function(b){(function(e,c,d){"indexOf" in e||(e.indexOf=function(f){for(var g=this.length;g--&&this[g]!==f;){}return g});"bind" in c||(c.bind=function(j){var i=this,h=e.slice,g=h.call(arguments,1);return function(){return i.apply(j,g.concat(h.call(arguments)))}});"trim" in d||(d.trim=function(){return this.replace(/^[^\S]+|[^\S]+$/g,"")})}(Array.prototype,Function.prototype,String.prototype));
/*! (C) WebReflection Mit Style License */
(function(z){function F(c){return typeof c=="string"?z.document.createTextNode(c):c}function m(f){if(f.length===1){return F(f[0])}for(var e=z.document.createDocumentFragment(),c=x.call(f),d=0;d<f.length;d++){e.appendChild(F(c[d]))}return e}for(var g,w,G,k=/^\s+|\s+$/g,E=/\s+/,C=" ",y=function(c,d){return this.contains(c)?d||this.remove(c):d&&this.add(c),!!d},q=(z.Element||z.Node||z.HTMLElement).prototype,B=["prepend",function(){var c=this.firstChild,d=m(arguments);c?this.insertBefore(d,c):this.appendChild(d)},"append",function(){this.appendChild(m(arguments))},"before",function(){var c=this.parentNode;c&&c.insertBefore(m(arguments),this)},"after",function(){var d=this.parentNode,e=this.nextSibling,c=m(arguments);d&&(e?d.insertBefore(c,e):d.appendChild(c))},"replace",function(){var c=this.parentNode;c&&c.replaceChild(m(arguments),this)},"remove",function(){var c=this.parentNode;c&&c.removeChild(this)}],x=B.slice,j=B.length;j;j-=2){g=B[j-2],g in q||(q[g]=B[j-1])}"classList" in document.documentElement?(G=document.createElement("div").classList,G.add("a","b"),"a b"!=G&&(q=G.constructor.prototype,"add" in q||(q=z.DOMTokenList.prototype),w=function(c){return function(){var d=0;while(d<arguments.length){c.call(this,arguments[d++])}}},q.add=w(q.add),q.remove=w(q.remove),q.toggle=y)):(w=function(c){if(!c){throw"SyntaxError"}if(E.test(c)){throw"InvalidCharacterError"}return c},G=function(d){var c=d.className.replace(k,"");c.length&&B.push.apply(this,c.split(E)),this._=d},G.prototype={length:0,add:function(){for(var c=0,d;c<arguments.length;c++){d=arguments[c],this.contains(d)||B.push.call(this,g)}this._.className=""+this},contains:function(c){return function(d){return j=c.call(this,g=w(d)),-1<j}}([].indexOf||function(c){j=this.length;while(j--&&this[j]!==c){}return j}),item:function(c){return this[c]||null},remove:function(){for(var c=0,d;c<arguments.length;c++){d=arguments[c],this.contains(d)&&B.splice.call(this,j,1)}this._.className=""+this},toggle:y,toString:function D(){return B.join.call(this,C)}},(Object.defineProperty||function(d,c,f){d.__defineGetter__(c,f.get)})(q,"classList",{get:function(){return new G(this)},set:function(){}}));try{new z.CustomEvent("?")}catch(A){z.CustomEvent=function(f,c){function h(o,e){var l=document.createEvent(f);if(typeof o!="string"){throw new Error("An event name must be provided")}return f=="Event"&&(l.initCustomEvent=d),e==null&&(e=c),l.initCustomEvent(o,e.bubbles,e.cancelable,e.detail),l}function d(o,i,p,l){this.initEvent(o,i,p),this.detail=l}return h}(z.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}})(b);
/*! (C) Andrea Giammarchi Mit Style License */
(function(aa){function H(){return{l:{},m:[],b:[]}}function q(d){var c=H();return ac.value=c,O(d,Z,ac),ac.value=null,c}function B(d,c,f){typeof c=="function"?c.apply(d,f):c.handleEvent.apply(c,f)}function j(d,c,f){f&&A(this,"detail",f),A(this,"type",c),A(this,"target",d),A(this,"timeStamp",R())}if(aa.eddy){return}aa.eddy=!0;var I=Array.prototype,Q=aa.prototype,M=j.prototype,W=Q.hasOwnProperty,J=I.push,P=I.slice,G=I.unshift,ae="toLocaleString",Z={toLocaleString:1}.propertyIsEnumerable(ae)?"_@eddy"+Math.random():ae,U=Z===ae,ac=(aa.create||aa)(null),X=[],O=U?function(d,c,f){d[c]=f.value}:aa.defineProperty,ab=function(d){var c=this;return function(){return c.apply(d,arguments)}},F=I.indexOf||function(d){var c=this.length;while(c--&&this[c]!==d){}return c},R=Date.now||function(){return(new Date).getTime()},Y={boundTo:function(e){var h=W.call(this,Z)?this[Z]:q(this),f=h.m,g=h.b,d=typeof e=="string"?this[e]:e,c=F.call(f,d);return c<0?g[J.call(f,d)-1]=ab.call(d,this):g[c]},emit:function(g){var m=W.call(this,Z),i=m&&this[Z].l,h=m&&W.call(i,g),f=h&&i[g],e=h&&P.call(arguments,1),d=0,k=h?f.length:d;while(d<k){B(this,f[d++],e)}return h},listeners:function(c){return W.call(this,Z)&&W.call(this[Z].l,c)&&this[Z].l[c].slice()||[]},off:function(d,h){var f=W.call(this,Z),e=f&&this[Z].l,g=f&&W.call(e,d)&&e[d],c;return g&&(c=F.call(g,h),-1<c&&(g.splice(c,1),g.length||delete e[d])),this},on:function(e,h,f){var g=W.call(this,Z),d=(g?this[Z]:q(this)).l,c=g&&W.call(d,e)?d[e]:d[e]=[];return F.call(c,h)<0&&(f?G:J).call(c,h),this},once:function(d,g,f){var c=function(h){e.off(d,c,f),B(e,g,arguments)},e=this;return e.on(d,c,f)},trigger:function(C,g){var E=W.call(this,Z),f=E&&this[Z].l,y=typeof C=="string",w=y?C:C.type,i=E&&W.call(f,w),r=i&&f[w].slice(0),e=y?new j(this,w,g):C,k=0,x=i?r.length:k,h=!(e instanceof j);h&&(e._active=!0,e.stopImmediatePropagation=M.stopImmediatePropagation),e.currentTarget=this,X[0]=e;while(e._active&&k<x){B(this,r[k++],X)}return h&&(delete e._active,delete e.stopImmediatePropagation),!e.defaultPrevented}},A=function(d,c,f){W.call(d,c)||(d[c]=f)},ad=!1,D;M.defaultPrevented=!1,M._active=M.cancelable=!0,M.preventDefault=function(){this.defaultPrevented=!0},M.stopImmediatePropagation=function(){this._active=!1};for(D in Y){W.call(Y,D)&&O(Q,D,{enumerable:!1,configurable:!0,writable:!0,value:Y[D]})}(function(d){function f(e){function g(h){h[e].apply(h,this)}return function(){return d.call(this,g,arguments),this}}for(var c in Y){Y.hasOwnProperty(c)&&!/^listeners|boundTo$/.test(c)&&O(I,c,{enumerable:!1,configurable:!0,writable:!0,value:f(c)})}})(I.forEach);var z={boundTo:Y.boundTo,data:function V(d,c){var f="dataset" in this;return arguments.length<2?f?this.dataset[d]:(c=this.getAttribute("data-"+d.replace(V.gre||(V.gre=/-[a-z]/g),V.gplace||(V.gplace=function(h,g){return g.toUpperCase()}))))==null?void 0:c:f?c==null?delete this.dataset[d]:(this.dataset[d]=c,c):(V.sre||(V.sre=/([a-z])([A-Z])/g,V.splace=function(h,g,i){return g+"-"+i.toLowerCase()}),d="data-"+d.replace(V.sre,V.splace),c==null?!this.removeAttribute(d):(this.setAttribute(d,c),c))},emit:function(d){var c=new CustomEvent(d);return c.arguments=I.slice.call(arguments,1),this.dispatchEvent(c)},listeners:function(c){return[]},off:function(d,c,f){return this.removeEventListener(d,c,f),this},on:function(d,c,f){return this.addEventListener(d,c,f),this},once:Y.once,trigger:function(d,g){var f=typeof d=="string",c=f?d:d.type,e=f?new CustomEvent(c,(ac.detail=g,ac)):d;return ac.detail=null,j.call(e,this,c),this.dispatchEvent(e)}};ac.cancelable=!0,ac.bubbles=!0;try{document.createEvent("Event").target=document}catch(K){ad=!0,A=function(f,c,g){if(!W.call(f,c)){try{f[c]=g}catch(d){}}}}(function(i){var f=i.Window,l=f?f.prototype:i,h=(i.Node||i.Element||i.HTMLElement).prototype,g=(i.Document||i.HTMLDocument).prototype,k=(i.XMLHttpRequest||function(){}).prototype,d,c;for(d in z){W.call(z,d)&&(c={enumerable:!1,configurable:!0,writable:!0,value:z[d]},O(l,d,c),O(h,d,c),O(g,d,c),d!=="data"&&O(k,d,c))}})(b)})(Object);b.$=function(c){return function(e,d){return c.slice.call(c.concat(d||document)[0].querySelectorAll(e))}}([]);
/*! SimpleKinetic v0.1.1 - MIT license */
;var a=function(d){var l=d.isNaN,e=d.Math,s=e.abs,r=e.round,o=e.sqrt,k=d.setInterval,p=d.clearInterval,g=0.2,q=9,m=1000/60,j=f.prototype;function f(t){for(var u in t){if(/^on|context|interval/.test(u)){this[u]=t[u]}}}j.init=function(J,I,A,w,D,B){var K=i(this),z=(s(A)<1?0:A)*(D?1:q),F=(s(w)<1?0:w)*(B?1:q),v=z*z,E=F*F,u=o(v+E),t=z/u,C=F/u,H,G;K.cancel(K._cx,K._cy);if(!(l(t)||l(C))){K._a=k(h,K.interval||m,K);K._t=0;K._d=u;K._sx=K._cx=J;K._sy=K._cy=I;K._xa=t;K._ya=C;H=r(J+u*t);G=r(I+u*C);K._ex=H;K._ey=G;if((J!==H||I!==G)&&K.start(J,I,0,0,H,G)!==false){return true}i(K._a)}return false};j.start=n("start");j.move=n("move");j.end=n("end");j.cancel=function(v,t,w,u,y,x){if(this._a){i(this).oncancel.call(this.context||this,v,t,w,u,y,x)}};j.onstart=j.onmove=j.onend=j.oncancel=function(v,t,w,u,y,x){};function i(t){p(t._a);t._a=0;return t}function n(t){t="on"+t;return function(w,u,x,v,z,y){return this[t].call(this.context||this,w,u,x,v,z,y)}}function h(v){var C=(v._t+=(v._d-v._t)*g),u=r(v._sx+C*v._xa),D=r(v._sy+C*v._ya),B=v._ex,z=v._ey,A=u-v._cx,w=D-v._cy;if(u===B&&D===z){i(v).end(B,z,A,w,B,z)}else{v.move(u,D,A,w,B,z);v._cx=u;v._cy=D}}var c=k(function(t){p(c);if(!t){k=function(w,v,u){return d.setInterval(function(){w(u)},v)}}},0,1);return f}(this);document.once("DOMContentLoaded",function(){var d=/^[^@]+?@[^\1@]+\.([a-z]{2,})$/,j=0,h={},p={handleEvent:function(v){var u=v.type,t;if("_type" in this){t=this._type+"-terminate";if(t in this){this[t](v)}}this._type=u;t=u+"-init";if(t in this){this[t](v)}n.enable($("fieldset#"+u)[0]);this[u](v)},"step-1":function(v){var u=$("fieldset#"+v.type)[0],t=$("select",u);t.once("change",function(){location.href=location.href.split(/[\?#]/)[0]+"?lang="+this.value});this.trigger("step-2")},"step-2":function(v){var u=$("fieldset#"+v.type)[0],t=$("input",u)[0];this.on("email:verified",o);t.on("keyup",this.boundTo(e));t.emit("keyup")},"step-3":function(E){var J=E.detail,H=$("fieldset"),F=$("fieldset#"+E.type)[0],u=$("select[name=activity]",F)[0],B=$("button[name=add]",F)[0],I=$("button[name=remove]",F)[0],C=$("button.next",F)[0],M=$("input[name=name]",F)[0],D=$("textarea[name=description]",F)[0],K=$("select[name=lang]",F)[0],x=$("div.lang > p > span",F)[0],y=$("ul",F)[0],A=$("div.criteria input",F),v=A.shift(),w=A.shift(),t=function(O){var N=y.appendChild(document.createElement("li")),P=N.appendChild(document.createElement("strong"));P.append("√");N.append(P);N.append(" "+f(K,O))},z=function(){I.disabled=!u.options.length;C.disabled=B.disabled=!(D.value&&M.value&&(l(v)||3<A.filter(l).length));if(this.hasOwnProperty("map")){H.slice(H.indexOf(F)+1).forEach(n[C.disabled?"disable":"enable"])}}.bind(this),G;x.innerHTML=140;M.value=D.value=u.innerHTML=y.innerHTML="";u.once("change",function(){J.currentActivity=this.value;E.currentTarget.trigger(E)});M.on("keyup",this.onNameChange||(this.onNameChange=function(O){var P=M.value.trim(),N=u.options[u.selectedIndex];m(J).name=P;if(P){N.value=J.currentActivity;N.innerHTML="";N.append(P)}z()}));D.on("keyup",this.onDescriptionChange||(this.onDescriptionChange=function(R){var P=D.value.trim(),O=parseInt(D.getAttribute("maxlength"),10),Q=(O-P.length),N;if(Q<0){Q=0;D.value=P.slice(0,O)}x.innerHTML=Q;N=m(J).description;if(!(K.value in N)){t(K.value)}N[K.value]=P;if(!P.length){delete N[K.value];y.innerHTML="";Object.keys(N).forEach(t)}z()}));K.on("change",this.onLanguageDescriptionChange||(this.onLanguageDescriptionChange=function(O){var N=m(J).description;D.value=N[K.value]||"";D.emit("keyup")}));J.activities.forEach(function(Q,O){if(/^remove:/.test(Q.id)){return}var P=u.appendChild(document.createElement("option")),N;P.value=Q.id;P.append(Q.name);if(!J.hasOwnProperty("currentActivity")||Q.id==J.currentActivity){J.currentActivity=Q.id;P.selected="selected";M.value=Q.name;N=Object.keys(Q.description);N.forEach.call(K.options,i,N[0]);N.forEach(t);D.value=Q.description[K.value]||"";D.emit("keyup")}},this);B.on("click",this.onAnotherActivity||(this.onAnotherActivity=function(P){var N=u.options,Q;J.currentActivity=null;u.appendChild(document.createElement("option")).append(Q=M.placeholder||M.getAttribute("placeholder"));M.value=D.value="";D.emit("keyup");try{M.focus()}catch(O){}A.concat(w,v).forEach(function(R){R.checked=false});u.selectedIndex=N.length-1}));I.on("click",this.onRemoveActivity||(this.onRemoveActivity=function(P){var O=m(J),Q=O.id,N;if(/^new:/.test(Q)){for(N=0;N<J.activities.length;N++){if(J.activities[N].id==Q){J.activities.splice(N,1);break}}}else{if(!/^remove:/.test(Q)){O.id="remove:"+Q}}J.currentActivity=null;u.selectedIndex+=u.selectedIndex?-1:1;u.emit("change")}));A.on("change",this.onCriteriaChange||(this.onCriteriaChange=function(){A.forEach(k,m(J).criteria=[]);z()}));G=J.currentActivity?q(J.activities,J.currentActivity):{criteria:[],certification:[]};A.forEach(function(N){N.checked=-1<this.criteria.indexOf(N.value);N.parentNode.on("click",s)},G);w.checked=0<G.criteria.length;v.checked=0<G.certification.length;w.on("change",this.enableAddRemoveButtons||(this.enableAddRemoveButtons=z));v.on("change",this.onCertifiedEnabled||(this.onCertifiedEnabled=function(){m(J).certification=[true];z()}));z();if(B.disabled&&I.disabled){B.emit("click")}C.on("click",this.onNextActivity||(this.onNextActivity=function(N){this.trigger("step-4",J)}.bind(this)));if(!C.disabled){C.emit("click")}},"step-4":function(y){var t=y.detail,x=$("fieldset#"+y.type)[0],u=$("i",x)[0],w=$("select[name=category]",x)[0],v=$("div.map > button",x)[0];$("fieldset",x).forEach(n.enable);if(!this.hasOwnProperty("map")){this.map=L.map("map");L.tileLayer("http://otile1.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",{attribution:"Map Tiles &copy; Open MapQuest",maxZoom:18}).addTo(this.map);this.map.setView([navigator.country.geo.latitude,navigator.country.geo.longitude],5);v.on("click",function(){v.disabled=true;try{navigator.geolocation.getCurrentPosition(function B(C){this.setView([C.coords.latitude,C.coords.longitude],Math.max(14,this.getZoom()));v.disabled=false}.bind(this),function z(){v.disabled=false},{maximumAge:600000})}catch(A){}}.bind(this.map));w.on("change",this.onCategoryChange||(this.onCategoryChange=function(z){u.className="icon-"+w.value}))}}},r=["mousedown","mousemove","mouseup","click"],n={disable:function(t){t.classList.add("disabled");r.forEach(n._addStopEvent,t)},enable:function(t){t.classList.remove("disabled");r.forEach(n._removeStopEvent,t)},_addStopEvent:function(t){this.on(t,stop,true)},_removeStopEvent:function(t){this.off(t,stop,true)}};function c(t,u){var w=u.value.trim(),v=u.data("email"),x;if(d.test(w)&&w!==v){u.data("email",w);t.xhr=x=new XMLHttpRequest;x.target=t;x.open("get","cgi/verify.php?email="+encodeURIComponent(w),true);x.on("readystatechange",g).send(null);h.email=v}}function o(u){var t=u.detail;switch(typeof t){case"object":h.activities=t;break;case"boolean":if(confirm(jslang.seeYouLater)){}location.href="http://equolo.org/";break;default:h.activities=[]}if(h.hasOwnProperty("activities")){this.trigger("step-3",h)}}function e(v){var t=v.currentTarget;h.email=null;try{this.xhr.abort()}catch(u){}clearTimeout(parseInt(t.data("timer")||0,10));if(d.test(t.value.trim())){t.data("timer",setTimeout(c,1000,this,t))}else{while(t=t.parentNode){if(t.nodeName==="FIELDSET"){$("fieldset").slice($("fieldset").indexOf(t)+1).forEach(n.disable);break}}}}function g(){if(this.readyState===4){this.target.trigger("email:verified",JSON.parse(this.responseText))}}function q(w,x){for(var u=0,v=w.length,t;u<v;u++){t=w[u];if(t.id==x){return t}}}function f(w,v){for(var t=w.options,u=0;u<t.length;u++){if(t[u].value==v){return t[u].innerHTML}}}function m(t){if(!t.currentActivity){t.activities.push({id:(t.currentActivity="new:".concat(++j)),name:"",description:{},criteria:[],certification:[],place:[]})}return q(t.activities,t.currentActivity)}function l(t){return t.checked}function s(t){if(t.target==this){this.firstChild.checked=!this.firstChild.checked;this.firstChild.emit("change")}}function i(t){t.selected=t.value==this?"selected":""}function k(t){if(t.checked){this.push(t.value)}}Object.keys(p).forEach(function(t){if(t!=="handleEvent"){this.on(t,this)}},p);$("fieldset").forEach(n.disable);p.trigger("step-1")})}(this));