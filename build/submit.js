/*! )°(, equolo - https://github.com/equolo/equolo.org */
/*@cc_on
(function(f){
window.setTimeout=f(window.setTimeout);
window.setInterval=f(window.setInterval);
})(function(f){return function(c,t,a){a=[].slice.call(arguments,2);return f(function(){c.apply(this,a)},t)}});
@*/
var
IEMobile=/*@cc_on/\bIEMobile\b/.test(navigator.userAgent)||@*/false,
IE9Mobile=/*@cc_on(IEMobile&&@_jscript_version<10)||@*/false,
IE10Mobile=/*@cc_on(IEMobile&&@_jscript_version/10>=1)||@*/false
;
IE9Mobile&&document.write('<link rel="stylesheet" href="css/IE9Mobile.css"/><script src="js/IE9Mobile.js"></script>');(function(b){(function(e,c,d){"indexOf" in e||(e.indexOf=function(f){for(var g=this.length;g--&&this[g]!==f;){}return g});"bind" in c||(c.bind=function(j){var i=this,h=e.slice,g=h.call(arguments,1);return function(){return i.apply(j,g.concat(h.call(arguments)))}});"trim" in d||(d.trim=function(){return this.replace(/^[^\S]+|[^\S]+$/g,"")})}(Array.prototype,Function.prototype,String.prototype));
/*! (C) WebReflection Mit Style License */
(function(z){function F(c){return typeof c=="string"?z.document.createTextNode(c):c}function m(f){if(f.length===1){return F(f[0])}for(var e=z.document.createDocumentFragment(),c=x.call(f),d=0;d<f.length;d++){e.appendChild(F(c[d]))}return e}for(var g,w,G,k=/^\s+|\s+$/g,E=/\s+/,C=" ",y=function(c,d){return this.contains(c)?d||this.remove(c):d&&this.add(c),!!d},q=(z.Element||z.Node||z.HTMLElement).prototype,B=["prepend",function(){var c=this.firstChild,d=m(arguments);c?this.insertBefore(d,c):this.appendChild(d)},"append",function(){this.appendChild(m(arguments))},"before",function(){var c=this.parentNode;c&&c.insertBefore(m(arguments),this)},"after",function(){var d=this.parentNode,e=this.nextSibling,c=m(arguments);d&&(e?d.insertBefore(c,e):d.appendChild(c))},"replace",function(){var c=this.parentNode;c&&c.replaceChild(m(arguments),this)},"remove",function(){var c=this.parentNode;c&&c.removeChild(this)}],x=B.slice,j=B.length;j;j-=2){g=B[j-2],g in q||(q[g]=B[j-1])}"classList" in document.documentElement?(G=document.createElement("div").classList,G.add("a","b"),"a b"!=G&&(q=G.constructor.prototype,"add" in q||(q=z.DOMTokenList.prototype),w=function(c){return function(){var d=0;while(d<arguments.length){c.call(this,arguments[d++])}}},q.add=w(q.add),q.remove=w(q.remove),q.toggle=y)):(w=function(c){if(!c){throw"SyntaxError"}if(E.test(c)){throw"InvalidCharacterError"}return c},G=function(d){var c=d.className.replace(k,"");c.length&&B.push.apply(this,c.split(E)),this._=d},G.prototype={length:0,add:function(){for(var c=0,d;c<arguments.length;c++){d=arguments[c],this.contains(d)||B.push.call(this,g)}this._.className=""+this},contains:function(c){return function(d){return j=c.call(this,g=w(d)),-1<j}}([].indexOf||function(c){j=this.length;while(j--&&this[j]!==c){}return j}),item:function(c){return this[c]||null},remove:function(){for(var c=0,d;c<arguments.length;c++){d=arguments[c],this.contains(d)&&B.splice.call(this,j,1)}this._.className=""+this},toggle:y,toString:function D(){return B.join.call(this,C)}},(Object.defineProperty||function(d,c,f){d.__defineGetter__(c,f.get)})(q,"classList",{get:function(){return new G(this)},set:function(){}}));try{new z.CustomEvent("?")}catch(A){z.CustomEvent=function(f,c){function h(o,e){var l=document.createEvent(f);if(typeof o!="string"){throw new Error("An event name must be provided")}return f=="Event"&&(l.initCustomEvent=d),e==null&&(e=c),l.initCustomEvent(o,e.bubbles,e.cancelable,e.detail),l}function d(o,i,p,l){this.initEvent(o,i,p),this.detail=l}return h}(z.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}})(b);
/*! (C) Andrea Giammarchi Mit Style License */
(function(Z){function H(){return{l:{},m:[],b:[]}}function q(d){var c=H();return ab.value=c,M(d,Y,ab),ab.value=null,c}function B(d,c,f){typeof c=="function"?c.apply(d,f):c.handleEvent.apply(c,f)}function j(d,c,f){f&&A(this,"detail",f),A(this,"type",c),A(this,"target",d),A(this,"timeStamp",Q())}if(Z.eddy){return}Z.eddy=!0;var I=Array.prototype,P=Z.prototype,L=j.prototype,V=P.hasOwnProperty,J=I.push,O=I.slice,G=I.unshift,ad="toLocaleString",Y={toLocaleString:1}.propertyIsEnumerable(ad)?"_@eddy"+Math.random():ad,R=Y===ad,ab=(Z.create||Z)(null),W=[],M=R?function(d,c,f){d[c]=f.value}:Z.defineProperty,aa=function(d){var c=this;return function(){return c.apply(d,arguments)}},F=I.indexOf||function(d){var c=this.length;while(c--&&this[c]!==d){}return c},Q=Date.now||function(){return(new Date).getTime()},X={boundTo:function(e){var h=V.call(this,Y)?this[Y]:q(this),f=h.m,g=h.b,d=typeof e=="string"?this[e]:e,c=F.call(f,d);return c<0?g[J.call(f,d)-1]=aa.call(d,this):g[c]},emit:function(g){var m=V.call(this,Y),i=m&&this[Y].l,h=m&&V.call(i,g),f=h&&i[g],e=h&&O.call(arguments,1),d=0,k=h?f.length:d;while(d<k){B(this,f[d++],e)}return h},listeners:function(c){return V.call(this,Y)&&V.call(this[Y].l,c)&&this[Y].l[c].slice()||[]},off:function(d,h){var f=V.call(this,Y),e=f&&this[Y].l,g=f&&V.call(e,d)&&e[d],c;return g&&(c=F.call(g,h),-1<c&&(g.splice(c,1),g.length||delete e[d])),this},on:function(e,h,f){var g=V.call(this,Y),d=(g?this[Y]:q(this)).l,c=g&&V.call(d,e)?d[e]:d[e]=[];return F.call(c,h)<0&&(f?G:J).call(c,h),this},once:function(d,g,f){var c=function(h){e.off(d,c,f),B(e,g,arguments)},e=this;return e.on(d,c,f)},trigger:function(C,g){var E=V.call(this,Y),f=E&&this[Y].l,y=typeof C=="string",w=y?C:C.type,i=E&&V.call(f,w),r=i&&f[w].slice(0),e=y?new j(this,w,g):C,k=0,x=i?r.length:k,h=!(e instanceof j);h&&(e._active=!0,e.stopImmediatePropagation=L.stopImmediatePropagation),e.currentTarget=this,W[0]=e;while(e._active&&k<x){B(this,r[k++],W)}return h&&(delete e._active,delete e.stopImmediatePropagation),!e.defaultPrevented}},A=function(d,c,f){V.call(d,c)||(d[c]=f)},ac=!1,D;L.defaultPrevented=!1,L._active=L.cancelable=!0,L.preventDefault=function(){this.defaultPrevented=!0},L.stopImmediatePropagation=function(){this._active=!1};for(D in X){V.call(X,D)&&M(P,D,{enumerable:!1,configurable:!0,writable:!0,value:X[D]})}(function(d){function f(e){function g(h){h[e].apply(h,this)}return function(){return d.call(this,g,arguments),this}}for(var c in X){X.hasOwnProperty(c)&&!/^listeners|boundTo$/.test(c)&&M(I,c,{enumerable:!1,configurable:!0,writable:!0,value:f(c)})}})(I.forEach);var z={boundTo:X.boundTo,data:function U(d,c){var f="dataset" in this;return arguments.length<2?f?this.dataset[d]:(c=this.getAttribute("data-"+d.replace(U.gre||(U.gre=/-[a-z]/g),U.gplace||(U.gplace=function(h,g){return g.toUpperCase()}))))==null?void 0:c:f?c==null?delete this.dataset[d]:(this.dataset[d]=c,c):(U.sre||(U.sre=/([a-z])([A-Z])/g,U.splace=function(h,g,i){return g+"-"+i.toLowerCase()}),d="data-"+d.replace(U.sre,U.splace),c==null?!this.removeAttribute(d):(this.setAttribute(d,c),c))},emit:function(d){var c=new CustomEvent(d);return c.arguments=I.slice.call(arguments,1),this.dispatchEvent(c)},listeners:function(c){return[]},off:function(d,c,f){return this.removeEventListener(d,c,f),this},on:function(d,c,f){return this.addEventListener(d,c,f),this},once:X.once,trigger:function(d,g){var f=typeof d=="string",c=f?d:d.type,e=f?new CustomEvent(c,(ab.detail=g,ab)):d;return ab.detail=null,j.call(e,this,c),this.dispatchEvent(e)}};ab.cancelable=!0,ab.bubbles=!0;try{document.createEvent("Event").target=document}catch(K){ac=!0,A=function(f,c,g){if(!V.call(f,c)){try{f[c]=g}catch(d){}}}}(function(i){var f=i.Window,l=f?f.prototype:i,h=(i.Node||i.Element||i.HTMLElement).prototype,g=(i.Document||i.HTMLDocument).prototype,k=(i.XMLHttpRequest||function(){}).prototype,d,c;for(d in z){V.call(z,d)&&(c={enumerable:!1,configurable:!0,writable:!0,value:z[d]},M(l,d,c),M(h,d,c),M(g,d,c),d!=="data"&&M(k,d,c))}})(b)})(Object);b.$=function(c){return function(e,d){return c.slice.call(c.concat(d||document)[0].querySelectorAll(e))}}([]);
/*! SimpleKinetic v0.1.1 - MIT license */
;var a=function(d){var l=d.isNaN,e=d.Math,s=e.abs,r=e.round,o=e.sqrt,k=d.setInterval,p=d.clearInterval,g=0.2,q=9,m=1000/60,j=f.prototype;function f(t){for(var u in t){if(/^on|context|interval/.test(u)){this[u]=t[u]}}}j.init=function(J,I,A,w,D,B){var K=i(this),z=(s(A)<1?0:A)*(D?1:q),F=(s(w)<1?0:w)*(B?1:q),v=z*z,E=F*F,u=o(v+E),t=z/u,C=F/u,H,G;K.cancel(K._cx,K._cy);if(!(l(t)||l(C))){K._a=k(h,K.interval||m,K);K._t=0;K._d=u;K._sx=K._cx=J;K._sy=K._cy=I;K._xa=t;K._ya=C;H=r(J+u*t);G=r(I+u*C);K._ex=H;K._ey=G;if((J!==H||I!==G)&&K.start(J,I,0,0,H,G)!==false){return true}i(K._a)}return false};j.start=n("start");j.move=n("move");j.end=n("end");j.cancel=function(v,t,w,u,y,x){if(this._a){i(this).oncancel.call(this.context||this,v,t,w,u,y,x)}};j.onstart=j.onmove=j.onend=j.oncancel=function(v,t,w,u,y,x){};function i(t){p(t._a);t._a=0;return t}function n(t){t="on"+t;return function(w,u,x,v,z,y){return this[t].call(this.context||this,w,u,x,v,z,y)}}function h(v){var C=(v._t+=(v._d-v._t)*g),u=r(v._sx+C*v._xa),D=r(v._sy+C*v._ya),B=v._ex,z=v._ey,A=u-v._cx,w=D-v._cy;if(u===B&&D===z){i(v).end(B,z,A,w,B,z)}else{v.move(u,D,A,w,B,z);v._cx=u;v._cy=D}}var c=k(function(t){p(c);if(!t){k=function(w,v,u){return d.setInterval(function(){w(u)},v)}}},0,1);return f}(this);document.once("DOMContentLoaded",function(){var d=/^[^@]+?@[^\1@]+\.([a-z]{2,})$/,j=0,h={},o={handleEvent:function(t){var s=t.type,r;if("_type" in this){r=this._type+"-terminate";if(r in this){this[r](t)}}this._type=s;r=s+"-init";if(r in this){this[r](t)}l.enable($("fieldset#"+s)[0]);this[s](t)},"step-1":function(t){var s=$("fieldset#"+t.type),r=$("select",s);r.once("change",function(){location.href=location.href.split(/[\?#]/)[0]+"?lang="+this.value});this.trigger("step-2")},"step-2":function(t){var s=$("fieldset#"+t.type)[0],r=$("input",s)[0];this.on("email:verified",n);r.on("keyup",this.boundTo(e));r.emit("keyup")},"step-3":function(A){var x=A.detail,D=$("fieldset#"+A.type),v=$("select[name=activity]",D)[0],C=$("button[name=add]",D)[0],y=$("button[name=remove]",D)[0],s=$("input[name=name]",D)[0],B=$("textarea[name=description]",D)[0],u=$("select[name=lang]",D)[0],r=$("div.lang > p > span",D)[0],w=$("ul",D)[0],z=function(F){var E=w.appendChild(document.createElement("li")),G=E.appendChild(document.createElement("strong"));G.append("√");E.append(G);E.append(" "+f(u,F))},t=function(){C.disabled=!(B.value&&s.value);y.disabled=!v.options.length};r.innerHTML=140;s.value=B.value=v.innerHTML=w.innerHTML="";v.once("change",function(){x.currentActivity=this.value;A.currentTarget.trigger(A)});s.on("keyup",this.onNameChange||(this.onNameChange=function(F){var G=s.value.trim(),E=v.options[v.selectedIndex];k(x).name=G;if(G){E.value=x.currentActivity;E.innerHTML="";E.append(G);t()}}));B.on("keyup",this.onDescriptionChange||(this.onDescriptionChange=function(I){var G=B.value.trim(),F=parseInt(B.getAttribute("maxlength"),10),H=(F-G.length),E;if(H<0){H=0;B.value=G.slice(0,F)}r.innerHTML=H;E=k(x).description;if(!(u.value in E)){z(u.value);t()}E[u.value]=G;if(!G.length){delete E[u.value];w.innerHTML="";Object.keys(E).forEach(z)}}));u.on("change",this.onLanguageDescriptionChange||(this.onLanguageDescriptionChange=function(F){var E=k(x).description;B.value=E[u.value]||"";B.emit("keyup")}));x.activities.forEach(function(H,F){if(/^remove:/.test(H.id)){return}var G=v.appendChild(document.createElement("option")),E;G.value=H.id;G.append(H.name);if(!x.hasOwnProperty("currentActivity")||H.id==x.currentActivity){x.currentActivity=H.id;G.selected="selected";s.value=H.name;E=Object.keys(H.description);E.forEach.call(u.options,i,E[0]);E.forEach(z);B.value=H.description[u.value]||"";B.emit("keyup")}},this);C.on("click",this.onAnotherActivity||(this.onAnotherActivity=function(G){var E=v.options,H;x.currentActivity=null;v.appendChild(document.createElement("option")).append(H=s.placeholder||s.getAttribute("placeholder"));s.value=B.value="";B.emit("keyup");try{s.focus()}catch(F){}v.selectedIndex=E.length-1}));y.on("click",this.onRemoveActivity||(this.onRemoveActivity=function(G){var F=k(x),H=F.id,E;if(/^new:/.test(H)){for(E=0;E<x.activities.length;E++){if(x.activities[E].id==H){x.activities.splice(E,1);break}}}else{if(!/^remove:/.test(H)){F.id="remove:"+H}}x.currentActivity=null;v.selectedIndex+=v.selectedIndex?-1:1;v.emit("change")}));t();if(C.disabled&&y.disabled){C.emit("click")}}},q=["mousedown","mousemove","mouseup","click"],l={disable:function(r){r.className="disabled";q.forEach(l._addStopEvent,r)},enable:function(r){r.className="";q.forEach(l._removeStopEvent,r)},_addStopEvent:function(r){this.on(r,m,true)},_removeStopEvent:function(r){this.off(r,m,true)}};function m(r){r.preventDefault();(r.stopImmediatePropagation||r.stopPropagation).call(r)}function c(r,s){var u=s.value.trim(),t=s.data("email"),v;if(d.test(u)&&u!==t){s.data("email",u);r.xhr=v=new XMLHttpRequest;v.target=r;v.open("get","cgi/verify.php?email="+encodeURIComponent(u),true);v.on("readystatechange",g).send(null);h.email=t}}function n(s){var r=s.detail;switch(typeof r){case"object":h.activities=r;break;case"boolean":if(confirm(jslang.seeYouLater)){}location.href="http://equolo.org/";break;default:h.activities=[]}if(h.hasOwnProperty("activities")){this.trigger("step-3",h)}}function e(t){var r=t.currentTarget;h.email=null;try{this.xhr.abort()}catch(s){}clearTimeout(parseInt(r.data("timer")||0,10));if(d.test(r.value.trim())){r.data("timer",setTimeout(c,1000,this,r))}else{while(r=r.parentNode){if(r.nodeName==="FIELDSET"){$("fieldset").slice($("fieldset").indexOf(r)+1).forEach(l.disable);break}}}}function g(){if(this.readyState===4){this.target.trigger("email:verified",JSON.parse(this.responseText))}}function p(u,v){for(var s=0,t=u.length,r;s<t;s++){r=u[s];if(r.id==v){return r}}}function f(u,t){for(var r=u.options,s=0;s<r.length;s++){if(r[s].value==t){return r[s].innerHTML}}}function k(r){if(!r.currentActivity){r.activities.push({id:(r.currentActivity="new:".concat(++j)),name:"",description:{},place:[]})}return p(r.activities,r.currentActivity)}function i(r){r.selected=r.value==this?"selected":""}Object.keys(o).forEach(function(r){if(r!=="handleEvent"){this.on(r,this)}},o);$("fieldset").forEach(l.disable);o.trigger("step-1")})}(this));